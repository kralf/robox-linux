diff -Naur sysvinit-2.86/debian/changelog sysvinit-2.86-robox-linux/debian/changelog
--- sysvinit-2.86/debian/changelog	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/changelog	2010-06-14 14:07:20.649484647 +0200
@@ -0,0 +1,986 @@
+sysvinit (2.86.ds1-1) unstable; urgency=low
+
+  * New upload with a clean .orig.tar.gz archive without the .o files.
+    No other changes from 2.86-5.  Used the .ds naming convention
+    that is suggested for packages which need to have their
+    docs removed (thanks, Marc Haber)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri, 10 Dec 2004 00:04:18 +0100
+
+sysvinit (2.86-5) unstable; urgency=high
+
+  * Remove leftover debugging "echo" that prevented
+    /etc/init.d/mountnfs.sh from actually doing anything (closes: #270894)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri, 10 Sep 2004 16:57:34 +0200
+
+sysvinit (2.86-4) unstable; urgency=high
+
+  * Same upload, this time built without -sa so that original source
+    isn't included (archive rejects it).
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed,  8 Sep 2004 11:59:08 +0200
+
+sysvinit (2.86-3) unstable; urgency=high
+
+  * Upload of -3 to unstable so that -2 can go into testing-proposed-updates
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon,  6 Sep 2004 20:07:38 +0200
+
+sysvinit (2.86-2) testing-proposed-updates; urgency=high
+
+  * Remove .clean file before touching it; prevents symlink attack
+    which in rare circumstances could result in random file creation
+    (closes: #264234)
+  * Do the above in a noclobber environment (Martin Pitt).
+  * Don't mount network filesystems multiple times (closes: #264894)
+  * Include .orig.tar.gz source in -2 again ("dpkg-buildpackage -sa") -
+    the one that comes with -1 erronously includes .o files and
+    binaries (oops!).
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon,  6 Sep 2004 19:02:19 +0200
+
+sysvinit (2.86-1) unstable; urgency=medium
+
+  * Better algorithm for pidof (closes: #248210)
+  * Include fsck.nfs.8 (closes: #250089)
+  * Include new skeleton script (closes: #244908)
+  * Better error message on failure to find path to mtab (closes: #255820)
+  * Add support for fstype ncp (alias for ncpfs) (closes: #259971)
+  * Touch /tmp/.clean earlier (closes: #255303)
+  * Don't include halt and reboot for hurd-i386 (closes: #255880)
+  * Remove XSIisms in mountvirtfs and invoke-rc.d (closes: #256726)
+  * Add "-t $roottype" to mount -f for / (closes: #255849)
+  * Always initialize PATH (to /bin:/usr/bin:/sbin:/usr/sbin) (closes: #258065)
+  * Try harder to remount ro and rw (closes: #259979)
+  * Add support for LABEL=/UUID= in checkroot.sh (closes: #261342)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri, 30 Jul 2004 14:17:05 +0200
+
+sysvinit (2.85-22) unstable; urgency=medium
+
+  * Fix typo in /etc/init.d/halt (closes: #255133)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Sat, 19 Jun 2004 12:40:12 +0200
+
+sysvinit (2.85-21) unstable; urgency=medium
+
+  * Create dependencies on glibc (>= 2.3.2.ds1-12) not through the
+    shlibs.local hack anymore. That might clash with a future system
+    shlibs file. Use the same method as we use to generate the
+    mount dependency - with a script (closes: #253314).
+  * In checkroot.sh always use the two-argument version of mount
+    so that mount doesn't confuse device and directory (closes: #254724)
+  * Change [ cond1 -a cond2 ] to [ cond1 ] && [ cond2 ] everywhere.
+  * Fix mountvirtsfs, it broke for virtual filesystems mentioned in
+    fstab without any options (closes: #254271)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri, 18 Jun 2004 13:43:55 +0200
+
+sysvinit (2.85-20) unstable; urgency=low
+
+  * Create /dev/pts in mountvirtfs for Linux + devfs (closes: #252625)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon,  7 Jun 2004 13:45:12 +0200
+
+sysvinit (2.85-19) unstable; urgency=low
+
+  * Create /dev/{pts,shm} and /sys in postinst (closes: #252820, #252925)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon,  7 Jun 2004 13:30:31 +0200
+
+sysvinit (2.85-18) unstable; urgency=medium
+
+  * Fix typo in /etc/init.d/single (closes: #252611)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri,  4 Jun 2004 14:38:55 +0200
+
+sysvinit (2.85-17) unstable; urgency=low
+
+  * On Debian/k*BSD, dmesg is in /sbin (closes: #252518)
+  * On Debian/k*BSD, RB_HALT_SYSTEM is called RB_HALT
+  * RB_POWEROFF can be RB_POWER_OFF (closes: #252547, #252598)
+  * Add /sys, /dev/pts and /dev/shm to sysvinit. Remove the
+    mkdir's for those directories from mountvirtfs.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri,  4 Jun 2004 11:51:46 +0200
+
+sysvinit (2.85-16) unstable; urgency=high
+
+  * Remove /etc/init.d/{mountkernfs,devpts.sh) that glibc installed
+    since mountvirtfs now provides these. (closes: #230857)
+  * Remove -e from mountvirtfs (closes: #232122)
+  * Add some more comments/documentation to mountvirtfs
+  * Initscripts depends on libc6 anyway right now, so we let it
+    depend on libc6 (>= 2.3.2.ds1-12) via shlibs.local
+  * Suggest sysv-rc-conf (closes: #244643)
+  * Updated french manpage for update-rc.d (closes: #245007)
+  * Use larger dmesg buffer (-s option) (closes: #242923)
+  * Fix up comments in /etc/default/tmpfs (closes: #245681)
+  * Added GNU/Hurd and kFreeBSD fixes (closes: #246743)
+  * Run mountvirtfs again at S36 so that it mounts /proc/bus/usb in
+    case usb was loaded as a module (closes: #249031)
+  * Don't mkdir /dev/pts if it's not there - and don't mount devpts
+    filesystem on it either in that case. Should help udev.
+  * mountvirtfs now uses the options from /etc/fstab (closes: #251016)
+  * add filesystem type "cifs" as network fs (closes: #248919)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu,  3 Jun 2004 20:03:33 +0200
+
+sysvinit (2.85-15) unstable; urgency=high
+
+  * Drop bogus dependency on fileutils (closes: #241570)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon,  5 Apr 2004 17:07:24 +0200
+
+sysvinit (2.85-14) unstable; urgency=high
+
+  * When remounting "/", just use "mount -n -o remount,rw /" and don't
+    bother with the device or other arguments - "mount" will look up the
+    root device in /etc/fstab, but the device argument to the mount
+    system call is ignored by the kernel for remount anyway. So this
+    doesn't hurt even if the device is incorrect, and it fixes a
+    platform dependant case where "mount -n -o remount,rw <whatever> /"
+    fails with "mount: you must specify the filesystem type". That
+    is a bug in mount(8): if you don't specify the type, it passes
+    garbage to the kernel, and some archs choke on that.
+    (closes: #239735)
+  * change checkroot.sh so that it never checks the root filesystem
+    if root is on NFS even if fs_passno is set (closes: #240470)
+  * Reckognize type "nfs4" as network filesystem
+  * Better check for file-rc in postinst of initscripts (closes: #240066)
+  * Use /proc/sys/kernel/random/poolsize in urandom script (closes: #240057)
+  * Applied Debian/KFreeBSD patches. Moved initctl to /etc/.initctl
+    for the FreeBSD kernels. (closes: #226939)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed, 31 Mar 2004 13:10:48 +0200
+
+sysvinit (2.85-13) unstable; urgency=low
+
+  * Add /etc/default/halt (closes: #196983)
+  * Set default variables used in every /etc/init.d script explicitly
+    and only source /etc/default/rcS if it is present (closes: #239439)
+  * Fix MOTD typo in bootmisc.sh (closes: #239279)
+  * Include lastb (closes: #239586)
+  * Remove /lib/init/realpath (closes: #239343)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 23 Mar 2004 16:55:38 +0100
+
+sysvinit (2.85-12) unstable; urgency=low
+
+  * Support for root on devices with a dynamic major, such as
+    LVM and partitionable RAID. If the root device in /etc/fstab doesn't
+    match up with the actual root device, we try to create a temporary
+    device node in /dev/shm/root so fsck and remount rw can be done.
+  * Use lstat() instead of stat() in the mountpoint(8) utility.
+  * Fix checkroot devfs behaviour.
+  * Hmm, /usr/bin/test -w works to check if a filesystem is readonly,
+    but bash's built-in doesn't. Work-around with touch -a.
+  * /lib/init/readlink was completely broken, argh. Fixed borkenness.
+    Also changed behaviour so that readlink -ff is equivalent to realpath,
+    and -f doesn't insist on the path being a symlink. (closes: #238611)
+  * Removed one more init_setenv debug message from init.c
+  * Move mountpoint and readlink to initscripts, so that initscripts
+    doesn't have to depend on a specific version of sysvinit anymore
+    (closes: #239059)
+  * Make initscripts non-essential (needed for Hurd) (closes: #219969).
+  * Remove period from short description (closes: #239098)
+  * Improved handling of /etc/nologin symlink  (closes: #184402)
+  * Make sure 'skeleton restart' restart the service even if it is not
+    running in accordance to policy 3.5.9.0 (closes: #184342)
+  * Change -name x into -path ./x in bootclean.sh (closes: #193627)
+  * Remove /usr/local from bootlogd path, move /sbin:/bin to the
+    front of the PATH. /usr/bin:/usr/sbin is kept around because the
+    stop action needs it for savelog. (closes: #230763)
+  * Remove x bit from bootclean.sh (closes: #230762)
+  * Consolidate variables in skeleton (closes: #122486)
+  * Move set -e up in skeleton (closes: #148847)
+  * Include spanish manpage for update-rc.d (closes: #209199)
+  * In /etc/init.d/README change http: URL to file: URL (closes: #151761)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Sun, 21 Mar 2004 13:10:09 +0100
+
+sysvinit (2.85-11) unstable; urgency=high
+
+  * Move runlevel back to /sbin (closes: #238261)
+  * Move killall5 back to /sbin (closes: #238416)
+  * More finetuning of the included readlink program. It now has a much
+    more correct version of realpath() than glibc (famous last words).
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed, 17 Mar 2004 00:29:53 +0100
+
+sysvinit (2.85-10) unstable; urgency=low
+
+  * Provide mountvirtfs. It mounts /proc,/sys, etc at early boot.
+    Libc6 does this too with a script called mountkernfs which is called
+    later, but that shouldn't matter. Libc6 must remove it later on.
+    Perhaps we should remove the symlink - I'm not sure.
+  * Add /etc/default/{devpts,tmpfs} to initscripts. Add Replaces: libc6,
+    libc6.1 to control for initscripts.
+  * Add /lib/init/readlink which we can use until the standard
+    readlink has the features we need.
+  * Fix maxproclen issue (closes: #236138)
+  * Remove INIT_HALT debug message (closes: #230743)
+  * When cleaning /tmp, don't look at directory atime for aging info
+    (closes: #236709,#205486,#221622)
+  * bootclean.sh: only run if find and xargs are available (closes: #232635)
+  * Depend on mount (>= 2.11l-1) for the -l option (closes: #217702)
+  * Mount non-/ proc filesystems in mountall.sh. This will not work
+    if you want to mount /foo/bar/proc if /foo/bar is an NFS filesystem,
+    but this will do for now (closes: #234152)
+  * Add coda to list of networked filesystems in mountall.sh/mountnfs.sh
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 16 Mar 2004 01:04:06 +0100
+
+sysvinit (2.85-9) unstable; urgency=low
+
+  * Fix typo in /etc/init.d/halt (closes: #224626)
+  * Fix /etc/mtab-is-a-symlink corner cases (closes: #204619)
+  * Fix /etc/init.d/mountall.sh to only mount local fses (closes: #224720)
+  * Replace reference to dpkg programmer's manual in update-rc.d.8
+    with reference to Debian Policy (closes: #223658)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 23 Dec 2003 12:16:14 +0100
+
+sysvinit (2.85-8) unstable; urgency=low
+
+  * Clean /tmp, /var/run and /var/lock directly after mounting all
+    local filesystems and once more after mounting network filesystems,
+    but not more than once per directory (closes: #208226,#223495)
+  * Do not run bootlogd by default - it's a bit to experimental for
+    the "stable" release. Can be turned on manually (closes: #217582)
+  * Fix /etc/init.d/bootlogd (closes: #208578)
+  * Rework umountnfs.sh/umountfs (closes: #204425, #206111, #20863, #203050)
+  * Depend on mount >= 2.11l (closes: #217702)
+  * Don't use umount -l on 2.4 kernels < 2.4.11 (closes: #217701)
+  * /var/log/boot mode 640, group adm (closes: #204400)
+  * Deal correctly with /etc/mtab being a symlink (closes: #204619)
+  * Set TMPTIME to "infinite" to not clean /tmp (closes: #205894)
+  * Mount all proc filesystems (closes: #206979)
+  * Fix typo in invoke-rc.d manpage (closes: #196135)
+  * Set correct permissions on /etc/{rcS.d,init.d}/README (closes: #201467)
+  * Update /etc/init.d/README (refer to correct paragraph) (closes: #206411)
+  * bootlogd: handle comma's in console= (closes: #213749)
+  * Remove trailing space from 'echo -n "something ... "' (closes: #219202)
+  * Include documentation on invoke-rc.d and policy-rc.d (closes: #219245)
+  * Remove empty /usr/include from sysv-rc (closes: #222538)
+  * Let sysvinit Pre-Depend on file-rc | sysv-rc (closes: #221808)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu, 18 Dec 2003 23:11:20 +0100
+
+sysvinit (2.85-7) unstable; urgency=low
+
+  * Fix devfs mtab fixup in checkroot.sh (closes: #202421)
+  * pidof symlink should be in /bin (closes: #202611)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed, 23 Jul 2003 19:11:59 +0200
+
+sysvinit (2.85-6) unstable; urgency=high
+
+  * When bootlogd gets an error writing to the real console, try
+    to re-open. If that fails, roll over and die (closes: #202382)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 22 Jul 2003 12:43:07 +0200
+
+sysvinit (2.85-5) unstable; urgency=low
+
+  * Allow "init u" to fail in postinst without bailing out with an error
+    (closes: #197991, #198216, #198309, #198937)
+  * Revert changes to bootmisc wrt /etc/nologin, leave out the
+    /etc/nologin.boot stuff (which never worked anyway), /etc/nologin
+    is now always cleaned out on boot.
+    (closes: #198444, #184402, #199943, #199401)
+  * Block signals in syslog(), since syslog() is not re-entrant
+    (James Olin Oden <joden@malachi.lee.k12.nc.us>, redhat bug #97534)
+  * Remove rc.boot manpage completely instead of installing it first
+    and then removing it in sysv-rc's postinst
+  * When unmounting all filesystems, do not unmount /proc, /dev and /sys
+    (closes: #198970, #184594, #173878, #200147, #198793)
+  * Umount network filesystems lazily (-l) (closes: #164503)
+  * Clarify initscript manpage (closes: #174058)
+  * Use /proc as reference to see if files in /var/lock and /var/run
+    are stale (closes: #198792). I should look at #120545 to
+    actually fix this right, I guess.
+  * Include bootlogd (closes: #151880, #15447, #132662)
+  * Move update-rc.d for initscripts to the initscrips packages' postinst
+    instead of doing it in the postinst of sysv-rc
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon, 21 Jul 2003 12:48:11 +0200
+
+sysvinit (2.85-4) unstable; urgency=medium
+
+  * Move default.rcS to /usr/share/initscripts, fix postinst (closes: #190921)
+  * Only clean /tmp if it is mode 777 (really in -3) (closes: #139870)
+  * Move initscripts and sysv-rc to binary-indep target (closes: #190801)
+  * Save fsck exit code in variable (closes: #189917,#194827,#197483)
+  * If /etc/motd is a symlink, follow it when
+    editting /etc/motd (closes: #150355)
+  * If /etc/nologin is a symlink, remove the destination file after
+    bootup instead of the link itself (closes: 191041)
+  * Don't remove /etc/mtab~ if /etc/mtab is a symbolic link
+  * Only start 'update' when running kernels < 2.4
+  * Mount /proc before mounting other filesystems, umount all proc
+    filesystems at shutdown except /proc (closes: #140591,#197317)
+  * Add 'set -e' to postinst (closes: #148465)
+  * Don't umount devfs at shutdown time (closes: #156490)
+  * When cleaning /tmp, first remove old files then remove old
+    empty directories (closes: #193623)
+  * Don't remove /tmp/...security* (closes: #195760)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed, 18 Jun 2003 16:08:09 +0200
+
+sysvinit (2.85-3) unstable; urgency=high
+
+  * Move sample inittab files to /usr/share/sysvinit (closes: #189761)
+  * Make sysv-rc point update-rc.d and invoke-rc.d to the dummy
+    /usr/share/sysvinit/update-rc.d script in the postrm script, so
+    that dpkg remains happy when installing file-rc or another package
+    to replace sysv-rc.
+  * Minor adjustements so that sysvinit compiles on the Hurd (closes: #43575)
+  * For now set Architecture: all on sysv-rc and initscripts
+    (closes: #190179, #190182)
+  * Add upstream source to copyright file (closes: #15183)
+  * Remove /etc/rc.boot from sysv-rc (closes: #113821)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed, 23 Apr 2003 15:26:21 +0200
+
+sysvinit (2.85-2) unstable; urgency=high
+
+  * sysv-rc must not Depend: on sysvinit, otherwise sysvinit/sysv-rc
+    is not installable.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 22 Apr 2003 12:40:54 +0200
+
+sysvinit (2.85-1) unstable; urgency=low
+
+  * Support for IPv6 in 'last'.
+  * Fix -i/-d options in last (closes: #171134)
+  * /dev/.devfsd: check only for existance, not for type (closes: #170852)
+  * Don't remove pump.sock from /var/run/utmp (closes: 167572)
+  * Get rid of /etc/ioctl.save, it's a legacy thing from Unices with
+    a serial console and no way to set reset the linespeed at boot.
+    With Linux we have console=tty0,speed as bootparameter anyway.
+  * Remove support for file-based runlevel signalling. All systems
+    use /dev/initctl by now (I hope, but we'll see).
+  * When cleaning /tmp, check atime and mtime as well (closes: #179006)
+    and do not remove aquota.user and aquota.group (closes: #175874)
+  * Only clean up /tmp at boot if it is world-writable.
+  * If fsck of the rootfs returns 2 or 3, reboot (closes: #170442,#167300)
+  * Sulogin: even if the root password is empty, ask for a password-
+    otherwise there is no way to set a timeout (closes: #180246)
+  * Split up sysvinit into sysvinit, sysv-rc and initscripts.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri, 18 Apr 2003 21:26:53 +0200
+
+sysvinit (2.84-3) unstable; urgency=low
+
+  * Upload into unstable of 2.84-3 so 2.84-2woody1 can go into
+    woody-proposed-updates tomorrow or so.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 28 May 2002 11:44:26 +0200
+
+sysvinit (2.84-2woody1) woody-proposed-updates; urgency=high
+
+  * On some systems, /proc didn't get mounted because there is junk
+    under the /proc mountpoint, makeing the system unuseable. Fixed
+    by an extra check. Also warns the user. (closes: #134316)
+  * Fix typos in README.runlevels (closes: #94745)
+  * Update /etc/init.d/skeleton to comply with policy (closes: #96711,#121947)
+  * On some systems "init" might show up as "ini" in "ps" output
+    due to a off-by-one error in maxproclen calculation (closes: #132870)
+  * Fix typo (SBM - SMB) in /etc/init.d/mountnfs.sh (closes: #139251)
+  * Fix typo in debian/rules that installed prerm as preinst, and
+    preinst not at all (closes: #148174)
+  * Up severity to "high" since any program with write access to
+    /var/run/utmp (group utmp) could trick the "shutdown" command into
+    corrupting random files (note that currently there are no known
+    exploits for setgroup-id-utmp programs).
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon, 27 May 2002 22:37:23 +0200
+
+sysvinit (2.84-2) unstable; urgency=low
+
+  * modernized inittab manpage.
+  * Don't shut down IDE drives on halt if RAID is active (closes: #127635)
+  * Add /etc/init.d/umountnfs.sh to conffiles (closes: #122190)
+  * Only mount /proc in checkroot.sh if it's not mounted yet. This
+    gives earlier scripts the possibility to mount /proc and just
+    leave it mounted.
+  * Set maxproclen correctly on re-exec. Make sure setproctitle() leaves
+    at least two zeroes at the end of the argv array.
+  * Don't put IDE drives into standby mode at halt time if RAID is still
+    active, since the RAID halt/reboot/poweroff codepath in the kernel
+    still needs to flush the RAID metadata to disk. (closes: #127635)
+  * Use 'dmesg -s 65536' when writing /var/log/dmesg (closes: #128568)
+  * Mount /proc only if not mounted yet, don't unmount (closes: #118977)
+  * Commented out kb line in sample inittab (closes: #130126)
+  * Update /etc/rcS.d/README (closes: #130225)
+  * Don't duplicate options when remounting rootfs (closes: #119381)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri, 25 Jan 2002 14:02:17 +0100
+
+sysvinit (2.84-1) unstable; urgency=high
+
+  * Don't use /etc/initlvl interface for telinit; only use /dev/initctl,
+    and give a clear error when that fails (closes: #116829)
+  * Add -i/--init command line flag to init - this tells init
+    'behave as system init even if you're not PID#1'. Useful for
+    testing in chroot/jail type environments.
+  * Use --print-installation-architecture in postinst instead of
+    --print-architecture.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 27 Nov 2001 13:08:45 +0100
+
+sysvinit (2.83-3) unstable; urgency=low
+
+  * Don't disable write caching on IDE disks before unmounting file
+    systems, since that flag is kept over reboot. Instead the
+    halt program now has an extra -h switch that makes it send all
+    IDE drives a "standby" command that as a side effect flushes
+    the write-cache. That flag is used in /etc/init.d/halt
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed,  7 Nov 2001 16:11:28 +0100
+
+sysvinit (2.83-2) unstable; urgency=high
+
+  * Only disable write caching on disks, not on all IDE devices
+    such as CDROMs (closes: #115354,#115822,#117390)
+  * Mount verbose, except for proc (closes: #115362,#111481)
+  * Add comments about not using tty7 to default inittab (closes: #117618)
+  * Install inittab.$(arch) as default inittab in the installation
+    process, if it exists. Add inittab.s390 (closes: #113495)
+  * Appears that the 'shutdown to fast' bug is closed by
+    turning off the IDE write cache at shutdown (closes: #110804).
+    Only thing is that this should probably get in the kernel
+    somehow, as it's really a kernel bug.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu,  1 Nov 2001 13:21:58 +0100
+
+sysvinit (2.83-1) unstable; urgency=high
+
+  * Upstream fix: race condiction in wait() [Andrea Arcangeli]
+  * shutdown.allow processing broke due to typo (closes: #111199)
+  * Call closelog() after openlog()/syslog() since recent libc's
+    keep the logging fd open and that is fd#0 aka stdin (closes: #111901)
+  * Typo in shutdown manpage fixed (closes: #112815)
+  * Don't remove .journal file during tmp cleanup (closes: #113564)
+  * Don't use '-v' flag to mount in mountall.sh (closes: 111481)
+  * Fix policy reference in README (closes: #97925)
+  * Treat 'ncpfs' as remote filesystem (closes: #94510)
+  * Don't do fsck -C if $TERM is unset or set to dumb|network|unknown.
+    Also don't do fsck -C if `uname -m` = s390
+  * Turn off write-caching on all IDE disks prior to unmounting
+    filesystems. On some systems that poweroff on halt the system
+    powers off before the IDE disk write cache is flushed. You do
+    need to have hdparm installed to get this to work.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri,  5 Oct 2001 14:37:42 +0200
+
+sysvinit (2.82-1) unstable; urgency=low
+
+  * New upstream version.
+  * Now prints out correct version at startup (closes: #109558,#108377)
+  * Versioned replaces (dpkg << 1.9.17) (closes: #109557)
+  * Mount all proc filesystems in fstab (closes: #108109)
+  * Fix spelling of initttab in init(8) (closes: #100659)
+  * Clarify "usage" message of update-rc.d (closes: #108391)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu, 23 Aug 2001 17:50:03 +0200
+
+sysvinit (2.81-1) unstable; urgency=low
+
+  * New upstream version.
+  * 'pidof' now finds processes that do weird stuff with their
+    name in 'ps' listings (i.e. use setproctitle()) (closes: #67021)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 31 Jul 2001 18:25:11 +0200
+
+sysvinit (2.80-3) unstable; urgency=high
+
+  * The diff that dpkg-source builds doesn't include empty directories
+    so we now create them in the debian/rules file.
+  * Make /etc/init.d/* executable (closes: #107018)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon, 30 Jul 2001 16:15:29 +0200
+
+sysvinit (2.80-2) unstable; urgency=high
+
+  * Use install -m 755 instead of copy for the pre/post install/remove
+    scripts (closes: #106730)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu, 26 Jul 2001 22:46:52 +0200
+
+sysvinit (2.80-1) unstable; urgency=medium
+
+  * New upstream version
+  * Don't prevent raid-rebuild from activating swap on 2.4 and up
+    (closes: #80446, #83118).
+  * Document IO redirection in wall manpage (closes: #79491)
+  * Use -x in skeleton file (closes: #67143)
+  * Update README (closes: #85650)
+  * Unmount tmpfs before turining off swap (closes: #84782)
+  * Fix check for passno in checkroot.sh (closes:  #84035)
+  * Make sure scripts exit with code 0 if succesful (closes: #83410)
+  * Don't try to set hostname if /etc/hostname is not present (closes: #81711)
+  * Mount /proc early and keep it mounted (closes: #75936, #71433, #88352)
+  * Fix init.8 manpage (closes:  #75268)
+  * Small fix to rc script (closes: #72859)
+  * Optimize /tmp cleaning (closes: #71176)
+  * Check for update before executing it in "single" script
+    (closes: #68983, #103144)
+  * Build package with SHELL=/bin/bash (closes: #68623)
+  * Fix typo in halt(8) manpage (closes:  #67875)
+  * Check time argument of shutdown(8) for correctness (closes: #67825)
+  * Don't chown ptys on devfs system (closes: #88300)
+  * Check for stale sessions in last(1) (Chris Wolf <cwolf@starclass.com>)
+  * Include invoke-rc.d (closes: #94140). Conflicts: file-rc (<= 0.5.7)
+  * Move random-seed to /var/lib/urandom (closes: #102216)
+  * Moved update-rc.d from dpkg to sysvinit
+  * Didn't include the UPS changes yet, that will come in a later
+    2.80-xyz version -- needed to get 2.80 out of the door first.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu, 26 Jul 2001 14:07:03 +0200
+
+sysvinit (2.78-4) frozen unstable; urgency=high
+
+  * In /etc/init.d/checkroot.sh, change 10>&0 into 9>&0, since
+    ash doesn't handle file descriptors > 9
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Sun, 25 Jun 2000 14:03:04 +0200
+
+sysvinit (2.78-3) frozen unstable; urgency=medium
+
+  * Fix critical bug #61227: Kernel panic/filesystem corruption if
+    swapping started while software RAID resyncing. As this doesn't
+    matter on 99% of the installs out there it's up to the release
+    manager to decide whether to put this in potato or not (closes: #61227).
+  * Fix up /etc/init.d/README paths (closes: #58935,#58595)
+  * Don't check root filesystem if "pass" in /etc/fstab is 0 (closes: #65125)
+  * Unmount remote filesystems before network is shut down
+    (closes: #60898,#61907). This also was a release-critical bug.
+  * Changed "file systems" to "filesystems".
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue,  6 Jun 2000 11:08:24 +0200
+
+sysvinit (2.78-2) frozen unstable; urgency=high
+
+  * Change "booting" to "reloading" message at reload
+  * Don't create /etc/init.d/network if missing (closes: #56373)
+  * Treat SMB filesystems like NFS ones in mountall.sh and
+    mountnfs.sh (fixes: #55414)
+  * bootmisc.sh: do not remove files in /var/run that are newer
+    than /etc/mtab. This should preserve pid files created before
+    this script ran (closes: #49816)
+  * Add "-z xxx" dummy command line argument (closes: #54717)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri, 11 Feb 2000 12:17:54 +0100
+
+sysvinit (2.78-1) unstable; urgency=low
+
+  * 2.78 will be the new upstream version, I'm skipping 2.77
+  * Update /etc/init.d/rc (closes: #48764)
+  * Add -C argument to fck (closes: #47914, #53335)
+  * don't remove files in /var/run and /var/lock that are newer
+    than /etc/mtab (may fix the dhcpcd problems)
+  * Save kernel messages in /var/log/dmesg like RedHat does (closes: #47574)
+  * Shutdown now calls sync before switching the runlevel to 0 or 6,
+    or before unmounting filesystems if -n was used (closes: #46461)
+  * Call umount with -f option to force NFS umounts (closes: #45715)
+  * Fix TMPTIME documentation in rcS(5) (closes: #42570, #53224)
+  * Some cosmetic changes to init.c (closes: #32079)
+  * Move to /usr/share to comply with latest policy
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu, 30 Dec 1999 20:40:23 +0100
+
+sysvinit (2.77-3) unstable; urgency=low
+
+  * Remove hwclock.sh initialization and script itself (closes: #45164)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue,  5 Oct 1999 21:52:02 +0200
+
+sysvinit (2.77-2) unstable; urgency=low
+
+  * Recompile against glibc 2.1 instead of 2.0
+  * Fix compilation problems with glibc 2.1
+  * Fix last -i option
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue,  5 Oct 1999 21:51:50 +0200
+
+sysvinit (2.77-1) unstable; urgency=low
+
+  * Write reboot record into utmp file as well to make rms happy
+  * Change GMT to UTC in /etc/default/rcS
+  * Change /var/run/utmp to mode 664 group utmp if utmp group exists
+  * Fork and dump core in / if SIGSEGV is received for debugging purposes
+  * Patch by Craig Sanders <cas@vicnet.net.au> for "last" -i option
+  * Fixes:
+    #35429: sysvinit: bad comments in /etc/defaults/rcS
+    #37807: mountnfs.sh should start rpc.statd if available
+    #38384: sysvinit: Slight gramitical error in /etc/init.d/README
+    #41660: [Patch] bootmisc.sh: Change /var/run/utmp ownership to [...]
+    #41458: mountnfs.sh: should ignore noauto
+    #40923: sysvinit: /etc/ioctl.save a state file?
+    #42183: util-linux: hwclock.sh depends on UTC which is not defined
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed,  4 Aug 1999 11:16:23 +0200
+
+sysvinit (2.76-4) unstable; urgency=low
+
+  * Change dowall.c to handle Unix98 ptys correctly
+  * Add comment in rcS about usage of setup.sh and unconfigured.sh
+  * Shutdown now removes nologin file just before calling telinit
+  * SEGV handler now tries to continue after sleep of 30 seconds.
+    On a 386-class processor it also prints out the value of EIP.
+  * Fix for racecondition in check_init_fifo() by Richard Gooch
+  * Fixes:
+    #32698: sysvinit: checkroot.sh: should add devfs entry to mtab
+    #35689: wall/shutdown cannot handle Unix98 PTYs
+    #30392: sysvinit scripts are not executable
+    #32699: bootmisc.sh: should check for existence of /dev/tty[p-za-e][0-9a-f]
+    #34062: mountnfs.sh: ignore comments in fstab [patch]
+    #34780: sysvinit: ignores most options for rootfs
+    #35017: sysvinit: nologin after sungle user mode [sic]
+    #36209: init: segmentation violation (possibly kernel)
+    #36294: sysvinit: sulogin does not appear to recognize shadow passwords
+    #36705: README in init.d has section number off by 0.1
+    #36849: sysvinit: shutdown doesn't send shutdown message to unix98 ptys
+    #36856: sysvinit: /etc/init.d/rc calls bash for no reason
+    #37265: sysvinit: devpts incompatibility?
+    #32698: sysvinit: checkroot.sh: should add devfs entry to mtab
+    #33954: sysvinit: [wishlist] bootmisc.sh: touch /var/run/utmpx
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Sat,  8 May 1999 17:22:57 +0200
+
+sysvinit (2.76-3) frozen unstable; urgency=high
+
+  * Small bugfix to last.c courtesy of Danek Duvall <duvall@emufarm.ml.org>
+  * Recompile with latest libs, so dependency on libc6 (>= 2.0.7u) is gone.
+  * Fixes bugs:
+    #31601: sysvinit: Doesn't wipe new files from /tmp
+    #28132: checkroot.sh parsing of /etc/fstab is incorrect.
+    #29729: sysvinit: references wrong policy homepage
+    #27949: last: should use down instead of crash
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 12 Jan 1999 12:12:44 +0100
+
+sysvinit (2.76-2) frozen unstable; urgency=high
+
+  * Minor fix in debian/rules for dependency problem on the Alpha.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu,  5 Nov 1998 10:54:28 +0100
+
+sysvinit (2.76-1) frozen unstable; urgency=high
+
+  * Fix bug in check_pipe() which crashes init on the Alpha.
+  * Re-upload since this should go into frozen too, ofcourse.
+  * Changed the version number to 2.76, even though it's a minor
+    upgrade. I want to release this version outside Debian too.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue,  3 Nov 1998 11:09:13 +0100
+
+sysvinit (2.75-4) unstable; urgency=low
+
+  * Change sulogin password buffer to 128 characters.
+  * Don't print control characters in dowall.c
+  * Try to open getenv ("CONSOLE"), /dev/console and /dev/tty0 in order.
+    For backwards compatibility when you try to boot a 2.0.x kernel
+    with a linux > 2.1.70 /dev/console device.
+  * Change src/Makefile for non-debian systems (mainly, RedHat)
+  * Try to create /dev/initctl if not present; check every time to see
+    if the dev/ino of /dev/initctl has changed and re-open it. This should
+    help devfs a bit.
+  * Send SIGUSR1 to init at bootup to let it re-open /dev/initctl;
+    again in support of devfs.
+  * Rewrite of mountnfs.sh by Chris Ulrich <cdulrich@ucdavis.edu>
+  * Moved pidof to /bin (it's only a link to killall5 anyway)
+  * Fixes bugs:
+    #11895: pidof exists, is unreliable, and is not deprecated
+    #23943: `"$FSCKFIX" = yes' needed in "checkroot.sh", too
+    #24190: sysvinit: postinst and telinit u
+    #25531: sysvinit: README refers to the fatman website
+    #26115: sysvinit: There is no support for a read only root
+    #26179: sysvinit: pidof in /sbin ? why ?
+    #26281: sysvinit: Obsolete location for Policy Manual in /etc/init.d/README
+    #15739: libc6: strange interferention between sleep() and fork()
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon,  5 Oct 1998 14:03:14 +0200
+
+sysvinit (2.75-3) frozen unstable; urgency=high
+
+  * Source /etc/default/rcS in all scripts, otherwise file-rc is broken.
+  * Do not call update-rc.d for isapnp
+  * Fixes:
+    #23556: sysvinit tries to install isapnp
+    #23270: sysvinit: /etc/default/rcS: comment should indicate time units
+    #23191: /etc/default/rcS
+    #23651: sysvinit: sysvinit fails to clean stale X locks in /tmp
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon, 22 Jun 1998 14:48:53 +0200
+
+sysvinit (2.75-2) frozen unstable; urgency=medium
+
+  * Fix last.c again.
+  * Add check to see if /dev/initctl is really a FIFO
+  * In ifdown.c first down all shaper devices then the real devices
+  * Fixes bugs:
+    #22840: sysvinit (2.75-1): patch request for sparc
+    #22965: rcS is not sh independent
+    #22945: Problems with last ( bug in sysvinit package)?
+    #23005: sysvinit: [patch] install initreq.h for `genpowerd' patch.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue,  2 Jun 1998 22:43:01 +0200
+
+sysvinit (2.75-1) frozen unstable; urgency=low
+
+  * Rewrote last.c to be much more memory friendly and correct,
+    thanks to Nick Andrew <nick@zeta.org.au> and
+    David Parrish <dparrish@zeta.org.au>
+  * Fixes bugs:
+    #21616: sysvinit: sulogin thinks md5 root password is bad
+    #21765: sysvinit: Typo in `killall5.c'
+    #21775: sysvinit: sysvinit does not support MD5 hashed passwords
+    #21990: /usr/bin/last: unnecessary memset and off-by-one bug
+    #22023: sysvinit: nfs isn't mounted
+    #22084: sysvinit 2.74-4: SIGPWR missing on sparc
+    #21900: init, powerfail events, and shutdown.allow
+    #21702: init 0 does not work as expected...
+    #21728: sysvinit: Typo in `init.c'
+    #22363: sysvinit: discrepance btw. manpage and /sbin/init
+    #22579: power-off on halt
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 19 May 1998 11:02:29 +0200
+
+sysvinit (2.74-4) frozen unstable; urgency=medium
+
+  * Add -o option to last to process libc5 utmp files.
+  * Buffer overflow fixed in init.c (not very serious; only exploitable
+    by root). Thanks to Chris Evans <chris@ferret.lmh.ox.ac.uk>
+  * Fixes:
+    #20147: filesystems not unmounted on reboot
+    #20702: sysvinit: example inittab is broken
+    #20957: errors mounting remote filesystems
+    #20063: fsck is _always_ called with -y option
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed, 15 Apr 1998 17:04:33 +0200
+
+sysvinit (2.74-3) frozen unstable; urgency=high
+
+  * Install hwclock.sh (was missing!)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu, 19 Mar 1998 20:15:06 +0100
+
+sysvinit (2.74-2) frozen unstable; urgency=high
+
+  * Fix problem with removing kbd startup file
+  * Fixes bugs;
+    #19711: sysvinit: postinst uses /tmp/*.$$
+    #14785: sysvinit: non executable scripts from examples
+    #17004: suggestion for raidtools
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon, 16 Mar 1998 12:56:10 +0100
+
+sysvinit (2.74-1) unstable; urgency=low
+
+  * Should compile with glibc 1.99 :)
+  * Now confirms to policy manual 2.4.0.0
+  * Change behaviour of reboot(1) and halt(1) so that the default when
+    the runlevel can't be determined is to call shutdown.
+  * Updated README and skeleton
+  * Depends on new dpkg for the new update-rc.d
+  * Added re-exec patch from Al Viro (21 Feb 1998):
+        'U' flag added to telinit. It forces init to re-exec itself
+        (passing its state through exec, certainly).
+        May be useful for smoother (heh) upgrades.
+        24 Feb 1998, AV:
+        did_boot made global and added to state - thanks, Miquel.
+        Yet another file descriptors leak - close state pipe if
+        re_exec fails.
+  * Now no longer contains mdutils.sh and conflicts with older mdutils
+  * /etc/rc.S/*.sh scripts that use set -e or exit no longer stop
+    the whole boot process.
+  * Fixes:
+    #16082: sysvinit: filesystems do not get unmounted properly on shutdown
+    #16977: sysvinit: libc6 twice into Pre-Depends
+    #17012: sysvinit: minor typo in install
+    #17084: /etc/rcS does not use a start arg
+    #17276: sysvinit: SIGUSR1 causes init to eat CPU
+    #18541: sysvinit: ^C aborts entire rcS script
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu, 12 Mar 1998 17:42:46 +0100
+
+sysvinit (2.73-2) unstable; urgency=low
+
+  * Change _NSIG to NSIG for 2.1.x kernel includes.
+  * Hopefully fixes bug 16082, but we'll see..
+  * Fixes bugs:
+     #16622 sysvinit: should not depend on kbd
+     #16807: /etc/init.d/mdutils.sh is started at bootup _and_ halt/reboot.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Thu,  8 Jan 1998 16:01:02 +0100
+
+sysvinit (2.73-1) unstable; urgency=low
+
+  * Use siginterrupt, now that system calls are restarted by default.
+    Main symptom was that the sulogin timeout didn't work but there
+    might have been more hidden problems.
+  * Kill process immidiately if turned off in inittab
+  * Fixed sulogin check on tty arg.
+  * Use strerror() instead of sys_errlist
+  * Chop up the reboot and halt scripts into seperate scripts. I had to
+    take some liberties so they are called with the argument "stop" even
+    though the scripts are Sxx scripts .. (start scripts in runlevel 0&6
+    seem non-intuitive anyway)
+  * wall now supports a '-n' option to suppress [most of] the banner.
+    Debian doesn't use sysvinit's wall, but apparently Redhat does.
+  * Add '-F' (forcefsck) option to shutdown
+  * Depends on kbd_0.95-2 (or higher) package for /etc/rcS.d stuff.
+  * Close and reopen /dev/initctl on SIGUSR1 (mainly for a /dev in ram)
+  * Add FSCKFIX option to /etc/default/rcS
+  * Wrote rcS.5 manpage describing /etc/default/rcS
+  * Fixes bugs:
+    #13435: Could shutdown provide a way to force fsck?
+    #14108: sysvinit: sulogin's timeout does not work anymore
+    #14179: sysvinit: /etc/init.d/(halt|reboot) need to call mdstop
+    #14357: sysvinit: typo errors into script shells
+    #15010: shutdown is too fast
+    #15405: sysvinit: changelog uncompressed
+    #15751: "sulogin -t <timeout>" does not time out
+    #15758: Outdated reference in README
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Sat,  3 Jan 1998 16:32:39 +0100
+
+sysvinit (2.72-3) unstable; urgency=low
+
+  * Remove perl check from preinst
+  * Add extra fork() in dowall.c to avoid hanging in rare cases
+  * Conflict with file-rc (<= 0.4.1)
+  * The 2.72 series fix the following bugs:
+     #9819: sysvinit: Typo in `pidof` manual
+     #9820: sysvinit: Incorrect filenames in `shutdown` manual
+     #9821: sysvinit: `init` manual gives incorrect information
+     #9822: sysvinit: `inittab` manual
+     #10045: sysvinit: error message "no more processes..."
+     #10276: sysvinit has uncompressed manpages.
+     #11728: libc6
+     #11879: sysvinit: file in /tmp security hole
+     #12172: Sysvinit: Contains powerd manpage but not powerd
+     #12465: Trivial typos in killall5 man page
+     #12631: sysvinit: unchecked prompting in postinst
+     #13290: clock is now hwclock
+     #13300: patch to init.d/boot for compressed keymaps
+     #13344: sysvinit: command 'clock' not found
+     #13789: sysvinit: /etc/init.d/boot calls "clock", should call "hwclock"
+     #13830: sysvinit: Upgrading to new sysvinit left system unusable
+     #13838: sysvinit: gratuitous use of perl
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed, 22 Oct 1997 14:44:00 +0200
+
+sysvinit (2.72-2) unstable; urgency=high
+
+  * Don't use perl in postinst. Use more flexible regexp to match the
+    sysinit line.
+  * Remove /etc/default/boot from package
+  * Fix settime.sh for hwclock
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 14 Oct 1997 12:40:23 +0200
+
+sysvinit (2.72) unstable; urgency=low
+
+  * Applied manual page patches by Bill Hawes <whawes@star.net>.  Thanks Bill!
+  * Applied patches to the sample Slackware scripts by
+    "Jonathan I. Kamens" <jik@kamens.brookline.ma.us>
+  * Fix halt and reboot runlevels 0 & 6 check.
+  * Only say "no more processes left in runlevel x" once
+  * Fix race condition with SIGCHLD in spawn()
+    (thanks to Alon Ziv <alonz@CS.Technion.AC.IL>)
+  * Compress all manpages (missed 2)
+  * Compiled for libc6
+  * Split up /etc/init.d/boot into seperate files in /etc/rcS.d
+  * Remove powerd.8 from debian package
+  * Fix /etc/init.d/settime.sh to look for hwclock first
+  * Added poweroff patch by Roderich Schupp <rsch@ExperTeam.de>
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Sun, 12 Oct 1997 17:20:17 +0200
+
+sysvinit (2.71-2) frozen unstable; urgency=low
+
+  * Print 2.71 instead of 2.70 on startup :)
+  * Fix /etc/init.d/skeleton for new console messages standard.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Mon, 5 May 1997 12:45:25 +0200
+
+sysvinit (2.71-1) frozen unstable; urgency=high
+
+  * Added code for updwtmp() in utmp.c for glibc (2.0.3)
+  * Fixed all programs to use functions from utmp.c and getutent()
+  * Do not try to clean up utmp in init itself (Bug#9022)
+  * Removed sync() from main loop.
+  * Fix bug #8739 (/fastboot)
+  * Hopefully fixes bug #8657 (shutdown signal handling)
+  * Mount /proc before modules are loaded
+  * Check on both /etc/init.d/modules and modutils (Bug#9058, #8398)
+  * Fix PATH order (Bug#8087)
+  * Fix console messages (Bug#8899)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Sat, 26 Apr 1997 19:57:27 +0200
+
+sysvinit (2.70-1) unstable; urgency=low
+
+  * small fix for postinst (Bug#5866)
+  * Respawn fix
+  * Removed StUdLy CaPs from source code
+  * Moved files in source archive around
+  * Moved mdadd in "boot" script to get called after module loading
+  * Fixes for glibc (utmp handling, signal handling).
+  * Fixed '-d' option to last (now also works without '-a').
+  * Added extra checking in last.c to prevent showing dead entries
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri, 7 Feb 1997 15:31:30 +0100
+
+sysvinit (2.69-1) frozen unstable; urgency=medium
+
+  * Fixed bug that can throw X in a loop (or any other app that reads from
+    /dev/tty0)
+  * Moved inittab to /usr/doc/sysvinit/examples so that it is no longer
+    a config file.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Sun, 1 Dec 1996 15:32:24 +0100
+
+sysvinit (2.68-1) frozen unstable; urgency=high
+
+  * Added dummy fsck.nfs [temporary] (Bug#5492)
+  * Changing /etc/motd optional (Bug#5493)
+  * Typo in /etc/init.d/urandom fixed (Bug#5556)
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Wed, 27 Nov 1996 17:30:36 +0100
+
+sysvinit (2.67-1) frozen unstable; urgency=high
+
+  * Fixes problem with /dev/console being controlling terminal of some
+    daemons
+  * Some fixes in debian bootup script "boot"
+  * Puts copyright file in the right place
+  * Move random-seed stuff to its own file
+  * Fix skeleton file (add set -e)
+  * Change preinst/postinst scripts to save all variables from "boot" file
+  * moved /etc/init.d/network to /usr/doc/examples/sysvinit
+  * Changed "rc" script slightly (potential recipy for disaster..)
+  * Various other fixes to close all outstanding bug reports.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Fri, 15 Nov 1996 12:23:33 +0100
+
+sysvinit (2.66-1) unstable; urgency=medium
+
+  * Skipped 2.65. A development 2.65 got out by accident and is apparently
+    being used..
+  * New source format
+  * Also compiles and runs with GNU libc (and on the Alpha)
+  * Fixed dowall.c not to exit when getpwuid() fails and uid == 0.
+  * Fixed init panic'ing on empty lines in /etc/inittab
+  * Changed default PATH to include /usr/local/sbin
+  * Set /dev/console as controlling terminal for sysinit,bootwait,wait,powerwait
+    This allows using ^C to interrupt some parts of eg the boot process.
+  * Remove old symlink in /var/log/initlvl; let init check both
+    /var/log and /etc itself.
+
+ -- Miquel van Smoorenburg <miquels@cistron.nl>  Tue, 29 Oct 1996 13:46:54 +0100
diff -Naur sysvinit-2.86/debian/control sysvinit-2.86-robox-linux/debian/control
--- sysvinit-2.86/debian/control	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/control	2010-06-14 14:07:20.649484647 +0200
@@ -0,0 +1,39 @@
+Source: sysvinit
+Section: base
+Priority: required
+Maintainer: Miquel van Smoorenburg <miquels@cistron.nl>
+Standards-Version: 3.5.2.0
+Build-Depends: bash
+
+Package: sysvinit
+Essential: yes
+Architecture: any
+Pre-Depends: ${shlibs:Depends}, initscripts, sysv-rc (>= 2.85-2) | file-rc (>> 0.7.0)
+Depends: coreutils
+Conflicts: last
+Replaces: last, bsdutils (<=2.0-2)
+Description: System-V like init
+ Init is the first program to run after your system is booted, and
+ continues to run as process number 1 until your system halts. Init's
+ job is to start other programs that are essential to the operation of
+ your system. All processes are descended from init. For more information,
+ see the manual page init(8).
+
+Package: sysv-rc
+Architecture: all
+Conflicts: file-rc
+Replaces: dpkg (<< 1.9.17), sysvinit (<< 2.85-1), file-rc (>> 0.7.0)
+Suggests: sysv-rc-conf
+Description: Standard boot mechanism using symlinks in /etc/rc?.d
+ This package provides support for the System-V like system of booting,
+ shutting down and changing runlevels configured through symbolic
+ links in the /etc/rc?.d directories.
+
+Package: initscripts
+Architecture: any
+Depends: ${shlibs:Depends}, ${glibc:Depends}, dpkg (>= 1.9.0), ${mount:Depends}, util-linux (>= 2.9t-2), e2fsprogs (>= 1.19-1), coreutils (>= 5.0.91-2)
+Replaces: sysvinit (<< 2.85-12), libc6, libc6.1, libc0.1, libc0.3
+Conflicts: kbd (<< 0.95-2), mdutils (<< 0.35-9)
+Description: Standard scripts needed for booting and shutting down
+ These scripts are meant for standard Debian/GNU/Linux installations.
+
diff -Naur sysvinit-2.86/debian/deps-glibc sysvinit-2.86-robox-linux/debian/deps-glibc
--- sysvinit-2.86/debian/deps-glibc	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/deps-glibc	2010-06-14 14:07:20.649484647 +0200
@@ -0,0 +1,31 @@
+#
+# deps-glibc	Figure out on which glibc version we need to depend.
+#
+
+DEB_BUILD_GNU_TYPE=`dpkg-architecture -qDEB_BUILD_GNU_TYPE`
+DEB_BUILD_GNU_SYSTEM=`dpkg-architecture -qDEB_BUILD_GNU_SYSTEM`
+DEB_BUILD_GNU_CPU=`dpkg-architecture -qDEB_BUILD_GNU_CPU`
+
+case "$DEB_BUILD_GNU_SYSTEM" in
+
+    linux)
+	case "$DEB_BUILD_GNU_CPU" in
+		ia64|alpha)
+			echo 'glibc:Depends=libc6.1 (>= 2.3.2.ds1-12)'
+			;;
+		*)
+			echo 'glibc:Depends=libc6 (>= 2.3.2.ds1-12)'
+			;;
+	esac
+	;;
+#    This would be the correct dependency, but it is dropped at
+#    the request of the *bsd* maintainers (see Bug #253314)
+#    *bsd*)
+#	echo 'glibc:Depends=libc0.1 (>= 2.3.2.ds1-12)'
+#	;;
+    gnu)
+	echo 'glibc:Depends=libc0.3 (>= 2.3.2.ds1-12)'
+	;;
+esac
+
+
diff -Naur sysvinit-2.86/debian/deps-mount sysvinit-2.86-robox-linux/debian/deps-mount
--- sysvinit-2.86/debian/deps-mount	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/deps-mount	2010-06-14 14:07:20.649484647 +0200
@@ -0,0 +1,13 @@
+#
+# deps-mount	Output a dependency on the package that contains
+#		the "mount" command we need.
+#
+
+DEB_BUILD_GNU_TYPE=`dpkg-architecture -qDEB_BUILD_GNU_TYPE`
+
+case "$DEB_BUILD_GNU_TYPE" in
+	*-linux)
+		echo 'mount:Depends=mount (>= 2.11l-1)'
+		;;
+esac
+
diff -Naur sysvinit-2.86/debian/initscripts/conffiles sysvinit-2.86-robox-linux/debian/initscripts/conffiles
--- sysvinit-2.86/debian/initscripts/conffiles	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/conffiles	2010-06-14 14:07:20.649484647 +0200
@@ -0,0 +1,21 @@
+/etc/init.d/bootclean.sh
+/etc/init.d/bootlogd
+/etc/init.d/bootmisc.sh
+/etc/init.d/checkfs.sh
+/etc/init.d/checkroot.sh
+/etc/init.d/halt
+/etc/init.d/hostname.sh
+/etc/init.d/mountall.sh
+/etc/init.d/mountnfs.sh
+/etc/init.d/mountvirtfs
+/etc/init.d/reboot
+/etc/init.d/rmnologin
+/etc/init.d/sendsigs
+/etc/init.d/single
+/etc/init.d/umountfs
+/etc/init.d/umountnfs.sh
+/etc/init.d/urandom
+/etc/default/bootlogd
+/etc/default/devpts
+/etc/default/halt
+/etc/default/tmpfs
diff -Naur sysvinit-2.86/debian/initscripts/copyright sysvinit-2.86-robox-linux/debian/initscripts/copyright
--- sysvinit-2.86/debian/initscripts/copyright	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/copyright	2010-06-14 14:07:20.649484647 +0200
@@ -0,0 +1,25 @@
+
+This package contains the scripts that are executed at start
+and shutdown of your Debian system.
+
+This package is built from the `sysvinit' source package.
+
+Copyright 1997-2003 Miquel van Smoorenburg <miquels@cistron.nl>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+ 
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+                                                                                
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+                                                                                
+On Debian GNU/Linux systems, the complete text of the GNU General
+Public License can be found in `/usr/share/common-licenses/GPL'.
+
diff -Naur sysvinit-2.86/debian/initscripts/etc/default/bootlogd sysvinit-2.86-robox-linux/debian/initscripts/etc/default/bootlogd
--- sysvinit-2.86/debian/initscripts/etc/default/bootlogd	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/default/bootlogd	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,2 @@
+# Run bootlogd at startup ?
+BOOTLOGD_ENABLE=No
diff -Naur sysvinit-2.86/debian/initscripts/etc/default/devpts sysvinit-2.86-robox-linux/debian/initscripts/etc/default/devpts
--- sysvinit-2.86/debian/initscripts/etc/default/devpts	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/default/devpts	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,5 @@
+# GID of the `tty' group
+TTYGRP=5
+
+# Set to 600 to have `mesg n' be the default
+TTYMODE=620
diff -Naur sysvinit-2.86/debian/initscripts/etc/default/halt sysvinit-2.86-robox-linux/debian/initscripts/etc/default/halt
--- sysvinit-2.86/debian/initscripts/etc/default/halt	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/default/halt	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,2 @@
+# Default behaviour of shutdown -h / halt. Set to "halt" or "poweroff".
+HALT=poweroff
diff -Naur sysvinit-2.86/debian/initscripts/etc/default/tmpfs sysvinit-2.86-robox-linux/debian/initscripts/etc/default/tmpfs
--- sysvinit-2.86/debian/initscripts/etc/default/tmpfs	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/default/tmpfs	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,3 @@
+# TMPFS_SIZE sets the max size that /dev/shm can use.  By default, the
+# kernel sets this upper limit to half of available memory.
+TMPFS_SIZE=
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/bootclean.sh sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/bootclean.sh
--- sysvinit-2.86/debian/initscripts/etc/init.d/bootclean.sh	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/bootclean.sh	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,125 @@
+#
+# bootclean.sh	Functions to clean /tmp, /var/run and /var/lock.
+#
+# Version:	@(#)bootclean.sh  2.86-2  27-Aug-2004  miquels@cistron.nl
+#
+
+cleantmp() {
+
+	[ -f /tmp/.clean ] && return
+
+	# Don't clean /tmp if TMPTIME < 0 or "infinite".
+	case "$TMPTIME" in
+		-*|infinite)
+			return
+			;;
+	esac
+
+	#
+	#	Wipe /tmp, but exclude system files.
+	#	Note that files _in_ lost+found _are_ deleted.
+	#
+	[ "$VERBOSE" != no ] && echo -n " /tmp"
+	#
+	#	If $TMPTIME is set to 0, we do not use any ctime expression
+	#	at all, so we can also delete files with timestamps
+	#	in the future!
+	#
+	if [ "$TMPTIME" = 0 ]
+	then
+		TEXPR=""
+		DEXPR=""
+	else
+		TEXPR="-mtime +$TMPTIME -ctime +$TMPTIME -atime +$TMPTIME"
+		DEXPR="-mtime +$TMPTIME -ctime +$TMPTIME"
+	fi
+
+	rm -f /tmp/.clean
+	set -o noclobber
+	:> /tmp/.clean
+	set +o noclobber
+
+	#
+	#	Only clean out /tmp if it is world-writable. This ensures
+	#	it really is a/the temp directory we're cleaning.
+	#
+	EXCEPT='! -name .
+		! ( -path ./lost+found -uid 0 )
+		! ( -path ./quota.user -uid 0 )
+		! ( -path ./aquota.user -uid 0 )
+		! ( -path ./quota.group -uid 0 )
+		! ( -path ./aquota.group -uid 0 )
+		! ( -path ./.journal -uid 0 )
+		! ( -path ./.clean -uid 0 )
+		! ( -path './...security*' -uid 0 )'
+
+	( if cd /tmp && [ "`find . -perm -002 -maxdepth 0`" = "." ]
+	  then
+		# First remove all old files.
+		find . -xdev $TEXPR $EXCEPT \
+				! -type d -depth -print0 | xargs -0r rm -f
+		# And then all empty directories.
+		find . -xdev $DEXPR $EXCEPT \
+				-type d -depth -empty -exec rmdir \{\} \;
+		rm -f .X*-lock
+	  fi
+	)
+}
+
+cleanlock() {
+	#
+	#	Clean up any stale locks.
+	#
+
+	[ -f /var/lock/.clean ] && return
+
+	[ "$VERBOSE" != no ] && echo -n " /var/lock"
+	( cd /var/lock && find . ! -type d -exec rm -f -- {} \; )
+	rm -f /var/lock/.clean
+	set -o noclobber
+	:> /var/lock/.clean
+	set +o noclobber
+}
+
+cleanrun() {
+	#
+	#	Clean up /var/run.
+	#
+
+	[ -f /var/run/.clean ] && return
+
+	[ "$VERBOSE" != no ] && echo -n " /var/run"
+	( cd /var/run && \
+		find . ! -type d ! -name utmp ! -name innd.pid \
+		-exec rm -f -- {} \; )
+	rm -f /var/run/.clean
+	set -o noclobber
+	:> /var/run/.clean
+	set +o noclobber
+}
+
+bootclean() {
+
+	# Only run if find and xargs are available.
+	if [ ! -x /bin/find ] && [ ! -x /usr/bin/find ]
+	then
+		return 0
+	fi
+	if [ ! -x /bin/xargs ] && [ ! -x /usr/bin/xargs ]
+	then
+		return 0
+	fi
+
+	if [ -f /tmp/.clean ] && [ -f /var/run/.clean ] &&
+	   [ -f /var/lock/.clean ]
+	then
+		return
+	fi
+
+	[ "$VERBOSE" != no ] && echo -n "Cleaning"
+	[ -d /tmp ] && cleantmp
+	[ -d /var/run ] && cleanrun
+	[ -d /var/lock ] && cleanlock
+	[ "$VERBOSE" != no ] && echo "."
+}
+
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/bootlogd sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/bootlogd
--- sysvinit-2.86/debian/initscripts/etc/init.d/bootlogd	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/bootlogd	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,85 @@
+#! /bin/sh
+#
+# bootlogd	One of the first scripts to be executed. Starts or stops
+#		the bootlogd log program. If this script is called as
+#		"stop-bootlogd", it will stop the daemon instead of
+#		starting it even when called with the "start" argument.
+#
+# Version:	@(#)bootlogd  2.85-12  21-Mar-2004  miquels@cistron.nl
+#
+
+PATH=/sbin:/bin:/usr/sbin:/usr/bin
+DAEMON=/sbin/bootlogd
+NAME=bootlogd
+DESC="Bootlog daemon"
+
+test -f $DAEMON || exit 0
+
+[ -r /etc/default/bootlogd ] && . /etc/default/bootlogd
+
+## set -e # not needed
+
+case "$BOOTLOGD_ENABLE" in
+	[Nn]*)
+		exit 0
+		;;
+esac
+
+STOPPER=
+ACTION="$1"
+case "$0" in
+	*stop-bootlog*)
+		STOPPER=Y
+		if [ "$ACTION" = start ]
+		then
+			ACTION=stop
+		fi
+		;;
+esac
+
+case "$ACTION" in
+	start)
+		echo -n "Starting $DESC: "
+		if [ -d /proc/1/. ]
+		then
+			umask 027
+			start-stop-daemon --start --quiet \
+				--exec $DAEMON -- -r
+		else
+			$DAEMON -r
+		fi
+		echo "$NAME."
+		;;
+	stop)
+		echo -n "Stopping $DESC: "
+		start-stop-daemon --stop --quiet --exec $DAEMON
+
+		if [ "$STOPPER" ] && [ -f /var/log/boot ] && \
+		   [ -f /var/log/boot~ ]
+		then
+			cd /var/log
+			chgrp adm boot
+			savelog -p -c 5 boot > /dev/null 2>&1
+			mv boot.0 boot
+			mv boot~ boot.0
+		fi
+
+		echo "$NAME."
+		;;
+	 restart|force-reload)
+		echo -n "Restarting $DESC: "
+		start-stop-daemon --stop --quiet --exec $DAEMON
+		sleep 1
+		start-stop-daemon --start --quiet --exec $DAEMON
+		echo "$NAME."
+		;;
+	*)
+		N=${0##*/}
+		N=${N#[SK]??}
+		echo "Usage: $N {start|stop|restart|force-reload}" >&2
+		exit 1
+		;;
+esac
+
+exit 0
+
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/bootmisc.sh sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/bootmisc.sh
--- sysvinit-2.86/debian/initscripts/etc/init.d/bootmisc.sh	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/bootmisc.sh	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,76 @@
+#
+# bootmisc.sh	Miscellaneous things to be done during bootup.
+#
+# Version:	@(#)bootmisc.sh  2.85-17  04-Jun-2004  miquels@cistron.nl
+#
+
+DELAYLOGIN=yes
+VERBOSE=yes
+EDITMOTD=yes
+[ -f /etc/default/rcS ] && . /etc/default/rcS
+
+#
+#	Put a nologin file in /etc to prevent people from logging in
+#	before system startup is complete.
+#
+if [ "$DELAYLOGIN" = yes ]
+then
+	echo "System bootup in progress - please wait" > /etc/nologin
+fi
+
+#
+#	Create /var/run/utmp so we can login.
+#
+: > /var/run/utmp
+if grep -q ^utmp: /etc/group
+then
+	chmod 664 /var/run/utmp
+	chgrp utmp /var/run/utmp
+fi
+
+#
+#	Set pseudo-terminal access permissions.
+#
+if [ ! -e /dev/.devfsd ] && [ -c /dev/ttyp0 ]
+then
+	chmod -f 666 /dev/tty[p-za-e][0-9a-f]
+	chown -f root:tty /dev/tty[p-za-e][0-9a-f]
+fi
+
+#
+#	Update /etc/motd. If it's a symbolic link, do the actual work
+#	in the directory the link points to.
+#
+if [ "$EDITMOTD" != no ]
+then
+	MOTD="`readlink -f /etc/motd || :`"
+	if [ "$MOTD" != "" ]
+	then
+		uname -a > $MOTD.tmp
+		sed 1d $MOTD >> $MOTD.tmp
+		mv $MOTD.tmp $MOTD
+	fi
+fi
+
+#
+#	Save kernel messages in /var/log/dmesg
+#
+if [ -x /bin/dmesg ] || [ -x /sbin/dmesg ]
+then
+	dmesg -s 524288 > /var/log/dmesg
+elif [ -c /dev/klog ]
+then
+	dd if=/dev/klog of=/var/log/dmesg &
+	dmesg_pid=$!
+	sleep 1
+	kill $dmesg_pid
+fi
+
+
+#
+#	Remove ".clean" files.
+#
+rm -f /tmp/.clean /var/run/.clean /var/lock/.clean
+
+: exit 0
+
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/checkfs.sh sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/checkfs.sh
--- sysvinit-2.86/debian/initscripts/etc/init.d/checkfs.sh	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/checkfs.sh	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,47 @@
+#
+# checkfs.sh	Check all filesystems.
+#
+# Version:	@(#)checkfs  2.85-13  22-Mar-2004  miquels@cistron.nl
+#
+
+FSCKFIX=no
+[ -f /etc/default/rcS ] && . /etc/default/rcS
+
+#
+# Check the rest of the file systems.
+#
+if [ ! -f /fastboot ]
+then
+    if [ -f /forcefsck ]
+    then
+        force="-f"
+    else
+        force=""
+    fi
+    if [ "$FSCKFIX"  = yes ]
+    then
+	fix="-y"
+    else
+	fix="-a"
+    fi
+    spinner="-C"
+    case "$TERM" in
+	dumb|network|unknown|"") spinner="" ;;
+    esac
+    [ `uname -m` = s390 ] && spinner="" # This should go away
+    echo "Checking all file systems..."
+    fsck $spinner -R -A $fix $force
+    if [ $? -gt 1 ]
+    then
+      echo
+      echo "fsck failed.  Please repair manually."
+      echo
+      echo "CONTROL-D will exit from this shell and continue system startup."
+      echo
+      # Start a single user shell on the console
+      /sbin/sulogin $CONSOLE
+    fi
+fi
+rm -f /fastboot /forcefsck
+
+: exit 0
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/checkroot.sh sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/checkroot.sh
--- sysvinit-2.86/debian/initscripts/etc/init.d/checkroot.sh	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/checkroot.sh	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,336 @@
+#
+# checkroot.sh	Check to root file system.
+#
+# Version:	@(#)checkroot.sh  2.85-23  29-Jul-2004  miquels@cistron.nl
+#
+
+SULOGIN=no
+VERBOSE=yes
+[ -f /etc/default/rcS ] && . /etc/default/rcS
+
+PATH=/lib/init:/bin:/sbin
+
+#
+#	Helper: is a directory writable ?
+#
+dir_writable () {
+	if [ -d "$1/" ] && [ -w "$1/" ] && touch -a "$1/" 2>/dev/null
+	then
+		return 0
+	fi
+	return 1
+}
+
+#
+#	Set SULOGIN in /etc/default/rcS to yes if you want a sulogin to
+#	be spawned from this script *before anything else* with a timeout,
+#	like sysv does.
+#
+[ "$SULOGIN" = yes ] && sulogin -t 30 $CONSOLE
+
+KERNEL=`uname -s`
+RELEASE=`uname -r`
+MACHINE=`uname -m`
+
+#
+#	Ensure that bdflush (update) is running before any major I/O is
+#	performed (the following fsck is a good example of such activity :).
+#	Only needed for kernels < 2.4.
+#
+if [ -x /sbin/update ] && [ "$KERNEL" = Linux ]
+then
+	case "$RELEASE" in
+		0.*|1.*|2.[0123].*)
+			update
+		;;
+	esac
+fi
+
+#
+#	Read /etc/fstab.
+#
+exec 9>&0 </etc/fstab
+fstabroot=/dev/root
+rootdev=none
+roottype=none
+rootopts=defaults
+rootmode=rw
+rootcheck=no
+swap_on_md=no
+devfs=
+while read dev mnt type opts dump pass junk
+do
+	case "$dev" in
+		""|\#*)
+			continue;
+			;;
+		/dev/md*)
+			# Swap on md device.
+			[ "$type" = swap ] && swap_on_md=yes
+			;;
+		/dev/*)
+			;;
+ 		LABEL=*|UUID=*)
+ 			[ -x /sbin/findfs ] && dev="`/sbin/findfs \"$dev\"`"
+			;;
+		*)
+			# Devfs definition ?
+			if [ "$type" = "devfs" ] && [ "$mnt" = /dev ] &&
+			   mountpoint -q /dev
+			then
+				devfs="-t $type $dev $mnt"
+			fi
+
+			# Might be a swapfile.
+			[ "$type" = swap ] && swap_on_md=yes
+			;;
+	esac
+	[ "$mnt" != / ] && continue
+	rootdev="$dev"
+	fstabroot="$dev"
+	rootopts="$opts"
+	roottype="$type"
+	( [ "$pass" != 0 ] && [ "$pass" != "" ]   ) && rootcheck=yes
+	( [ "$type" = nfs ] || [ "$type" = nfs4 ] ) && rootcheck=no
+	case "$opts" in
+		ro|ro,*|*,ro|*,ro,*)
+			rootmode=ro
+			;;
+	esac
+done
+exec 0>&9 9>&-
+
+#
+#	Activate the swap device(s) in /etc/fstab. This needs to be done
+#	before fsck, since fsck can be quite memory-hungry.
+#
+doswap=no
+case "${KERNEL}:${RELEASE}" in
+	Linux:2.[0123].*)
+		if [ $swap_on_md = yes ] && grep -qs resync /proc/mdstat
+		then
+			[ "$VERBOSE" != no ] &&
+			  echo "Not activating swap - RAID array resyncing"
+		else
+			doswap=yes
+		fi
+		;;
+	*)
+		doswap=yes
+		;;
+esac
+if [ "$doswap" = yes ]
+then
+	[ "$VERBOSE" != no ] && echo "Activating swap."
+	swapon -a 2> /dev/null
+fi
+
+#
+#	Does the root device in /etc/fstab match with the actual device ?
+#	If not we try to use the /dev/root alias device, and if that
+#	fails we create a temporary node in /dev/shm.
+#
+if [ "$rootcheck" = yes ]
+then
+	ddev=`mountpoint -qx $rootdev`
+	rdev=`mountpoint -d /`
+	if [ "$ddev" != "$rdev" ] && [ "$ddev" != "4:0" ]
+	then
+		if [ "`mountpoint -qx /dev/root`" = "4:0" ]
+		then
+			rootdev=/dev/root
+		elif dir_writable /dev/shm
+		then
+			rm -f /dev/shm/root
+			mknod -m 600 /dev/shm/root b ${rdev%:*} ${rdev#*:}
+			rootdev=/dev/shm/root
+		else
+			rootfatal=yes
+		fi
+	fi
+fi
+
+#
+#	Bother, said Pooh.
+#
+if [ "$rootfatal" = yes ]
+then
+	echo
+	echo "The device node $rootdev for the root filesystem is missing,"
+	echo "incorrect, or there is no entry for the root filesystem"
+	echo "listed in /etc/fstab."
+	echo
+	echo "The system is also unable to create a temporary node in"
+	echo "/dev/shm to use as a work-around."
+	echo
+	echo "This means you have to fix this manually."
+	echo
+	echo "CONTROL-D will exit from this shell and REBOOT the system."
+	echo
+	# Start a single user shell on the console
+	/sbin/sulogin $CONSOLE
+	reboot -f
+fi
+
+#
+#	See if we want to check the root file system.
+#
+FSCKCODE=0
+if [ -f /fastboot ] || [ $rootcheck = no ]
+then
+	[ $rootcheck = yes ] && echo "Fast boot, no file system check"
+	rootcheck=no
+fi
+
+if [ "$rootcheck" = yes ]
+then
+	#
+	# Ensure that root is quiescent and read-only before fsck'ing.
+	#
+	# mount -n -o remount,ro / would be the correct syntax but
+	# mount can get confused when there is a "bind" mount defined
+	# in fstab that bind-mounts "/" somewhere else.
+	#
+	# So we use mount -n -o remount,ro $rootdev / but that can
+	# fail on older kernels on sparc64/alpha architectures due
+	# to a bug in sys_mount().
+	#
+	# As a compromise we try both.
+	#
+	if ! mount -n -o remount,ro $rootdev / 2>/dev/null &&
+	   ! mount -n -o remount,ro /
+	then
+    		echo -n "*** ERROR!  Cannot fsck root fs because it is "
+		echo    "not mounted read-only!"
+		echo
+		rootcheck=no
+	fi
+fi
+
+#
+#	The actual checking is done here.
+#
+if [ "$rootcheck" = yes ]
+then
+	if [ -f /forcefsck ]
+	then
+		force="-f"
+	else
+		force=""
+	fi
+
+	if [ "$FSCKFIX" = yes ]
+	then
+		fix="-y"
+	else
+		fix="-a"
+	fi
+
+	spinner="-C"
+	case "$TERM" in
+		dumb|network|unknown|"")
+			spinner="" ;;
+	esac
+	# This Linux/s390 special case should go away.
+	if [ "${KERNEL}:${MACHINE}" = Linux:s390 ]
+	then
+		spinner=""
+	fi
+
+	echo "Checking root file system..."
+	fsck $spinner $force $fix -t $roottype $rootdev
+	FSCKCODE=$?
+fi
+
+#
+#	If there was a failure, drop into single-user mode.
+#
+#	NOTE: "failure" is defined as exiting with a return code of
+#	4 or larger.  A return code of 1 indicates that file system
+#	errors were corrected but that the boot may proceed. A return
+#	code of 2 or 3 indicates that the system should immediately reboot.
+#
+if [ $FSCKCODE -gt 3 ]
+then
+	# Surprise! Re-directing from a HERE document (as in
+	# "cat << EOF") won't work, because the root is read-only.
+	echo
+	echo "fsck failed.  Please repair manually and reboot.  Please note"
+	echo "that the root file system is currently mounted read-only.  To"
+	echo "remount it read-write:"
+	echo
+	echo "   # mount -n -o remount,rw /"
+	echo
+	echo "CONTROL-D will exit from this shell and REBOOT the system."
+	echo
+	# Start a single user shell on the console
+	/sbin/sulogin $CONSOLE
+	reboot -f
+elif [ $FSCKCODE -gt 1 ]
+then
+	echo
+	echo "fsck corrected errors on the root partition, but requested that"
+	echo "the system be rebooted (exit code $FSCKCODE)."
+	echo
+	echo "Automatic reboot in 5 seconds."
+	echo
+	sleep 5
+	reboot -f
+fi
+
+#
+#	Remount root to final mode (rw or ro).
+#
+#	See the comments above at the previous "mount -o remount"
+#	for an explanation why we try this twice.
+#
+if ! mount -n -o remount,$rootopts,$rootmode $fstabroot / 2>/dev/null
+then
+	mount -n -o remount,$rootopts,$rootmode /
+fi
+
+#
+#	We only create/modify /etc/mtab if the location where it is
+#	stored is writable.  If /etc/mtab is a symlink into /proc/
+#	then it is not writable.
+#
+init_mtab=no
+MTAB_PATH="`readlink -f /etc/mtab || :`"
+case "$MTAB_PATH" in
+	/proc/*)
+		;;
+	/*)
+		if dir_writable ${MTAB_PATH%/*}
+		then
+			:> $MTAB_PATH
+			rm -f ${MTAB_PATH}~
+			init_mtab=yes
+		fi
+		;;
+	"")
+		[ -L /etc/mtab ] && MTAB_PATH="`readlink /etc/mtab`"
+		if [ "$MTAB_PATH" ] ; then
+			echo "checkroot.sh: cannot initialize $MTAB_PATH" >&2
+		else
+			echo "checkroot.sh: cannot initialize the mtab file" >&2
+		fi
+		;;
+esac
+
+if [ "$init_mtab"  = yes ]
+then
+	[ "$roottype" != none ] &&
+		mount -f -o $rootopts -t $roottype $fstabroot /
+	[ -n "$devfs" ] && mount -f $devfs
+	. /etc/init.d/mountvirtfs
+fi
+
+#
+#	Remove /etc/nologin, and /dev/shm/root if we created it.
+#
+NOLOGIN="`readlink -f /etc/nologin || :`"
+rm -f "$NOLOGIN"
+rm -f /dev/shm/root
+
+: exit 0
+
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/halt sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/halt
--- sysvinit-2.86/debian/initscripts/etc/init.d/halt	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/halt	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,50 @@
+#! /bin/sh
+#
+# halt		Execute the halt command.
+#
+# Version:      @(#)halt  2.85-22  19-Jun-2004  miquels@cistron.nl
+#
+
+PATH=/sbin:/bin:/usr/sbin:/usr/bin
+
+# Get the default from /etc/default/halt.
+[ -f /etc/default/halt ] && . /etc/default/halt
+
+if [ "$INIT_HALT" = "" ]
+then
+	case "$HALT" in
+		[Pp]*)
+			INIT_HALT=POWEROFF
+			;;
+		[Hh]*)
+			INIT_HALT=HALT
+			;;
+		*)
+			INIT_HALT=POWEROFF
+			;;
+	esac
+fi
+
+# See if we need to cut the power.
+if [ "$INIT_HALT" = "POWEROFF" ] && [ -x /etc/init.d/ups-monitor ]
+then
+	/etc/init.d/ups-monitor poweroff
+fi
+
+# Don't shut down drives if we're using RAID.
+hddown="-h"
+if grep -qs '^md.*active' /proc/mdstat
+then
+	hddown=""
+fi
+
+# If INIT_HALT=HALT don't poweroff.
+poweroff="-p"
+if [ "$INIT_HALT" = "HALT" ]
+then
+	poweroff=""
+fi
+
+halt -d -f -i $poweroff $hddown
+
+: exit 0
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/hostname.sh sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/hostname.sh
--- sysvinit-2.86/debian/initscripts/etc/init.d/hostname.sh	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/hostname.sh	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,11 @@
+#
+# hostname.sh	Set hostname.
+#
+# Version:	@(#)hostname.sh  1.10  26-Feb-2001  miquels@cistron.nl
+#
+
+if [ -f /etc/hostname ]
+then
+	hostname --file /etc/hostname
+fi
+
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/mountall.sh sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/mountall.sh
--- sysvinit-2.86/debian/initscripts/etc/init.d/mountall.sh	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/mountall.sh	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,62 @@
+#
+# mountall.sh	Mount all filesystems.
+#
+# Version:	@(#)mountall.sh  2.85-23  29-Jul-2004  miquels@cistron.nl
+#
+
+VERBOSE=yes
+TMPTIME=0
+[ -f /etc/default/rcS ] && . /etc/default/rcS
+. /etc/init.d/bootclean.sh
+
+#
+# Mount local file systems in /etc/fstab.
+#
+[ "$VERBOSE" != no ] && echo "Mounting local filesystems..."
+mount -av -t nonfs,nonfs4,nosmbfs,nocifs,noncp,noncpfs,nocoda 2>&1 |
+	egrep -v '(already|nothing was) mounted'
+
+case `uname -s` in
+	*FreeBSD)
+		INITCTL=/etc/.initctl
+		;;
+	*)
+		INITCTL=/dev/initctl
+		;;
+esac
+
+#
+# We might have mounted something over /dev, see if /dev/initctl is there.
+#
+if [ ! -p $INITCTL ]
+then
+	rm -f $INITCTL
+	mknod -m 600 $INITCTL p
+fi
+kill -USR1 1
+
+#
+# Execute swapon command again, in case we want to swap to
+# a file on a now mounted filesystem.
+#
+doswap=yes
+case "`uname -sr`" in
+	Linux\ 2.[0123].*)
+		if grep -qs resync /proc/mdstat
+		then
+			doswap=no
+		fi
+		;;
+esac
+if [ $doswap = yes ]
+then
+	swapon -a 2> /dev/null
+fi
+
+#
+#	Clean /tmp, /var/lock, /var/run
+#
+bootclean mountall
+
+: exit 0
+
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/mountnfs.sh sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/mountnfs.sh
--- sysvinit-2.86/debian/initscripts/etc/init.d/mountnfs.sh	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/mountnfs.sh	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,97 @@
+#
+# mountnfs.sh	Now that TCP/IP is configured, mount the NFS file
+#		systems in /etc/fstab if needed. If possible,
+#		start the portmapper before mounting (this is needed for
+#		Linux 2.1.x and up).
+#
+#		Also mounts SMB filesystems now, so the name of
+#		this script is getting increasingly inaccurate.
+#
+# Version:	@(#)mountnfs.sh  2.86-5  10-Sep-2004  miquels@cistron.nl
+#
+
+VERBOSE=yes
+TMPTIME=0
+[ -f /etc/default/rcS ] && . /etc/default/rcS
+. /etc/init.d/bootclean.sh
+
+#
+#	Run in a subshell because of I/O redirection.
+#
+test -f /etc/fstab && (
+
+#
+#	Read through fstab line by line. If it is NFS, set the flag
+#	for mounting NFS file systems. If any NFS partition is found and it
+#	not mounted with the nolock option, we start the portmapper.
+#
+portmap=no
+while read device mountpt fstype options
+do
+	case "$device" in
+		""|\#*)
+			continue
+			;;
+	esac
+
+	case "$options" in
+		*noauto*)
+			continue
+			;;
+	esac
+
+	case "$fstype" in
+		nfs|nfs4)
+			case "$options" in
+				*nolock*)
+					;;
+				*)
+					portmap=yes
+					;;
+			esac
+			;;
+		smbfs|cifs|coda|ncp|ncpfs)
+			;;
+		*)
+			fstype=
+			;;
+	esac
+	if [ -n "$fstype" ]
+	then
+		case "$NETFS" in
+			$fstype|*,$fstype|$fstype,*|*,$fstype,*)
+				;;
+			*)
+				NETFS="$NETFS${NETFS:+,}$fstype"
+				;;
+		esac
+	fi
+done
+
+exec 0>&1
+
+if [ "$portmap" = yes ]
+then
+	if [ -x /sbin/portmap ]
+	then
+		echo -n "Starting portmapper..."
+		start-stop-daemon --start --quiet --exec /sbin/portmap
+		sleep 2
+	fi
+fi
+
+if [ -n "$NETFS" ]
+then
+	echo "Mounting remote filesystems..."
+	mount -a -t$NETFS
+fi
+
+) < /etc/fstab
+
+#
+#       Clean /tmp, /var/lock, /var/run
+#
+bootclean mountnfs
+
+: exit 0
+
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/mountvirtfs sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/mountvirtfs
--- sysvinit-2.86/debian/initscripts/etc/init.d/mountvirtfs	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/mountvirtfs	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,229 @@
+#! /bin/sh
+#
+# mountvirtfs	Mount all the virtual filesystems the kernel
+#		provides and that are required by default.
+#
+#		This script can be called several times without
+#		damage; it tries to mount the virtual filesystems
+#		only if not mounted yet, and only updates /etc/mtab
+#		if it is writable and there is a need to.
+#
+#		This functionality was previously provided by
+#		mountkernfs from the glibc package.
+#
+# Version:	@(#)mountvirtfs  2.85-23  29-Jul-2004  miquels
+#
+
+# Script needs to be robust and continue when parts fail,
+# so we're not setting the "-e" flag.
+#set -e
+
+PATH=/lib/init:/bin:/sbin
+
+TTYGRP=5
+TTYMODE=620
+if [ -f /etc/default/devpts ]
+then
+	. /etc/default/devpts
+fi
+
+TMPFS_SIZE=
+if [ -f /etc/default/tmpfs ]
+then
+	. /etc/default/tmpfs
+fi
+
+KERNEL=`uname -s`
+umask 022
+
+dir_writable () {
+	if [ -d "$1/" ] && [ -w "$1/" ] && touch -a "$1/" 2>/dev/null
+	then
+		return 0
+	fi
+	return 1
+}
+
+domount () {
+
+	# Directory present ?
+	if [ ! -d $3 ]
+	then
+		return
+	fi
+
+	# Do we support this filesystem type ?
+	TYPE=
+	if [ $1 = proc ]
+	then
+		case "$KERNEL" in
+			Linux|GNU)
+				TYPE=proc
+				;;
+			*)
+				TYPE=procfs
+				;;
+		esac
+	elif grep -E -qs "$1\$" /proc/filesystems
+	then
+		TYPE=$1
+	elif grep -E -qs "$2\$" /proc/filesystems
+	then
+		TYPE=$2
+	fi
+	if [ "$TYPE" = "" ]
+	then
+		return
+	fi
+
+	#
+	#	Get the options from /etc/fstab.
+	#
+	OPTS=
+	if [ -f /etc/fstab ]
+	then
+		exec 9<&0 0</etc/fstab
+		while read FDEV FDIR FTYPE FOPTS REST
+		do
+			case "$FDEV" in
+				""|\#*)
+					continue
+					;;
+			esac
+			if [ "$3" != "$FDIR" ] || [ "$TYPE" != "$FTYPE" ]
+			then
+				continue
+			fi
+			case "$FOPTS" in
+				noauto|*,noauto|noauto,*|*,noauto,*)
+					return
+					;;
+				?*)
+					OPTS="-o$FOPTS"
+					;;
+			esac
+			break
+		done
+		exec 0<&9 9<&-
+	fi
+
+	# See if anything is mounted yet
+	if ! mountpoint -q $3
+	then
+		# No, do it now
+		mount $MOUNT_N -t $TYPE $OPTS $4 $TYPE $3
+	else
+		# Need to update mtab only ?
+		if [ -n "$DO_MTAB" ] &&
+		   ! grep -E -sq "^([^ ]+) +$3 +" /etc/mtab
+		then
+				mount -f -t $TYPE $OPTS $4 $TYPE $3
+		fi
+	fi
+}
+
+#
+#	We only create/modify /etc/mtab if the location where it is
+#	stored is writable.  If /etc/mtab is a symlink into /proc/
+#	then it is not writable.
+#
+DO_MTAB=
+MOUNT_N=-n
+MTAB_PATH="`readlink -f /etc/mtab || :`"
+case "$MTAB_PATH" in
+	/proc/*)
+		;;
+	/*)
+		if dir_writable ${MTAB_PATH%/*}
+		then
+			DO_MTAB=Yes
+			MOUNT_N=
+		fi
+		;;
+esac
+
+if [ -n "$DO_MTAB" ] && [ ! -f /etc/mtab ]
+then
+	:> /etc/mtab
+fi
+
+# Mount standard /proc and /sys.
+domount proc "" /proc
+domount sysfs "" /sys
+
+# Mount /dev/pts. Create master ptmx node if needed.
+#
+# As of 2.5.68, devpts is not automounted when using devfs. So we
+# mount devpts if it is compiled in (older devfs didn't require it
+# to be compiled in at all).
+#
+if [ "$KERNEL" = Linux ]
+then
+	#
+	#	Since kernel 2.5.something, devfs doesn't include
+	#	a standard /dev/pts directory anymore. So if devfs
+	#	is mounted on /dev we need to create that directory
+	#	manually.
+	#
+	if grep -qs '/dev devfs' /proc/mounts
+	then
+		if [ ! -d /dev/pts ]
+		then
+			mkdir /dev/pts
+		fi
+	fi
+	if [ -d /dev/pts ]
+	then
+		if dir_writable /dev && [ ! -c /dev/ptmx ]
+		then
+			mknod --mode=666 /dev/ptmx c 5 2
+		fi
+		domount devpts "" /dev/pts -ogid=$TTYGRP,mode=$TTYMODE
+	fi
+fi
+
+# Mount tmpfs.
+#
+# Around kernel version 2.3.3x, a memory based filesystem was
+# introduced to support POSIX shared memory, called shmfs. 
+# Later this filesystem was extended for general usage -
+# provided you set the CONFIG_TMPFS compile option and mount
+# it as type tmpfs.
+#
+# Early in the 2.4 kernel series, shmfs was renamed to tmpfs, but
+# you could mount it using both type shmfs and tmpfs. Starting
+# at kernel version 2.5.44, the shmfs alias was dropped.
+#
+# Confusingly, in kernels 2.3.x - 2.5.43 where both shmfs and
+# tmpfs are present, disabling CONFIG_TMPFS actually removes
+# support for shmfs, but tmpfs is still listed in /proc/filesystems
+# to support SYSV and POSIX shared memory, and it should still be
+# mounted under /dev/shm.
+#
+# Recommendation: always enable CONFIG_TMPFS and always mount
+# using the tmpfs type. Forget about shmfs.
+# 
+# Tmpfs can be used as memory filesystem, so you can limit tmpfs
+# max size using /etc/default/tmpfs to prevent tmpfs from using
+# up all system memory.
+#
+if [ -n "$TMPFS_SIZE" ]
+then
+	tmpfs_opt="-osize=${TMPFS_SIZE}"
+fi
+domount tmpfs shmfs /dev/shm $tmpfs_opt
+
+# Mount usbfs/usbdevfs if /proc/bus/usb is present.
+#
+# Usbfs/usbdevfs is used for USB related binaries/libraries.
+# "usbfs" and "usbdevfs" are the exact same filesystem.
+# "usbdevfs" was renamed to "usbfs" by linux usb developers,
+# because people sometimes mistook it as a part of devfs. Usbfs
+# will be superseded by other filesystems (e.g. sysfs), and when
+# it becomes obsolete the mount action below should be removed.
+#
+if [ -d /proc/bus/usb ]
+then
+	domount usbfs usbdevfs /proc/bus/usb
+fi
+
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/reboot sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/reboot
--- sysvinit-2.86/debian/initscripts/etc/init.d/reboot	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/reboot	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,11 @@
+#! /bin/sh
+#
+# reboot	Execute the reboot command.
+#
+# Version:      @(#)reboot  2.75  22-Jun-1998  miquels@cistron.nl
+#
+
+PATH=/sbin:/bin:/usr/sbin:/usr/bin
+
+echo -n "Rebooting... "
+reboot -d -f -i
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/rmnologin sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/rmnologin
--- sysvinit-2.86/debian/initscripts/etc/init.d/rmnologin	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/rmnologin	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,24 @@
+#! /bin/sh
+#
+# rmnologin	This script removes the /etc/nologin file as the last
+#		step in the boot process.
+#
+# Version:	@(#)rmnologin  2.85-13  22-Mar-2004  miquels@cistron.nl
+#
+
+DELAYLOGIN=yes
+[ -f /etc/default/rcS ] && . /etc/default/rcS
+
+PATH=/lib/init:/sbin:/bin
+
+case "$DELAYLOGIN" in
+	Y*|y*)
+		#
+		#	If /etc/nologin is a symbolic link,
+		#	remove the destination instead of the link.
+		#
+		rm -f "`readlink -f /etc/nologin || :`"
+		;;
+esac
+
+: exit 0
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/sendsigs sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/sendsigs
--- sysvinit-2.86/debian/initscripts/etc/init.d/sendsigs	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/sendsigs	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,19 @@
+#! /bin/sh
+#
+# sendsigs	Kill all remaining processes.
+#
+# Version:      @(#)sendsigs  2.85-8  05-Nov-2003  miquels@cistron.nl
+#
+
+PATH=/sbin:/bin:/usr/sbin:/usr/bin
+
+# Kill all processes.
+echo -n "Sending all processes the TERM signal..."
+killall5 -15
+echo "done."
+sleep 5
+echo -n "Sending all processes the KILL signal..."
+killall5 -9
+echo "done."
+
+: exit 0
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/single sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/single
--- sysvinit-2.86/debian/initscripts/etc/init.d/single	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/single	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,31 @@
+#! /bin/sh
+#
+# single	executed by init(8) upon entering runlevel 1 (single).
+#
+# Version:	@(#)single  2.85-18  04-Jun-2004  miquels@cistron.nl
+#
+
+PATH="/sbin:/bin:/usr/sbin:/usr/bin"
+
+# Kill all processes.
+echo -n "Sending all processes the TERM signal..."
+killall5 -15
+echo "done."
+sleep 5
+echo -n "Sending all processes the KILL signal..."
+killall5 -9
+echo "done."
+
+# We start update here, since we just killed it.
+if [ -x /sbin/update ] && [ `uname -s` = Linux ]
+then
+	case `uname -r` in
+		0.*|1.*|2.[0123].*)
+			update
+		;;
+	esac
+fi
+
+echo "Entering single-user mode..."
+exec init -t1 S
+
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/skeleton sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/skeleton
--- sysvinit-2.86/debian/initscripts/etc/init.d/skeleton	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/skeleton	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,101 @@
+#! /bin/sh
+#
+# skeleton	Example initscript
+#		This file should be used to construct scripts to be
+#		placed in /etc/init.d.
+#
+# Author:	Miquel van Smoorenburg <miquels@cistron.nl>.
+#		Ian Murdock <imurdock@gnu.ai.mit.edu>.
+#
+#		Please remove the "Author" lines above and replace them
+#		with your own name if you copy and modify this script.
+#
+# Version:	@(#)skeleton  2.85-23  28-Jul-2004  miquels@cistron.nl
+#
+
+set -e
+
+PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
+DESC="some daemon"
+NAME=daemon
+DAEMON=/usr/sbin/$NAME
+PIDFILE=/var/run/$NAME.pid
+SCRIPTNAME=/etc/init.d/$NAME
+
+# Gracefully exit if the package has been removed.
+test -x $DAEMON || exit 0
+
+# Read config file if it is present.
+#if [ -r /etc/default/$NAME ]
+#then
+#	. /etc/default/$NAME
+#fi
+
+#
+#	Function that starts the daemon/service.
+#
+d_start() {
+	start-stop-daemon --start --quiet --pidfile $PIDFILE \
+		--exec $DAEMON
+}
+
+#
+#	Function that stops the daemon/service.
+#
+d_stop() {
+	start-stop-daemon --stop --quiet --pidfile $PIDFILE \
+		--name $NAME
+}
+
+#
+#	Function that sends a SIGHUP to the daemon/service.
+#
+d_reload() {
+	start-stop-daemon --stop --quiet --pidfile $PIDFILE \
+		--name $NAME --signal 1
+}
+
+case "$1" in
+  start)
+	echo -n "Starting $DESC: $NAME"
+	d_start
+	echo "."
+	;;
+  stop)
+	echo -n "Stopping $DESC: $NAME"
+	d_stop
+	echo "."
+	;;
+  #reload)
+	#
+	#	If the daemon can reload its configuration without
+	#	restarting (for example, when it is sent a SIGHUP),
+	#	then implement that here.
+	#
+	#	If the daemon responds to changes in its config file
+	#	directly anyway, make this an "exit 0".
+	#
+	# echo -n "Reloading $DESC configuration..."
+	# d_reload
+	# echo "done."
+  #;;
+  restart|force-reload)
+	#
+	#	If the "reload" option is implemented, move the "force-reload"
+	#	option to the "reload" entry above. If not, "force-reload" is
+	#	just the same as "restart".
+	#
+	echo -n "Restarting $DESC: $NAME"
+	d_stop
+	sleep 1
+	d_start
+	echo "."
+	;;
+  *)
+	# echo "Usage: $SCRIPTNAME {start|stop|restart|reload|force-reload}" >&2
+	echo "Usage: $SCRIPTNAME {start|stop|restart|force-reload}" >&2
+	exit 1
+	;;
+esac
+
+exit 0
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/umountfs sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/umountfs
--- sysvinit-2.86/debian/initscripts/etc/init.d/umountfs	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/umountfs	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,25 @@
+#! /bin/sh
+#
+# umountfs	Turn off swap and unmount all local file systems.
+#
+# Version:      @(#)umountfs  2.85-16  03-Jun-2004  miquels@cistron.nl
+#
+
+PATH=/sbin:/bin:/usr/sbin:/usr/bin
+
+echo -n "Deactivating swap..."
+umount -ttmpfs -a -r
+swapoff -a
+echo "done."
+
+#
+#	Umount all filesystems except the virtual ones.
+#
+echo -n "Unmounting local filesystems..."
+umount -tnoproc,noprocfs,nodevfs,nosysfs,nousbfs,nousbdevfs,nodevpts -d -a -r
+echo "done."
+
+# This is superfluous.
+mount -n -o remount,ro /
+
+: exit 0
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/umountnfs.sh sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/umountnfs.sh
--- sysvinit-2.86/debian/initscripts/etc/init.d/umountnfs.sh	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/umountnfs.sh	2010-06-14 14:07:20.659519162 +0200
@@ -0,0 +1,68 @@
+#! /bin/sh
+#
+# umountnfs	Unmount all network filesystems except the root file system.
+#
+#		Also unmounts all virtual filesystems (proc, devfs,
+#		devpts, usbfs, sysfs) that are not mounted at the
+#		top-level.
+#
+# Version:      @(#)umountnfs  2.85-23  29-Jul-2004  miquels@cistron.nl
+#
+
+PATH=/sbin:/bin:/usr/sbin:/usr/bin
+
+KERNEL=`uname -s`
+RELEASE=`uname -r`
+
+case "${KERNEL}:${RELEASE}" in
+	Linux:[01].*|Linux:2.[01].*)
+		FLAGS=""
+		;;
+	Linux:2.[23].*|Linux:2.4.?|Linux:2.4.?-*|Linux:2.4.10|Linux:2.4.10-*)
+		FLAGS="-f"
+		;;
+	*)
+		FLAGS="-f -l"
+		;;
+esac
+
+# Write a reboot record to /var/log/wtmp before unmounting
+halt -w
+
+# Remove any .clean files in auto-clean dirs.
+rm -f /tmp/.clean /var/lock/.clean /var/run/.clean
+
+echo -n "Unmounting remote and non-toplevel virtual filesystems..."
+
+#
+#	Read mtab file and add the directories we want to
+#	unmount in reverse to a list.
+#
+(
+DIRS=""
+	while read DEV DIR TYPE REST
+	do
+		case "$DIR" in
+			/|/proc|/dev|/dev/pts|/proc/*|/sys)
+				continue
+				;;
+		esac
+		case "$TYPE" in
+			nfs|nfs4|smbfs|ncp|ncpfs|cifs|coda)
+				DIRS="$DIR $DIRS"
+				;;
+			proc|procfs|devfs|devpts|usbfs|usbdevfs|sysfs)
+				DIRS="$DIR $DIRS"
+				;;
+		esac
+	done
+	exec </dev/null
+	if [ -n "$DIRS" ]
+	then
+		umount $FLAGS $DIRS
+	fi
+) </etc/mtab
+
+echo "done."
+
+: exit 0
diff -Naur sysvinit-2.86/debian/initscripts/etc/init.d/urandom sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/urandom
--- sysvinit-2.86/debian/initscripts/etc/init.d/urandom	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/etc/init.d/urandom	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,57 @@
+#! /bin/sh
+#
+# urandom	This script saves the random seed between reboots.
+#		It is called from the boot, halt and reboot scripts.
+#
+# Version:	@(#)urandom  2.85-14  31-Mar-2004  miquels@cistron.nl
+#
+
+[ -c /dev/urandom ] || exit 0
+
+VERBOSE=yes
+[ -f /etc/default/rcS ] && . /etc/default/rcS
+
+POOLSIZE=512
+if [ -f /proc/sys/kernel/random/poolsize ]
+then
+	POOLSIZE="`cat /proc/sys/kernel/random/poolsize`"
+fi
+
+case "$1" in
+	start|"")
+		if [ "$VERBOSE" != no ]
+		then
+			echo -n "Initializing random number generator..."
+		fi
+		# Load and then save $POOLSIZE (512) bytes,
+		# which is the size of the entropy pool
+		if [ -f /var/lib/urandom/random-seed ]
+		then
+			cat /var/lib/urandom/random-seed >/dev/urandom
+		fi
+		rm -f /var/lib/urandom/random-seed
+		umask 077
+		dd if=/dev/urandom of=/var/lib/urandom/random-seed \
+			bs=$POOLSIZE count=1 >/dev/null 2>&1 \
+			|| echo "urandom start: failed."
+		umask 022
+		[ "$VERBOSE" != no ] && echo "done."
+		;;
+	stop)
+		# Carry a random seed from shut-down to start-up;
+		# see documentation in linux/drivers/char/random.c
+		[ "$VERBOSE" != no ] && echo -n "Saving random seed..."
+		umask 077
+		dd if=/dev/urandom of=/var/lib/urandom/random-seed \
+			bs=$POOLSIZE count=1 >/dev/null 2>&1 \
+			|| echo "urandom stop: failed."
+		[ "$VERBOSE" != no ] && echo "done."
+		;;
+	*)
+		echo "Usage: urandom {start|stop}" >&2
+		exit 1
+		;;
+esac
+
+exit 0
+
diff -Naur sysvinit-2.86/debian/initscripts/man/fsck.nfs.8 sysvinit-2.86-robox-linux/debian/initscripts/man/fsck.nfs.8
--- sysvinit-2.86/debian/initscripts/man/fsck.nfs.8	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/man/fsck.nfs.8	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,16 @@
+.TH FSCK.NFS 8 "May 2004" "Initscripts"
+.SH NAME
+fsck.nfs \- Dummy fsck.nfs script that always returns success.
+.SH SYNOPSIS
+.B fsck.nfs
+.SH DESCRIPTION
+Debian GNU/Linux need this for when the root file system is on NFS: there is
+no way to find out if root is NFS mounted and we really want to do a
+"fsck -a /".
+.SH EXIT CODE
+The exit code returned by
+.B mount.nfs
+is always zero, meaning successful completion.
+.SH SEE ALSO
+.BR fsck (8),
+.BR fstab (5).
diff -Naur sysvinit-2.86/debian/initscripts/postinst sysvinit-2.86-robox-linux/debian/initscripts/postinst
--- sysvinit-2.86/debian/initscripts/postinst	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/postinst	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,195 @@
+#! /bin/sh
+#
+# debian.postinst
+#
+# Version:	debian.postinst  2.85-20  07-Jun-2004  miquels@cistron.nl
+#
+
+set -e
+
+case "$1" in
+	configure)
+		oldver=$2
+		;;
+	abort-upgrade|abort-remove|abort-deconfigure)
+		exit 0
+		;;
+esac
+umask 022
+
+
+#
+#	Function like update-rc.d but simpler & faster.
+#	Usage: updatercd basename start|stop NN runlevel .
+#
+#	Heuristic: use the real update-rc.d if file-rc is detected,
+#	or if the /etc/rc2.d directory is not present.
+#
+updatercd() {
+
+	if [ ! -f /etc/init.d/$1 ]
+	then
+		return
+	fi
+
+	if [ -d /usr/share/file-rc/. ] || [ -d /usr/lib/file-rc/. ] ||
+	   [ ! -d /etc/rc2.d/. ]
+	then
+		update-rc.d "$@" > /dev/null
+		return $?
+	fi
+
+	base=$1
+	shift
+
+	tmp="`echo /etc/rc?.d/[SK]??$base`"
+	case "$tmp" in
+		"/etc/rc?.d/[SK]??$base")
+			;;
+		*)
+			return
+			;;
+	esac
+
+	while [ "$1" != "" ]
+	do
+		if [ "$1" = stop ]
+		then
+			tlet=K
+		else
+			tlet=S
+		fi
+		case "$2" in
+			?) lev=0$2 ;;
+			*) lev=$2 ;;
+		esac
+		shift 2
+		while [ "$1" != "." ]
+		do
+			cd /etc/rc$1.d
+			ln -s ../init.d/$base $tlet$lev$base
+			shift
+		done
+		shift
+	done
+}
+
+if [ ! -f /etc/default/rcS ]
+then
+	#
+	#	Install sample rcS file.
+	#
+	cp /usr/share/initscripts/default.rcS /etc/default/rcS
+else
+	#
+	#	Change GMT=-u to UTC=yes etc in existing rcS file.
+	#
+	if grep -q ^GMT /etc/default/rcS
+	then
+		cp /etc/default/rcS /etc/default/rcS.TMP
+		sed	-e "s/^GMT=.*\(-u\|--utc\).*/UTC=yes/" \
+			-e "s/^GMT=.*/UTC=no/" \
+			-e 's/# Set GMT="-u".*/# Set UTC to yes or no/' \
+			< /etc/default/rcS.TMP > /etc/default/rcS
+		if [ -s /etc/default/rcS ]
+		then
+			rm -f /etc/default/rcS.TMP
+		fi
+	fi
+fi
+
+#
+#	See if there were saved variables.
+#
+if [ -f /etc/default/rcS.sed ]
+then
+	cp /etc/default/rcS /etc/default/rcS.TMP
+	sed -f /etc/default/rcS.sed < /etc/default/rcS.TMP > /etc/default/rcS
+	if [ -s /etc/default/rcS ]
+	then
+		rm -f /etc/default/rcS.TMP
+	fi
+	rm -f /etc/default/rcS.sed
+fi
+
+#
+#	Defaults for 2.85-16 and up for mountvirtfs levels changed,
+#	so remove the existing startup links if we upgraded from
+#	an older version.
+#
+case "$oldver" in
+	2.85-1[0-5])
+		update-rc.d -f mountvirtfs remove >/dev/null 2>&1 ||:
+		;;
+esac
+
+#
+#	Okay, we could do this with update-rc.d, but that would probably
+#	be pretty slow. This way we win some speed.
+#	DO NOT FOLLOW THIS EXAMPLE IN OTHER PACKAGES.
+#
+updatercd mountvirtfs	start 2 S . start 36 S .
+updatercd bootlogd	start 5 S .
+updatercd checkroot.sh	start 10 S .
+updatercd modutils	start 20 S .
+updatercd checkfs.sh	start 30 S .
+updatercd mountall.sh	start 35 S .
+updatercd hostname.sh	start 40 S .
+updatercd network	start 40 S .
+updatercd mountnfs.sh	start 45 S .
+updatercd bootmisc.sh	start 55 S .
+updatercd urandom	start 55 S . start 30 0 6 .
+
+#
+#	Links in "normal" runlevels.
+#
+updatercd sendsigs	start 20 0 6 .
+updatercd umountnfs.sh	start 31 0 6 .
+updatercd umountfs	start 40 0 6 .
+updatercd halt		start 90 0 .
+updatercd reboot	start 90 6 .
+updatercd rmnologin	start 99 2 3 4 5 .
+updatercd single        start 20 1 .
+updatercd stop-bootlogd	start 99 2 3 4 5 .
+
+#
+#	Remove scripts that were left behind by older glibc (<< 2.3.2.ds1-12)
+#	versions. We have the same functionality in mountvirtfs.
+#
+for i in devpts.sh mountkernfs
+do
+	if [ -f /etc/init.d/$i ]
+	then
+		rm -f /etc/init.d/$i
+		update-rc.d $i remove >/dev/null 2>&1 ||:
+	fi
+done
+
+# Create /dev/pts, /dev/shm, /sys
+if [ `uname -s` = Linux ]
+then
+	#
+	#	Only create /dev/{pts,shm} if /dev is on the
+	#	root file system. If some package has mounted a
+	#	seperate /dev (ramfs from udev, devfs) it is
+	#	responsible for the presence of those subdirs.
+	#
+	if ! mountpoint -q /dev
+	then
+		if [ ! -d /dev/pts ]
+		then
+			mkdir /dev/pts
+		fi
+		if [ ! -d /dev/shm ]
+		then
+			mkdir /dev/shm
+		fi
+	fi
+	if [ ! -d /sys ]
+	then
+		mkdir /sys
+	fi
+fi
+
+exit 0
+
diff -Naur sysvinit-2.86/debian/initscripts/preinst sysvinit-2.86-robox-linux/debian/initscripts/preinst
--- sysvinit-2.86/debian/initscripts/preinst	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/preinst	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,57 @@
+#! /bin/sh
+#
+# debian.preinst
+#		Saves the GMT setting from /etc/init.d/boot.
+#		This should really be set from a seperate
+#		configfile, like /etc/sysconfig.
+#
+# Version:	debian.preinst  2.74  16-Mar-1998  miquels@cistron.nl
+#
+
+case "$1" in
+	install|upgrade)
+		;;
+	abort-upgrade)
+		exit 0
+		;;
+esac
+
+umask 022
+
+#
+#	If there's an /etc/init.d/boot file, extract the variables from
+#	it and rename it.
+#
+#	(Started in 2.72-1, Debian 2.0 unstable)
+#
+if [ -f /etc/init.d/boot ]
+then
+	echo "Saving variables from /etc/init.d/boot .."
+	[ ! -d /etc/default ] && mkdir /etc/default
+	rm -f /etc/default/rcS.sed
+	grep '^[A-Z]*=' /etc/init.d/boot | (
+		while read line
+		do
+			var=`echo $line | sed 's/=.*$//'`
+			echo "s!^$var=.*\$!$line!" >> /etc/default/rcS.sed
+		done
+	)
+	mv /etc/init.d/boot /etc/init.d/boot.OLD
+	cat <<EOF
+
+The file /etc/init.d/boot has been replaced with a collection of smaller files
+located in /etc/init.d and linked into /etc/rc.S. The customization variables
+are now located in the file /etc/default/rcS.
+
+EOF
+fi
+
+#cat <<EOF
+#
+#  The package manager might ask you if you want to install new versions
+#  of the /etc/init.d/whatever files. This is generally a good idea
+#  (so reply with \`\`y'') unless you really changed any of these files.
+#
+#EOF
+
+exit 0
diff -Naur sysvinit-2.86/debian/initscripts/rcS.5 sysvinit-2.86-robox-linux/debian/initscripts/rcS.5
--- sysvinit-2.86/debian/initscripts/rcS.5	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/rcS.5	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,64 @@
+.TH rcS 5 "03 Nov 2003" "" "Debian Administrator's Manual"
+.SH NAME
+rcS -- defaults used at boot time
+.SH DESCRIPTION
+.I /etc/default/rcS
+contains information in the following format:
+.IP "" .5i
+name=value
+.PP
+Only one value per line is allowed. Comments are allowed too and must start
+with the ``#'' character.
+
+.SH OPTIONS
+The following options can be set, the defaults values are shown:
+
+.IP \fBTMPTIME=0\fP
+On bootup the files in /tmp will be cleaned up if their modification time
+was more than TMPTIME days ago. A value of zero means that all files
+are removed regardless of age. If you don't want the system to clean
+/tmp set TMPTIME to a negative value (\fI-1\fP) or the word \fIinfinite\fP.
+
+.IP \fBSULOGIN=no\fB
+Setting this to
+.B yes
+causes init to spawn a sulogin on the console as one of the first things
+in the boot process. If the administrator does not login, the sulogin will
+timeout after 30 seconds and the boot process will continue.
+
+.IP \fBDELAYLOGIN=yes\fB
+Normally the system will not let anyone login until the boot process
+is complete and and the system has come up completely in the default runlevel
+(usually level 2). However theoretically it's possible to login a bit earlier,
+as soon as \fI/usr/sbin/inetd\fP is started. The default value of \fBno\fP
+prevents this, setting it to \fByes\fP allows it.
+
+.IP \fBUTC=\fP
+This is used to interpret the system (BIOS) clock. If this option is set
+to \fIno\fP the system clock is supposed to be set at local time. If this
+option is set to \fIyes\fP the system clock is supposed to be set at UTC
+(Universal Time, a.k.a. GMT).
+
+.IP \fBVERBOSE=yes\fP
+Setting this option to \fBno\fP will make the bootup a bit less verbose.
+
+.IP \fBEDITMOTD=yes\fP
+At boot time the system edits the first line of the file \fI/etc/motd\fP
+and replaces it with the output from the command \fIuname -a\fP. Setting
+this to \fBno\fP prohibits that.
+
+.IP \fBFSCKFIX=no\fP
+When the root and all other filesystems are checked, this happens with the
+\fB-a\fP flag which means \fIautorepair\fP. If there are really big
+inconsistencies, the fsck will bail out. The system will print a message
+asking the administrator to repair the filesystem maually and present a
+root shell prompt (actually a \fIsulogin\fP prompt) on the console. Setting
+this option to \fB\fP yes causes the fsck commands to be run with the
+\fB-y\fP option instead of the \fB-a\fP option. This will always repair
+the filesystems without any interaction but might irreversibly damage
+your file system(s).
+
+.SH AUTHOR
+Miquel van Smoorenburg <miquels@cistron.nl>
+.SH SEE ALSO
+init(8), inittab(5).
diff -Naur sysvinit-2.86/debian/initscripts/sbin/fsck.nfs sysvinit-2.86-robox-linux/debian/initscripts/sbin/fsck.nfs
--- sysvinit-2.86/debian/initscripts/sbin/fsck.nfs	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/sbin/fsck.nfs	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,25 @@
+#! /bin/sh
+#
+# fsck.nfs	Dummy fsck.nfs file that always returns success. We
+#		need this for when the root file system is on NFS:
+#		there is no way to find out if root is NFS mounted
+#		and we really want to do a "fsck -a /".
+#
+# Version:	@(#) fsck.nfs.sh  1.10  30-Nov-1996  miquels@cistron.nl
+#
+
+while :
+do
+	case "$1" in
+		-*)
+			shift
+			;;
+		*)
+			break
+			;;
+	esac
+done
+
+echo "$1: NFS file system."
+
+exit 0
diff -Naur sysvinit-2.86/debian/initscripts/share/default.rcS sysvinit-2.86-robox-linux/debian/initscripts/share/default.rcS
--- sysvinit-2.86/debian/initscripts/share/default.rcS	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/initscripts/share/default.rcS	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,19 @@
+#
+#	Defaults for the boot scripts in /etc/rcS.d
+#
+
+# Time files in /tmp are kept in days.
+TMPTIME=0
+# Set to yes if you want sulogin to be spawned on bootup
+SULOGIN=no
+# Set to no if you want to be able to login over telnet/rlogin
+# before system startup is complete (as soon as inetd is started)
+DELAYLOGIN=yes
+# Set UTC=yes if your system clock is set to UTC (GMT), and UTC=no if not.
+UTC=yes
+# Set VERBOSE to "no" if you would like a more quiet bootup.
+VERBOSE=yes
+# Set EDITMOTD to "no" if you don't want /etc/motd to be editted automatically
+EDITMOTD=yes
+# Set FSCKFIX to "yes" if you want to add "-y" to the fsck at startup.
+FSCKFIX=no
diff -Naur sysvinit-2.86/debian/postinst sysvinit-2.86-robox-linux/debian/postinst
--- sysvinit-2.86/debian/postinst	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/postinst	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,50 @@
+#! /bin/sh
+#
+# debian.postinst
+#
+# Version:	debian.postinst  2.85-14  31-Mar-2004  miquels@cistron.nl
+#
+
+set -e
+
+case "$1" in
+	configure)
+		oldver=$2
+		;;
+	abort-upgrade|abort-remove|abort-deconfigure)
+		exit 0
+		;;
+esac
+umask 022
+
+case `uname -s` in
+	*FreeBSD)
+		INITCTL=/etc/.initctl
+		;;
+	*)
+		INITCTL=/dev/initctl
+		;;
+esac
+
+#
+#	Check /dev/initctl
+#
+if [ ! -p $INITCTL ]
+then
+	echo "sysvinit: creating $INITCTL"
+	rm -f $INITCTL
+	mkfifo -m 600 $INITCTL
+fi
+rm -f /etc/ioctl.save
+
+if [ ! -f /etc/inittab ]
+then
+	cp -a /usr/share/sysvinit/inittab /etc/inittab
+fi
+
+#
+#	Tell init to re-exec itself.
+#
+init u ||:
+
+exit 0
diff -Naur sysvinit-2.86/debian/readlink.c sysvinit-2.86-robox-linux/debian/readlink.c
--- sysvinit-2.86/debian/readlink.c	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/readlink.c	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,463 @@
+/*
+ * readlink	Implementation of the readlink program that has a
+ *		proper canonicalize function.
+ *
+ *		The canonicalized path is printed if the entire path
+ *		exists, but _also_ if the last path element is missing
+ *		and the path up till there is a directory.
+ *		
+ *		If you specify -f or --canonicalize twice (aka
+ *		canonicalize-me-harder) then the "most canonical" path
+ *		is printed. Even if a part of it doesn't exist, though
+ *		the exit status will be non-zero in that case.
+ *
+ * realpath	If argv[0] is (^|/)realpath$, this program will behave
+ *		as the realpath utility (-s not implemented).
+ *		Note that 'readlink -ff' and 'realpath' are equivalent.
+ *
+ * Author:	Miquel van Smoorenburg.
+ *
+ * Version:	@(#)readlink  1.02  21-Mar-2004  miquels@cistron.nl
+ *
+ *		This file is part of the sysvinit suite,
+ *		Copyright 2004 Miquel van Smoorenburg.
+ *
+ *		This program is free software; you can redistribute it and/or
+ *		modify it under the terms of the GNU General Public License
+ *		as published by the Free Software Foundation; either version
+ *		2 of the License, or (at your option) any later version.
+ *
+ *		The realpath_sz() function in this file may also be
+ *		redistributed under the terms of the LGPL:
+ *
+ *		This library is free software; you can redistribute it and/or
+ *		modify it under the terms of the GNU Library General Public
+ *		License as published by the Free Software Foundation; either
+ *		version 2 of the License, or (at your option) any later version.
+ *
+ */
+
+#include <stdio.h>
+#include <unistd.h>
+#include <stdlib.h>
+#include <string.h>
+#include <malloc.h>
+#include <errno.h>
+#include <getopt.h>
+#include <limits.h>
+#include <sys/stat.h>
+#include <sys/param.h>
+
+struct option readlink_options[] = {
+  {  "canonicalize",	0, NULL, 'f' },
+  {  "no-newline",	0, NULL, 'n' },
+  {  "quiet",		0, NULL, 'q' },
+  {  "silent",		0, NULL, 's' },
+  {  "help",		0, NULL, 'h' },
+  {  "verbose",		0, NULL, 'v' },
+  {  "version",		0, NULL, 'V' },
+  {  NULL,		0, NULL, 0   },
+};
+
+struct option realpath_options [] = {
+  {  "no-newline",	0, NULL, 'n' },
+  {  "help",		0, NULL, 'h' },
+  {  "verbose",		0, NULL, 'v' },
+  {  "version",		0, NULL, 'V' },
+  {  NULL,		0, NULL, 0   },
+};
+
+static int system_path_max(char *name)
+{
+	int		path_max;
+#ifdef PATH_MAX
+	path_max = PATH_MAX;
+#else
+	if ((path_max = pathconf (name, _PC_PATH_MAX)) <= 0)
+		path_max = 1024;
+#endif
+	return path_max;
+}
+
+/*
+ *	Error. Try to build the path till here into resolved,
+ *	return -1 if that works, -2 if failed (that means that
+ *	the contents of "resolved" make no sense whatsoever).
+ */
+static int path_err(char *resolved, int reslen, char *restpath)
+{
+	if (strlen(resolved) + strlen(restpath) + 1 >= reslen) {
+		errno = ENAMETOOLONG;
+		return -2;
+	}
+	strcat(resolved, "/");
+	strcat(resolved, restpath);
+	return -1;
+}
+
+/*
+ *	Ye olde realpath() functionne.
+ *
+ *	It takes an extra size argument for the resolved argument.
+ *
+ *	Exit status:	 0 path resolved
+ *			-1 path not fully resolved (part not accessible)
+ *			   but canonicalized as far as possible.
+ *			-2 error, "resolved" is invalid.
+ *
+ *	If exit status < 0 errno is set.
+ */
+static int realpath_sz(char *path, char *resolved, int reslen)
+{
+	struct stat	st;
+	char		*p, *s;
+	char		*buf, *buf2;
+	int		c, n;
+	int		exists = 1;
+	int		link_max = _POSIX_LINK_MAX;
+	int		links = 0;
+	int		st_mode;
+
+	/*
+	 *	Some basic checks and allocations.
+	 */
+	if (strlen(path) + 2 >= reslen) {
+		errno = ENAMETOOLONG;
+		return -2;
+	}
+	if ((buf = alloca(reslen)) == NULL)
+		return -2;
+	if ((buf2 = alloca(reslen)) == NULL)
+		return -2;
+
+	/*
+	 *	Start with the current working directory
+	 *	if the path is relative.
+	 */
+	if (*path != '/') {
+		if (getcwd(resolved, reslen - 1) == NULL) {
+			if (errno == ERANGE)
+				errno = ENAMETOOLONG;
+			return -2;
+		}
+		strcpy(buf2, "/");
+		strcat(buf2, path);
+		path = buf2;
+	} else {
+		strcpy(resolved, "/");
+	}
+
+	st.st_mode = S_IFDIR;
+
+	while (1) {
+
+		/*
+		 *	Skip multiple preceding slashes.
+		 */
+		while (*path == '/' && path[1] == '/') path++;
+
+		/*
+		 *	At this point, "resolved" contains the path up
+		 *	till here without a trailing slash, and "path"
+		 *	contains the rest of the path starting with a /.
+		 *
+		 *	One exception: if path is empty, then resolved
+		 *	can contain a single trailing slash (happens if
+		 *	path was just "/" in the previous round)
+		 */
+		st_mode = st.st_mode;
+		st.st_mode = S_IFREG;
+		if (exists > 0 && lstat(resolved, &st) < 0) {
+			if (errno != ENOENT && errno != ENOTDIR &&
+			    errno != EACCES)
+				return path_err(resolved, reslen, path);
+			exists--;
+			if (errno != ENOENT) exists--;
+		}
+
+		/*
+		 *	Remove trailing slash if this is a directory.
+		 */
+		if ((s = strrchr(resolved, '/')) != NULL && s[1] == 0 &&
+		     s > resolved && S_ISDIR(st.st_mode))
+			*s = 0;
+
+		if (exists > 0 && S_ISLNK(st.st_mode)) {
+			/*
+			 *	It's a link. Prepend the rest of the
+			 *	remaining path with the contents of
+			 *	the link, remove the last element
+			 *	from resolved, and loop.
+			 */
+			if (++links > link_max) {
+				errno = ELOOP;
+				return path_err(resolved, reslen, path);
+			}
+
+			if ((n = readlink(resolved, buf, reslen - 1)) < 0)
+				return path_err(resolved, reslen, path);
+			buf[n] = 0;
+
+			if (buf[0] == '/')
+				p = resolved + 1;
+			else {
+				p = strrchr(resolved, '/');
+				if (p == resolved) p++;
+			}
+			c = *p;
+			*p = 0;
+			if (strlen(resolved) + strlen(buf) +
+			    strlen(path) + 3 >= reslen) {
+				*p = c;
+				return path_err(resolved, reslen, path);
+			}
+			if (*path)
+				strcat(buf, path);
+			buf2[0] = 0;
+			if (buf[0] != '/') strcat(buf2, "/");
+			strcat(buf2, buf);
+			path = buf2;
+
+			continue;
+		}
+
+		/*
+		 *	Are we done?
+		 */
+		if (*path == 0)
+			break;
+
+		/*
+		 *	repeating /./ sequences can be skipped.
+		 */
+		while (path[0] == '/' && path[1] == '.' && path[2] == '/') {
+			path += 2;
+			while (*path == '/' && path[1] == '/') path++;
+		}
+
+		/*
+		 *	Is it a trailing / or /. or /./ ?
+		 */
+		if (exists > 0 && (path[1] == 0 ||
+		    (path[1] == '.' && (path[2] == 0 || path[2] == '/')))) {
+			
+			if (S_ISDIR(st.st_mode)) {
+				/*
+				 *	Skip . or ./
+				 */
+				path++;
+				if (*path == '.') path++;
+				continue;
+			}
+
+			/*
+			 *	Yup, ".", but that doesn't work if the
+			 *	parent path isn't a directory.
+			 */
+			errno = ENOTDIR;
+			exists = -1;
+		}
+
+		/*
+		 *	Is it ../ ?
+		 */
+		if (exists > 0 && path[1] == '.' && path[2] == '.' &&
+			      (path[3] == 0 || path[3] == '/')) {
+
+			if (S_ISDIR(st.st_mode)) {
+				/*
+				 *	Back up one element.
+				 */
+				p = strrchr(resolved, '/');
+				if (p == resolved) p++;
+				*p = 0;
+				path += 3;
+				continue;
+			}
+
+			/*
+			 *	Yup, "..", but that doesn't work if the
+			 *	parent path isn't a directory.
+			 */
+			errno = ENOTDIR;
+			exists = -1;
+		}
+
+		/*
+		 *	Okay add this element to the resolved path.
+		 */
+		for (p = path + 1; *p && *p != '/'; p++)
+			;
+		if (strlen(resolved) + (p - path) + 2 >= reslen) {
+			errno = ENAMETOOLONG;
+			return -2;
+		}
+		c = *p;
+		*p = 0;
+		if (resolved[0] == '/' && resolved[1] == 0) path++;
+		strcat(resolved, path);
+		*p = c;
+		path = p;
+	}
+
+	return (exists > 0 || (exists == 0 && S_ISDIR(st_mode))) ? 0 : -1;
+}
+
+void usage(char *progname)
+{
+	fprintf(stderr, "Usage: %s: [OPTION]... FILE\n", progname);
+	exit(1);
+}
+
+void version(char *progname)
+{
+	printf("%s version 1.0 (sysvinit 2.85)\n", progname);
+	exit(1);
+}
+
+char *mystrerror(int e)
+{
+	if (e == EINVAL)
+		return "Not a symbolic link";
+	else
+		return strerror(e);
+}
+
+int cmd_readlink(int argc, char **argv, char *progname)
+{
+	char		*buf;
+	char		*path;
+	int		c, l, e;
+	int		opt_canon = 0;
+	int		opt_nonl = 0;
+	int		opt_verbose = 0;
+	int		path_max;
+
+	while ((c = getopt_long(argc, argv, "fnqsv", readlink_options, NULL)) != EOF) switch(c) {
+		case 'f':
+			opt_canon++;
+			break;
+		case 'n':
+			opt_nonl++;
+			break;
+		case 'q':
+		case 's':
+			opt_verbose = 0;
+			break;
+		case 'v':
+			opt_verbose = 1;
+			break;
+		case 'V':
+			version(progname);
+			break;
+		default:
+			usage(progname);
+			break;
+	}
+
+	if (optind != argc - 1)
+		usage(progname);
+	path = argv[optind];
+
+	/*
+	 *	Rules on printing stdout, stderr and exit status:
+	 *
+	 *	simple readlink: succes: print value on stdout, exit 0
+	 *			 fail:   print error on stderr, exit 1
+	 *
+	 *	canonicalize:	 succes: print path on stdout, exit 0
+	 *			 fail:   print path on stdout if -ff
+	 *				 print error on stderr if verbose
+	 *				 exit 1 if path was still canonicalized
+	 *				 exit 254 if not completely canon'ed
+	 */
+
+	l = opt_canon ? -2 : -1;
+
+	path_max = system_path_max(path);
+	if ((buf = alloca(path_max)) != NULL) {
+		if (opt_canon) {
+			l = realpath_sz(path, buf, path_max);
+		} else {
+			l = readlink(path, buf, path_max - 1);
+			if (l >= 0)
+				buf[l] = 0;
+			else
+				l = -2;
+		}
+	}
+
+	e = errno;
+
+	if (l >= 0 || opt_canon > 1)
+		printf("%s%s", (l == -2) ? path : buf, opt_nonl ? "" : "\n");
+
+	if (l < 0 && opt_verbose)
+		fprintf(stderr, "%s: %s: %s\n", progname,
+			(l == -2) ? path : buf, mystrerror(e));
+
+	if (l < 0) return (l == -2) ? 254 : 1;
+	return 0;
+}
+
+int cmd_realpath(int argc, char **argv, char *progname)
+{
+	char		*buf;
+	char		*path;
+	int		c, l, e;
+	int		opt_nonl = 0;
+	int		opt_verbose = 0;
+	int		path_max;
+
+	while ((c = getopt_long(argc, argv, "nv", realpath_options, NULL)) != EOF) switch(c) {
+		case 'n':
+			opt_nonl++;
+			break;
+		case 'v':
+			opt_verbose = 1;
+			break;
+		case 'V':
+			version(progname);
+			break;
+		default:
+			usage(progname);
+			break;
+	}
+
+	if (optind != argc - 1)
+		usage(progname);
+	path = argv[optind];
+
+	path_max = system_path_max(path);
+	if ((buf = alloca(path_max)) != NULL)
+		l = realpath_sz(path, buf, path_max);
+	else
+		l = -2;
+
+	e = errno;
+
+	printf("%s%s", (l == -2) ? path : buf, opt_nonl ? "" : "\n");
+
+	if (l < 0 && opt_verbose)
+		fprintf(stderr, "%s: %s: %s\n", progname,
+			(l == -2) ? path : buf, mystrerror(e));
+
+	if (l < 0) return (l == -2) ? 254 : 1;
+	return 0;
+}
+
+int main(int argc, char **argv)
+{
+	char		*p;
+
+	if ((p = strrchr(argv[0], '/')) != NULL)
+		p++;
+	else
+		p = argv[0];
+
+	if (strcmp(p, "realpath") == 0)
+		return cmd_realpath(argc, argv, p);
+
+	return cmd_readlink(argc, argv, "readlink");
+}
+
diff -Naur sysvinit-2.86/debian/README sysvinit-2.86-robox-linux/debian/README
--- sysvinit-2.86/debian/README	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/README	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,20 @@
+This is the Debian GNU/Linux prepackaged version of System V Init.  Init
+was written by Miquel van Smoorenburg <miquels@cistron.nl>.
+
+This package was put together by Bruce Perens <Bruce@Pixar.com> from pre-
+distribution sources. Ian Murdock <imurdock@debian.org> integrated it into
+the base system maintained it until the end of 1995. Miquel van Smoorenburg
+<miquels@cistron.nl> has integrated debian support into the base package.
+
+Since version 2.80, debian support was taken out of the upstream package
+and is now only present in the Debian prepackaged version. This was in
+preparance for the split into seperate packages (sysvinit, sysv-rc,
+initscripts) which has been realized in version 2.85.
+
+The upstream source is available at:
+
+Primary-Site:   ftp.cistron.nl /pub/people/miquels/software
+                92K sysvinit-2.86.tar.gz
+Alternate-Site: sunsite.unc.edu /pub/Linux/system/daemons/init
+                92K sysvinit-2.86.tar.gz
+
diff -Naur sysvinit-2.86/debian/README.runlevels sysvinit-2.86-robox-linux/debian/README.runlevels
--- sysvinit-2.86/debian/README.runlevels	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/README.runlevels	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,5 @@
+
+This information is now available in /usr/share/doc/sysv-rc if you're
+running a standard installation, or in /usr/share/doc/file-rc if you
+have installed the `file-rc' package.
+
diff -Naur sysvinit-2.86/debian/rules sysvinit-2.86-robox-linux/debian/rules
--- sysvinit-2.86/debian/rules	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/rules	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,204 @@
+#! /usr/bin/make -f
+#
+#	debian/rules file for sysvinit
+#
+
+tmp     = $(shell pwd)/debian/tmp
+doc	= /usr/share/doc
+
+SHELL	= /bin/bash
+LC_ALL	= POSIX
+
+DEB_HOST_GNU_TYPE ?= $(shell dpkg-architecture -qDEB_HOST_GNU_TYPE)
+DEB_HOST_GNU_SYSTEM ?= $(shell dpkg-architecture -qDEB_HOST_GNU_SYSTEM)
+DEB_HOST_ARCH ?= $(shell dpkg-architecture -qDEB_HOST_ARCH)
+
+LIBC6	= libc6
+ifeq ($(DEB_HOST_ARCH), alpha)
+LIBC6	= libc6.1
+endif
+ifeq ($(DEB_HOST_ARCH), ia64)
+LIBC6	= libc6.1
+endif
+
+define checkdir
+	test -f src/init.c
+endef
+
+build:
+# Builds the binary package.
+	$(checkdir)
+	(cd src; make DISTRO=Debian)
+	cc -Wall -s -o debian/readlink debian/readlink.c
+	touch build
+
+# Make a binary package (.deb file)
+binary-arch:	build checkroot
+	#
+	#	Sysvinit.
+	#
+	-rm -rf $(tmp)
+	install -d -g root -m 755 -o root $(tmp)
+	install -d -g root -m 755 -o root $(tmp)/{DEBIAN,etc,usr}
+	install -d -g root -m 755 -o root $(tmp)/usr/share
+	install -d -g root -m 755 -o root $(tmp)/usr/share/sysvinit
+	install -d -g root -m 755 -o root $(tmp)/usr/include
+	install -d -g root -m 755 -o root $(tmp)$(doc)/sysvinit
+	install -g root -m 644 doc/Changelog $(tmp)$(doc)/sysvinit/changelog
+	install -g root -m 644 debian/changelog \
+		$(tmp)$(doc)/sysvinit/changelog.Debian
+	install -g root -m 644 debian/README.runlevels \
+		$(tmp)$(doc)/sysvinit
+	gzip -9f $(tmp)$(doc)/sysvinit/{README.runlevels,changelog*}
+	if test -e debian/share/inittab.$(DEB_HOST_GNU_TYPE) ; \
+	then \
+		install -g root -m 644 -o root \
+			debian/share/inittab.$(DEB_HOST_GNU_TYPE) \
+			$(tmp)/usr/share/sysvinit/inittab ; \
+	elif test -e debian/share/inittab.$(DEB_HOST_GNU_SYSTEM) ; \
+	then \
+		install -g root -m 644 -o root \
+			debian/share/inittab.$(DEB_HOST_GNU_SYSTEM) \
+			$(tmp)/usr/share/sysvinit/inittab ; \
+	else \
+		install -g root -m 644 -o root debian/share/inittab \
+			$(tmp)/usr/share/sysvinit/inittab ; \
+	fi
+	install -g root -m 755 -o root debian/share/update-rc.d \
+		$(tmp)/usr/share/sysvinit
+	install -d -g root -m 755 -o root $(tmp)/{bin,sbin,lib,usr}
+	install -d -g root -m 755 -o root $(tmp)/usr/bin
+	install -d -g root -m 755 -o root $(tmp)/usr/sbin
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man/man{1,5,8}
+	(cd src; make ROOT=$(tmp) DISTRO=Debian install )
+ifeq ($(DEB_HOST_ARCH), hurd-i386)
+	# The Hurd has its own halt and reboot commands.
+	rm -f $(tmp)/usr/share/man/man8/halt.8
+	rm -f $(tmp)/usr/share/man/man8/reboot.8
+	rm -f $(tmp)/sbin/halt
+	rm -f $(tmp)/sbin/reboot
+endif
+	rm -f $(tmp)/usr/share/man/man1/mountpoint.1
+	rm -f $(tmp)/bin/mountpoint
+	gzip -9f $(tmp)/usr/share/man/man*/*.[0-9]
+	install -g root -m 644 -o root debian/README \
+	  $(tmp)$(doc)/sysvinit/copyright
+	cat COPYRIGHT >> $(tmp)$(doc)/sysvinit/copyright
+	install -g root -m 755 debian/postinst $(tmp)/DEBIAN/postinst
+	dpkg-shlibdeps src/init
+	dpkg-gencontrol -psysvinit -P$(tmp) -isp
+	dpkg --build $(tmp) ..
+	rm -rf $(tmp)
+	#
+	#	Initscripts.
+	#
+	-rm -rf $(tmp)
+	install -d -g root -m 755 -o root $(tmp)
+	install -d -g root -m 755 -o root $(tmp)/{DEBIAN,etc,usr,sbin,lib}
+	install -d -g root -m 755 -o root $(tmp)/lib/init
+	install -d -g root -m 755 -o root $(tmp)/usr/share
+	install -d -g root -m 755 -o root $(tmp)/usr/share/initscripts
+	install -d -g root -m 755 -o root $(tmp)$(doc)/initscripts
+	sed -ne '/sysvinit (2.84-3)/q' -e p < debian/changelog \
+		> $(tmp)$(doc)/initscripts/changelog
+	chmod 644 $(tmp)$(doc)/initscripts/changelog
+	gzip -9f $(tmp)$(doc)/initscripts/*
+	cp -af debian/initscripts/share/* $(tmp)/usr/share/initscripts
+	cp -af debian/initscripts/etc/* $(tmp)/etc
+	ln -sf bootlogd $(tmp)/etc/init.d/stop-bootlogd
+	chmod 755 $(tmp)/etc/init.d/[a-z]*
+	chmod 644 $(tmp)/etc/init.d/bootclean.sh
+	chmod -R g-w $(tmp)
+	chown -R root.root $(tmp)
+	install -d -g root -m 755 -o root $(tmp)/bin
+	install -d -g root -m 755 -o root $(tmp)/etc/default
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man/man1
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man/man5
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man/man8
+	install -d -g root -m 755 -o root $(tmp)/var/lib/urandom
+	install -g root -m 755 debian/initscripts/sbin/fsck.nfs \
+		$(tmp)/sbin/fsck.nfs
+	install -g root -m 755 debian/initscripts/man/fsck.nfs.8 \
+		$(tmp)/usr/share/man/man8/fsck.nfs.8
+	install -g root -m 644 debian/initscripts/rcS.5 \
+		$(tmp)/usr/share/man/man5
+	install -g root -m 755 src/mountpoint $(tmp)/bin
+	install -g root -m 755 man/mountpoint.1 $(tmp)/usr/share/man/man1
+	install -g root -m 755 debian/readlink $(tmp)/lib/init
+	gzip -9f $(tmp)/usr/share/man/man*/*.[0-9]
+	install -g root -m 644 -o root debian/initscripts/copyright \
+	  $(tmp)$(doc)/initscripts/copyright
+	install -g root -m 755 debian/initscripts/preinst  $(tmp)/DEBIAN
+	install -g root -m 755 debian/initscripts/postinst $(tmp)/DEBIAN
+	install -g root -m 644 -o root debian/initscripts/conffiles \
+	  $(tmp)/DEBIAN/conffiles
+	dpkg-shlibdeps debian/readlink
+	sh debian/deps-mount >> debian/substvars
+	sh debian/deps-glibc >> debian/substvars
+	dpkg-gencontrol -pinitscripts -P$(tmp) -isp
+	dpkg --build $(tmp) ..
+	rm -rf $(tmp)
+
+
+# Architecture independant files.
+binary-indep:   build checkroot
+	#
+	#	sysv-rc
+	#
+	-rm -rf $(tmp)
+	install -d -g root -m 755 -o root $(tmp)
+	install -d -g root -m 755 -o root $(tmp)/{DEBIAN,etc,usr}
+	install -d -g root -m 755 -o root $(tmp)/usr/share
+	install -d -g root -m 755 -o root $(tmp)$(doc)/sysv-rc
+	sed -ne '/sysvinit (2.84-3)/q' -e p < debian/changelog \
+		> $(tmp)$(doc)/sysv-rc/changelog
+	chmod 644 $(tmp)$(doc)/sysv-rc/changelog
+	install -g root -m 644 debian/sysv-rc/doc/* $(tmp)$(doc)/sysv-rc
+	gzip -9f $(tmp)$(doc)/sysv-rc/*
+	install -d -g root -m 755 -o root $(tmp)/etc/rc{0,1,2,3,4,5,6}.d
+	cp -af debian/sysv-rc/etc/* $(tmp)/etc
+	chmod 755 $(tmp)/etc/init.d/[a-z]*
+	chmod -R go=u-w $(tmp)/etc
+	chown -R root.root $(tmp)/etc
+	install -d -g root -m 755 -o root $(tmp)/usr/sbin
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man/man5
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man/man8
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man/ja/man8
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man/fr/man8
+	install -d -g root -m 755 -o root $(tmp)/usr/share/man/es/man8
+	install -g root -m 644 debian/sysv-rc/man8/*.8 \
+		$(tmp)/usr/share/man/man8
+	install -g root -m 644 debian/sysv-rc/man8/ja/*.8 \
+		$(tmp)/usr/share/man/ja/man8
+	install -g root -m 644 debian/sysv-rc/man8/fr/*.8 \
+		$(tmp)/usr/share/man/fr/man8
+	install -g root -m 644 debian/sysv-rc/man8/es/*.8 \
+		$(tmp)/usr/share/man/es/man8
+	install -g root -m 755 debian/sysv-rc/sbin/invoke-rc.d $(tmp)/usr/sbin
+	install -g root -m 755 debian/sysv-rc/sbin/update-rc.d $(tmp)/usr/sbin
+	gzip -9f $(tmp)/usr/share/man/man*/*.[0-9] \
+		 $(tmp)/usr/share/man/??/man*/*.[0-9]
+	install -g root -m 644 -o root debian/sysv-rc/copyright \
+	  $(tmp)$(doc)/sysv-rc/copyright
+	install -g root -m 755 debian/sysv-rc/postinst $(tmp)/DEBIAN/postinst
+	install -g root -m 755 debian/sysv-rc/postrm $(tmp)/DEBIAN/postrm
+	dpkg-gencontrol -psysv-rc -P$(tmp) -isp
+	dpkg --build $(tmp) ..
+	rm -rf $(tmp)
+
+clean:	checkroot
+	(cd src; make clobber )
+	rm -f build debian/files debian/substvars debian/readlink
+	rm -rf $(tmp)
+	find . -name '*.bak' -o -name '*~' | xargs -r rm -f --
+
+binary: binary-arch binary-indep
+
+checkroot:
+	$(checkdir)
+	test root = "`whoami`"
+
+.PHONY: binary binary-arch binary-indep clean checkroot
diff -Naur sysvinit-2.86/debian/share/inittab sysvinit-2.86-robox-linux/debian/share/inittab
--- sysvinit-2.86/debian/share/inittab	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/share/inittab	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,69 @@
+# /etc/inittab: init(8) configuration.
+# $Id: inittab,v 1.91 2002/01/25 13:35:21 miquels Exp $
+
+# The default runlevel.
+id:2:initdefault:
+
+# Boot-time system configuration/initialization script.
+# This is run first except when booting in emergency (-b) mode.
+si::sysinit:/etc/init.d/rcS
+
+# What to do in single-user mode.
+~~:S:wait:/sbin/sulogin
+
+# /etc/init.d executes the S and K scripts upon change
+# of runlevel.
+#
+# Runlevel 0 is halt.
+# Runlevel 1 is single-user.
+# Runlevels 2-5 are multi-user.
+# Runlevel 6 is reboot.
+
+l0:0:wait:/etc/init.d/rc 0
+l1:1:wait:/etc/init.d/rc 1
+l2:2:wait:/etc/init.d/rc 2
+l3:3:wait:/etc/init.d/rc 3
+l4:4:wait:/etc/init.d/rc 4
+l5:5:wait:/etc/init.d/rc 5
+l6:6:wait:/etc/init.d/rc 6
+# Normally not reached, but fallthrough in case of emergency.
+z6:6:respawn:/sbin/sulogin
+
+# What to do when CTRL-ALT-DEL is pressed.
+ca:12345:ctrlaltdel:/sbin/shutdown -t1 -a -r now
+
+# Action on special keypress (ALT-UpArrow).
+#kb::kbrequest:/bin/echo "Keyboard Request--edit /etc/inittab to let this work."
+
+# What to do when the power fails/returns.
+pf::powerwait:/etc/init.d/powerfail start
+pn::powerfailnow:/etc/init.d/powerfail now
+po::powerokwait:/etc/init.d/powerfail stop
+
+# /sbin/getty invocations for the runlevels.
+#
+# The "id" field MUST be the same as the last
+# characters of the device (after "tty").
+#
+# Format:
+#  <id>:<runlevels>:<action>:<process>
+#
+# Note that on most Debian systems tty7 is used by the X Window System,
+# so if you want to add more getty's go ahead but skip tty7 if you run X.
+#
+1:2345:respawn:/sbin/getty 38400 tty1
+2:23:respawn:/sbin/getty 38400 tty2
+3:23:respawn:/sbin/getty 38400 tty3
+4:23:respawn:/sbin/getty 38400 tty4
+5:23:respawn:/sbin/getty 38400 tty5
+6:23:respawn:/sbin/getty 38400 tty6
+
+# Example how to put a getty on a serial line (for a terminal)
+#
+#T0:23:respawn:/sbin/getty -L ttyS0 9600 vt100
+#T1:23:respawn:/sbin/getty -L ttyS1 9600 vt100
+
+# Example how to put a getty on a modem line.
+#
+#T3:23:respawn:/sbin/mgetty -x0 -s 57600 ttyS3
+
diff -Naur sysvinit-2.86/debian/share/inittab.gnu sysvinit-2.86-robox-linux/debian/share/inittab.gnu
--- sysvinit-2.86/debian/share/inittab.gnu	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/share/inittab.gnu	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,69 @@
+# /etc/inittab: init(8) configuration.
+# $Id: inittab,v 1.91 2002/01/25 13:35:21 miquels Exp $
+
+# The default runlevel.
+id:2:initdefault:
+
+# Boot-time system configuration/initialization script.
+# This is run first except when booting in emergency (-b) mode.
+si::sysinit:/etc/init.d/rcS
+
+# What to do in single-user mode.
+~~:S:wait:/sbin/sulogin
+
+# /etc/init.d executes the S and K scripts upon change
+# of runlevel.
+#
+# Runlevel 0 is halt.
+# Runlevel 1 is single-user.
+# Runlevels 2-5 are multi-user.
+# Runlevel 6 is reboot.
+
+l0:0:wait:/etc/init.d/rc 0
+l1:1:wait:/etc/init.d/rc 1
+l2:2:wait:/etc/init.d/rc 2
+l3:3:wait:/etc/init.d/rc 3
+l4:4:wait:/etc/init.d/rc 4
+l5:5:wait:/etc/init.d/rc 5
+l6:6:wait:/etc/init.d/rc 6
+# Normally not reached, but fallthrough in case of emergency.
+z6:6:respawn:/sbin/sulogin
+
+# What to do when CTRL-ALT-DEL is pressed.
+ca:12345:ctrlaltdel:/sbin/shutdown -t1 -a -r now
+
+# Action on special keypress (ALT-UpArrow).
+#kb::kbrequest:/bin/echo "Keyboard Request--edit /etc/inittab to let this work."
+
+# What to do when the power fails/returns.
+pf::powerwait:/etc/init.d/powerfail start
+pn::powerfailnow:/etc/init.d/powerfail now
+po::powerokwait:/etc/init.d/powerfail stop
+
+# /libexec/getty invocations for the runlevels.
+#
+# The "id" field MUST be the same as the last
+# characters of the device (after "tty").
+#
+# Format:
+#  <id>:<runlevels>:<action>:<process>
+#
+# Note that on most Debian systems tty7 is used by the X Window System,
+# so if you want to add more getty's go ahead but skip tty7 if you run X.
+#
+1:2345:respawn:/libexec/getty 38400 tty1
+2:23:respawn:/libexec/getty 38400 tty2
+3:23:respawn:/libexec/getty 38400 tty3
+4:23:respawn:/libexec/getty 38400 tty4
+5:23:respawn:/libexec/getty 38400 tty5
+6:23:respawn:/libexec/getty 38400 tty6
+
+# Example how to put a getty on a serial line (for a terminal)
+#
+#T0:23:respawn:/libexec/getty -L ttyS0 9600 vt100
+#T1:23:respawn:/libexec/getty -L ttyS1 9600 vt100
+
+# Example how to put a getty on a modem line.
+#
+#T3:23:respawn:/sbin/mgetty -x0 -s 57600 ttyS3
+
diff -Naur sysvinit-2.86/debian/share/inittab.kfreebsd-gnu sysvinit-2.86-robox-linux/debian/share/inittab.kfreebsd-gnu
--- sysvinit-2.86/debian/share/inittab.kfreebsd-gnu	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/share/inittab.kfreebsd-gnu	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,69 @@
+# /etc/inittab: init(8) configuration.
+# $Id: inittab,v 1.91 2002/01/25 13:35:21 miquels Exp $
+
+# The default runlevel.
+id:2:initdefault:
+
+# Boot-time system configuration/initialization script.
+# This is run first except when booting in emergency (-b) mode.
+si::sysinit:/etc/init.d/rcS
+
+# What to do in single-user mode.
+~~:S:wait:/sbin/sulogin
+
+# /etc/init.d executes the S and K scripts upon change
+# of runlevel.
+#
+# Runlevel 0 is halt.
+# Runlevel 1 is single-user.
+# Runlevels 2-5 are multi-user.
+# Runlevel 6 is reboot.
+
+l0:0:wait:/etc/init.d/rc 0
+l1:1:wait:/etc/init.d/rc 1
+l2:2:wait:/etc/init.d/rc 2
+l3:3:wait:/etc/init.d/rc 3
+l4:4:wait:/etc/init.d/rc 4
+l5:5:wait:/etc/init.d/rc 5
+l6:6:wait:/etc/init.d/rc 6
+# Normally not reached, but fallthrough in case of emergency.
+z6:6:respawn:/sbin/sulogin
+
+# What to do when CTRL-ALT-DEL is pressed.
+ca:12345:ctrlaltdel:/sbin/shutdown -t1 -a -r now
+
+# Action on special keypress (ALT-UpArrow).
+#kb::kbrequest:/bin/echo "Keyboard Request--edit /etc/inittab to let this work."
+
+# What to do when the power fails/returns.
+pf::powerwait:/etc/init.d/powerfail start
+pn::powerfailnow:/etc/init.d/powerfail now
+po::powerokwait:/etc/init.d/powerfail stop
+
+# /sbin/getty invocations for the runlevels.
+#
+# The "id" field MUST be the same as the last
+# characters of the device (after "tty").
+#
+# Format:
+#  <id>:<runlevels>:<action>:<process>
+#
+# Note that on most Debian systems tty7 is used by the X Window System,
+# so if you want to add more getty's go ahead but skip tty7 if you run X.
+#
+1:2345:respawn:/sbin/getty 38400 ttyv0
+2:23:respawn:/sbin/getty 38400 ttyv1
+3:23:respawn:/sbin/getty 38400 ttyv2
+4:23:respawn:/sbin/getty 38400 ttyv3
+5:23:respawn:/sbin/getty 38400 ttyv4
+6:23:respawn:/sbin/getty 38400 ttyv5
+
+# Example how to put a getty on a serial line (for a terminal)
+#
+#T0:23:respawn:/sbin/getty -L ttyS0 9600 vt100
+#T1:23:respawn:/sbin/getty -L ttyS1 9600 vt100
+
+# Example how to put a getty on a modem line.
+#
+#T3:23:respawn:/sbin/mgetty -x0 -s 57600 ttyS3
+
diff -Naur sysvinit-2.86/debian/share/inittab.knetbsd-gnu sysvinit-2.86-robox-linux/debian/share/inittab.knetbsd-gnu
--- sysvinit-2.86/debian/share/inittab.knetbsd-gnu	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/share/inittab.knetbsd-gnu	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,67 @@
+# /etc/inittab: init(8) configuration.
+# $Id: inittab,v 1.91 2002/01/25 13:35:21 miquels Exp $
+
+# The default runlevel.
+id:2:initdefault:
+
+# Boot-time system configuration/initialization script.
+# This is run first except when booting in emergency (-b) mode.
+si::sysinit:/etc/init.d/rcS
+
+# What to do in single-user mode.
+~~:S:wait:/sbin/sulogin
+
+# /etc/init.d executes the S and K scripts upon change
+# of runlevel.
+#
+# Runlevel 0 is halt.
+# Runlevel 1 is single-user.
+# Runlevels 2-5 are multi-user.
+# Runlevel 6 is reboot.
+
+l0:0:wait:/etc/init.d/rc 0
+l1:1:wait:/etc/init.d/rc 1
+l2:2:wait:/etc/init.d/rc 2
+l3:3:wait:/etc/init.d/rc 3
+l4:4:wait:/etc/init.d/rc 4
+l5:5:wait:/etc/init.d/rc 5
+l6:6:wait:/etc/init.d/rc 6
+# Normally not reached, but fallthrough in case of emergency.
+z6:6:respawn:/sbin/sulogin
+
+# What to do when CTRL-ALT-DEL is pressed.
+ca:12345:ctrlaltdel:/sbin/shutdown -t1 -a -r now
+
+# Action on special keypress (ALT-UpArrow).
+#kb::kbrequest:/bin/echo "Keyboard Request--edit /etc/inittab to let this work."
+
+# What to do when the power fails/returns.
+pf::powerwait:/etc/init.d/powerfail start
+pn::powerfailnow:/etc/init.d/powerfail now
+po::powerokwait:/etc/init.d/powerfail stop
+
+# /sbin/getty invocations for the runlevels.
+#
+# The "id" field MUST be the same as the last
+# characters of the device (after "tty").
+#
+# Format:
+#  <id>:<runlevels>:<action>:<process>
+#
+# Note that on most Debian systems tty7 is used by the X Window System,
+# so if you want to add more getty's go ahead but skip tty7 if you run X.
+#
+1:2345:respawn:/sbin/getty 38400 ttyE0
+2:23:respawn:/sbin/getty 38400 ttyE1
+3:23:respawn:/sbin/getty 38400 ttyE2
+4:23:respawn:/sbin/getty 38400 ttyE3
+
+# Example how to put a getty on a serial line (for a terminal)
+#
+#T0:23:respawn:/sbin/getty -L ttyS0 9600 vt100
+#T1:23:respawn:/sbin/getty -L ttyS1 9600 vt100
+
+# Example how to put a getty on a modem line.
+#
+#T3:23:respawn:/sbin/mgetty -x0 -s 57600 ttyS3
+
diff -Naur sysvinit-2.86/debian/share/inittab.s390-linux sysvinit-2.86-robox-linux/debian/share/inittab.s390-linux
--- sysvinit-2.86/debian/share/inittab.s390-linux	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/share/inittab.s390-linux	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,63 @@
+# /etc/inittab: init(8) configuration.
+# $Id: inittab.s390,v 1.9 2000/01/10 10:15:30 miquels Exp $
+
+# The default runlevel.
+id:2:initdefault:
+
+# Boot-time system configuration/initialization script.
+# This is run first except when booting in emergency (-b) mode.
+si::sysinit:/etc/init.d/rcS
+
+# What to do in single-user mode.
+~~:S:wait:/sbin/sulogin
+
+# /etc/init.d executes the S and K scripts upon change
+# of runlevel.
+#
+# Runlevel 0 is halt.
+# Runlevel 1 is single-user.
+# Runlevels 2-5 are multi-user.
+# Runlevel 6 is reboot.
+
+l0:0:wait:/etc/init.d/rc 0
+l1:1:wait:/etc/init.d/rc 1
+l2:2:wait:/etc/init.d/rc 2
+l3:3:wait:/etc/init.d/rc 3
+l4:4:wait:/etc/init.d/rc 4
+l5:5:wait:/etc/init.d/rc 5
+l6:6:wait:/etc/init.d/rc 6
+# Normally not reached, but fallthrough in case of emergency.
+z6:6:respawn:/sbin/sulogin
+
+# What to do when CTRL-ALT-DEL is pressed.
+ca:12345:ctrlaltdel:/sbin/shutdown -t1 -a -r now
+
+# Action on special keypress (ALT-UpArrow).
+kb::kbrequest:/bin/echo "Keyboard Request--edit /etc/inittab to let this work."
+
+# What to do when the power fails/returns.
+pf::powerwait:/etc/init.d/powerfail start
+pn::powerfailnow:/etc/init.d/powerfail now
+po::powerokwait:/etc/init.d/powerfail stop
+
+# /sbin/getty invocations for the runlevels.
+#
+# The "id" field MUST be the same as the last
+# characters of the device (after "tty").
+#
+# Format:
+#  <id>:<runlevels>:<action>:<process>
+#
+# The s390 only has a dumb terminal on /dev/console.
+#
+1:2345:respawn:/sbin/getty 38400 console dumb
+
+# Example how to put a getty on a serial line (for a terminal)
+#
+#T0:23:respawn:/sbin/getty -L ttyS0 9600 vt100
+#T1:23:respawn:/sbin/getty -L ttyS1 9600 vt100
+
+# Example how to put a getty on a modem line.
+#
+#T3:23:respawn:/sbin/mgetty -x0 -s 57600 ttyS3
+
diff -Naur sysvinit-2.86/debian/share/update-rc.d sysvinit-2.86-robox-linux/debian/share/update-rc.d
--- sysvinit-2.86/debian/share/update-rc.d	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/share/update-rc.d	2010-06-14 14:07:20.669398909 +0200
@@ -0,0 +1,25 @@
+#! /bin/sh
+#
+# update-rc.d	Dummy update-rc.d, installed when file-rc replaces
+#		sysv-rc or the other way around. The postrm of the
+#		package being replaced symlinks /usr/sbin/update-rc.d
+#		to this dummy file.
+#
+#		All this script does is "scream and die".
+#
+
+name=`basename $0`
+
+cat <<EOF >&2
+
+$name: not present yet.
+
+You are replacing sysv-rc with file-rc or another -rc package, or
+the other way around. The replacement package must first be
+unpacked before you can configure other packages.
+
+Exiting with error status 1.
+
+EOF
+
+exit 1
diff -Naur sysvinit-2.86/debian/sysv-rc/copyright sysvinit-2.86-robox-linux/debian/sysv-rc/copyright
--- sysvinit-2.86/debian/sysv-rc/copyright	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/copyright	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,27 @@
+
+This package contains the mechanism for executing the right scripts
+in the right order at bootup/shutdown time, and when changing runlevels.
+It works through managing symlinks in /etc/rc?.d
+
+This package is built from the `sysvinit' source package.
+
+Copyright (C) 2000-2003 Miquel van Smoorenburg <miquels@cistron.nl>
+Copyright (C) 2000,2001 Henrique de Moraes Holschuh <hmh@debian.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+ 
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+                                                                                
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+                                                                                
+On Debian GNU/Linux systems, the complete text of the GNU General
+Public License can be found in `/usr/share/common-licenses/GPL'.
+
diff -Naur sysvinit-2.86/debian/sysv-rc/doc/README.invoke-rc.d sysvinit-2.86-robox-linux/debian/sysv-rc/doc/README.invoke-rc.d
--- sysvinit-2.86/debian/sysv-rc/doc/README.invoke-rc.d	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/doc/README.invoke-rc.d	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,138 @@
+
+
+This is the internal documentation for invoke-rc.d, as
+written by Henrique M Holschuh <hmh@debian.org>
+
+This document can be found on the web as well at
+http://people.debian.org/~hmh/invokerc.d-policyrc.d-specification.txt
+
+There is also the Debian BTS entry for the invoke-rc.d policy change at
+http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=76868
+
+
+INVOKE-RC.D (/usr/sbin/invoke-rc.d) interface:
+==============================================
+
+The interface for all implementations of invoke-rc.d is mandated by the base
+implementation in the sysvinit package, just like it is done for
+update-rc.d.
+
+There is a provision for a "local initscript policy layer" (read: a call to
+/usr/sbin/policy-rc.d if this executable is present in the local system),
+which allows the local system administrator to control the behaviour of
+invoke-rc.d for every initscript id and action. It is assumed that this
+script is OPTIONAL and will by written and provided by packages other than
+the initscript system (sysvinit and file-rc packages).
+
+The basic interface for all implementations of policy-rc.d is mandated by
+the requirements of the base implementation of invoke-rc.d. This interface
+will be described either in the manpage of invoke-rc.d, and in a text file
+stored in /usr/share/doc/sysvinit/ by package sysvinit (which will host the
+base implementation of invoke-rc.d).
+
+Proposed script interfaces:
+
+invoke-rc.d [options] <basename> <action> [extra initscript parameters...]
+
+  basename - Initscript ID, as per update-rc.d(8)
+  action   - Initscript action. Known actions are:
+                start, [force-]stop, restart,
+                [force-]reload, status
+  (status is there because of the LSB. Debian does not use it).
+
+  extra initscript parameters: These parameters are passed to the initscript
+  as is, after the action parameter. <action> is always the first paramenter
+  to the initscript, and may be modified by fallback actions or policy-rc.d
+  requests. Note, however, that the extra parameters are not dropped or
+  modified even if the action (first parameter) is modified.
+
+Options:
+
+ --quiet
+     Quiet mode, no error messages are generated by invoke-rc.d; policy-rc.d
+     is also called with --quiet if this option is in effect.
+
+ --force
+     Try to run init script regardless of policy and non-fatal errors. Use
+     of this option in automated scripts is severely discouraged as it
+     bypasses integrity checks. If the initscript cannot be executed, error
+     status 102 is returned. Do note that the policy layer call
+     (policy-rc.d) is NOT skipped, although its results are ignored.
+
+ --try-anyway
+     Try to run the initscript even if a non-fatal subsystem error is
+     detected (e.g: bad rc.d symlinks). A 102 status exit code will result
+     if init script fails to execute anyway). Unlike --force, policy is
+     still enforced with --try-anyway.
+
+ --disclose-deny
+     Return status code 101 instead of status code 0 if initscript action is
+     denied by local policy rules or runlevel constrains. An warning is
+     generated if the action is denied.
+
+ --query
+     Returns one of status codes 100-106, does not execute the init.d
+     script. Implies --disclose-deny and --nofallback.  Status codes 104-106
+     are only generated by this option.
+
+     Note many messages are still sent to stderr in --query mode, including
+     those regarding policy overrides and subsystem errors. Use --quiet if
+     silent --query operation is desired.
+
+ --no-fallback 
+     The policy layer (policy-rc.d) may return fallback actions to be run
+     instead of the requested action. If this option is active, a fallback
+     action request will be ignored and a "action not allowed" reply used in
+     its place. This is probably a BAD idea unless you know exactly what
+     you're doing.
+
+  --help
+     Outputs help message to stdout
+
+Unknown actions may generate warnings, but are passed to the underlying
+initscript anyway. The reason for the warning is simple: It is very unlikely
+that an unknown action (by invoke-rc.d) will be known to the policy layer
+(policy-rc.d), and therefore it may cause an initscript to execute an action
+which the local system administrator would have not allowed had he known
+about it. If policy-rc.d is not present, no warnings for unknown actions
+are generated.
+
+Should an initscript be executed, invoke-rc.d ALWAYS returns the status code
+returned by the initscript. Initscripts should not return status codes in
+the 100+ range (this is also a LSB requirement).
+
+Exit status codes (LSB compatible):
+  0      : success 
+	   either the init script was run and returned exit status 0 (note
+	   that a fallback action may have been run instead of the one given
+	   in the command line), or it was not run because of runlevel/local
+	   policy constrains and --disclose-deny is not in effect.
+  1 - 99 : reserved for init.d script
+ 100     : init script ID (basename) unknown
+	   init script not registered sucessfully through 
+	   update-rc.d or init script does not exist.
+	   This error is fatal for most initscript systems.
+ 101     : action not allowed
+	   requested action will not be performed because of 
+	   runlevel or local policy constrains, and 
+	   --disclose-deny is in effect. Note that a fallback
+	   action is NOT considered "action not allowed",
+	   unless --nofalback is in effect.
+ 102	 : subsystem error
+	   initscript (or policy) subsystem malfuncion.
+	   (e.g. broken /sbin/runlevel).
+	   Also, forced initscript execution due to 
+	   --try-anyway or --force failed.
+ 103	 : syntax error
+ 104	 : action allowed
+	   --query is in effect; init script would be run if
+	   not for --query.
+ 105	 : behaviour uncertain
+	   cannot determine if action should be carried out or 
+	   not, and --query in effect.
+ 106     : fallback action requested
+	   the policy layer denied the requested action, and
+	   supplied an allowed fallback action.
+
+
+
diff -Naur sysvinit-2.86/debian/sysv-rc/doc/README.policy-rc.d sysvinit-2.86-robox-linux/debian/sysv-rc/doc/README.policy-rc.d
--- sysvinit-2.86/debian/sysv-rc/doc/README.policy-rc.d	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/doc/README.policy-rc.d	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,104 @@
+
+
+This is the internal documentation for policy-rc.d, as
+written by Henrique M Holschuh <hmh@debian.org>
+
+This document can be found on the web as well at
+http://people.debian.org/~hmh/invokerc.d-policyrc.d-specification.txt
+
+There is also the Debian BTS entry for the invoke-rc.d policy change at
+http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=76868
+
+
+POLICY-RC.D   Policy layer (/usr/sbin/policy-rc.d) interface:
+=============================================================
+
+Most Debian systems will not have this script as the need for a policy layer
+is not very common. Most people using chroot jails just need an one-line
+script which returns an exit status of 101 as the jailed
+/usr/sbin/policy-rc.d script.
+
+The /usr/sbin/policy-rc.d file *must* be managed through the alternatives
+system (/usr/sbin/update-alternatives) by any packages providing it.
+
+/usr/sbin/policy-rc.d [options] <initscript ID> <actions> [<runlevel>]
+/usr/sbin/policy-rc.d [options] --list <initscript ID> [<runlevel> ...]
+
+Options:
+ --quiet
+     no error messages are generated.
+
+ --list
+     instead of verifying policy, list (in a "human parseable" way) all
+     policies defined for the given initscript id (for all runlevels if no
+     runlevels are specified; otherwise, list it only for the runlevels
+     specified), as well as all known actions and their fallbacks for the
+     given initscript id (note that actions and fallback actions might be
+     global and not particular to a single initscript id).
+
+<actions> is a space-separated list of actions (usually only one). Note that
+the list is passed in a single parameter and not as multiple parameters.
+
+The following actions are always known (even if specifying a policy for them
+is not supported by whatever policy-rc.d system is in use): start,
+[force-]stop, restart, [force-]reload, status.
+
+If an out-of-runlevel start or restart attempt is detected by invoke-rc.d,
+the "start" or "restart" action will be changed to "(start)" or "(restart)"
+respectively. This allows policy-rc.d to differentiate an out-of-runlevel
+start/restart from a normal one.
+
+The runlevel parameters are optional. If a runlevel is not specified, it is
+considered to be unknown/undefined. Note that for sysv-like initscript
+systems, an undefined runlevel is very likely to cause a 105 exit status.
+
+A runlevel for update-rc.d is defined as a character string, of which the
+usual INIT one-character runlevels are only a subset. It may contain
+embedded blanks.
+
+ stdout is used to output a single line containing fallback actions,
+	   or to output --list results.
+ stderr is used to output error messages
+ stdin  is not to be used, this is not an interactive interface.
+
+ Exit status codes:
+  0 - action allowed
+  1 - unknown action (therefore, undefined policy)
+ 100 - unknown initscript id
+ 101 - action forbidden by policy
+ 102 - subsystem error
+ 103 - syntax error
+ 104 - [reserved]
+ 105 - behaviour uncertain, policy undefined.
+ 106 - action not allowed. Use the returned fallback actions
+       (which are implied to be "allowed") instead. 
+
+When in doubt (policy-rc.d returned status 105 or status 1), invoke-rc.d
+will assume an action is allowed, but it will warn the user of the problem.
+
+Returning fallback information:
+
+Fallback actions are returned in the first line sent to stdout (other lines
+will be discarded). Multiple actions to be tried are allowed, and must be
+separated by spaces. Multiple actions are carried out one at a time, until
+one is sucessful.
+
+e.g.: returning status 106 and "restart stop" in stdout (without
+the quotes) will cause invoke-rc.d to attempt action "restart",
+and then only if "restart" failed, attempt action "stop".
+
+invoke-rc.d built-in policy rules:
+
+To shield policy-rc.d of the underlying initscript system (file-rc, links in
+/etc/rc?.d or something else), invoke-rc.d implements the following built-in
+rules:
+
+  1. action "start" out of runlevel is denied,
+     (policy-rc.d receives action "(start)" instead of "start");
+  2. action "restart" out of runlevel is denied,
+     (policy-rc.d receives action "(restart)" instead of "restart");
+  3. any action for a non-executable initscript is denied.
+
+Rule 3 is absolute, policy-rc.d cannot override it.
+
+
diff -Naur sysvinit-2.86/debian/sysv-rc/doc/README.runlevels sysvinit-2.86-robox-linux/debian/sysv-rc/doc/README.runlevels
--- sysvinit-2.86/debian/sysv-rc/doc/README.runlevels	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/doc/README.runlevels	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,104 @@
+
+		Order of scripts run in /etc/rc?.d
+		==================================
+
+0. Overview.
+
+   All scripts executed by the init system are located in /etc/init.d.
+   The directories /etc/rc?.d (? = S, 0 .. 6) contain relative links to
+   those scripts. These links are named S<2-digit-number><original-name>
+   or K<2-digit-number><original-name>.
+
+   If a scripts has the ".sh" suffix it is a bourne shell script and
+   MAY be handled in an optimized manner. The behaviour of executing the
+   script in an optimized way will not differ in any way from it being
+   forked and executed in the regular way.
+
+   The following runlevels are defined:
+
+   N       System bootup (NONE).
+   S       Single user mode (not to be switched to directly)
+   0       halt
+   1       single user mode
+   2 .. 5  multi user mode
+   6       reboot
+
+1. Boot.
+
+   When the systems boots, the /etc/init.d/rcS script is executed. It
+   in turn executes all the S* scripts in /etc/rcS.d in alphabetical
+   (and thus numerical) order. The first argument passed to the
+   executed scripts is "start". The runlevel at this point is "N" (none).
+
+   Only things that need to be run once to get the system in a consistent
+   state are to be run. The rcS.d directory is NOT meant to replace rc.local.
+   One should not start daemons in this runlevel unless absolutely
+   necessary. Eg, NFS might need the portmapper, so it is OK to start it
+   early in the bootprocess. But this is not the time to start the
+   squid proxy server.
+
+2. Going multiuser.
+
+   After the rcS.d scripts have been executed, init switches to the
+   default runlevel as specified in /etc/inittab, usually "2".
+
+   Init then executes the /etc/init.d/rc script which takes care of
+   starting the services in /etc/rc2.d.
+
+   Because the previous runlevel is "N" (none) the /etc/rc2.d/KXXxxxx
+   scripts will NOT be executed - there is nothing to stop yet,
+   the system is busy coming up.
+
+   If for example there is a service that wants to run in runlevel 4
+   and ONLY in that level, it will place a KXXxxxx script in
+   /etc/rc{2,3,5}.d to stop the service when switching out of runlevel 4.
+   We do not need to run that script at this point.
+   
+   The /etc.rc2.d/SXXxxxx scripts will be executed in alphabetical
+   order, with the first argument set to "start".
+
+3. Switching runlevels.
+
+   When one switches from (for example) runlevel 2 to runlevel 3,
+   /etc/init.d/rc will first execute in alphabetical order all K
+   scripts for runlevel 3 (/etc/rc3.d/KXXxxxx) with as first argument
+   "stop" and then all S scripts for runlevel 3 (/etc/rc3.d/SXXxxxx)
+   with as first argument "start".
+
+   As an optimization, a check is made for each "service" to see if
+   it was already running in the previous runlevel. If it was, and there
+   is no K (stop) script present for it in the new runlevel, there is
+   no need to start it a second time so that will not be done.
+
+   On the other hand, if there was a K script present, it is assumed the
+   service was stopped on purpose first and so needs to be restarted.
+
+   We MIGHT make the same optimization for stop scripts as well-
+   if no S script was present in the previous runlevel, we can assume
+   that service was not running and we don't need to stop it either.
+   In that case we can remove the "coming from level N" special case
+   mentioned above in 2). But right now that has not been implemented.
+
+4. Single user mode.
+
+   Switching to single user mode is done by switching to runlevel 1.
+   That will cause all services to be stopped (assuming they all have
+   a K script in /etc/rc1.d). The runlevel 1 scripts will then switch
+   to runlevel "S" which has no scripts - all it does is spawn
+   a shell directly on /dev/console for maintenance.
+
+5. Halt/reboot
+
+   Going to runlevel 0 or 6 will cause the system to be halted or rebooted,
+   respectively. For example, if we go to runlevel 6 (reboot) first
+   all /etc/rc6.d/KXXxxxx scripts will be executed alphabetically with
+   "stop" as the first argument.
+
+   Then the /etc/rc6.d/SXXxxxx scripts will be executed alphabetically
+   with "stop" as the first argument as well. The reason is that there
+   is nothing to start anymore at this point - all scripts that are
+   run are meant to bring the system down.
+
+   In the future, the /etc/rc6.d/SXXxxxx scripts MIGHT be moved to
+   /etc/rc6.d/K1XXxxxx for clarity.
+
diff -Naur sysvinit-2.86/debian/sysv-rc/etc/init.d/rc sysvinit-2.86-robox-linux/debian/sysv-rc/etc/init.d/rc
--- sysvinit-2.86/debian/sysv-rc/etc/init.d/rc	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/etc/init.d/rc	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,102 @@
+#! /bin/sh
+#
+# rc		This file is responsible for starting/stopping
+#		services when the runlevel changes.
+#
+#		Optimization feature:
+#		A startup script is _not_ run when the service was
+#		running in the previous runlevel and it wasn't stopped
+#		in the runlevel transition (most Debian services don't
+#		have K?? links in rc{1,2,3,4,5} )
+#
+# Author:	Miquel van Smoorenburg <miquels@cistron.nl>
+#		Bruce Perens <Bruce@Pixar.com>
+#
+# Version:	@(#)rc  2.78  07-Nov-1999  miquels@cistron.nl
+#
+
+# Un-comment the following for debugging.
+# debug=echo
+
+#
+# Start script or program.
+#
+startup() {
+  case "$1" in
+	*.sh)
+		$debug sh "$@"
+		;;
+	*)
+		$debug "$@"
+		;;
+  esac
+}
+
+  # Ignore CTRL-C only in this shell, so we can interrupt subprocesses.
+  trap ":" INT QUIT TSTP
+
+  # Set onlcr to avoid staircase effect.
+  stty onlcr 0>&1
+
+  # Now find out what the current and what the previous runlevel are.
+
+  runlevel=$RUNLEVEL
+  # Get first argument. Set new runlevel to this argument.
+  [ "$1" != "" ] && runlevel=$1
+  if [ "$runlevel" = "" ]
+  then
+	echo "Usage: $0 <runlevel>" >&2
+	exit 1
+  fi
+  previous=$PREVLEVEL
+  [ "$previous" = "" ] && previous=N
+
+  export runlevel previous
+
+  # Is there an rc directory for this new runlevel?
+  if [ -d /etc/rc$runlevel.d ]
+  then
+	# First, run the KILL scripts.
+	if [ $previous != N ]
+	then
+		for i in /etc/rc$runlevel.d/K[0-9][0-9]*
+		do
+			# Check if the script is there.
+			[ ! -f $i ] && continue
+
+			# Stop the service.
+			startup $i stop
+		done
+	fi
+	# Now run the START scripts for this runlevel.
+	for i in /etc/rc$runlevel.d/S*
+	do
+		[ ! -f $i ] && continue
+
+		if [ $previous != N ] && [ $previous != S ]
+		then
+			#
+			# Find start script in previous runlevel and
+			# stop script in this runlevel.
+			#
+			suffix=${i#/etc/rc$runlevel.d/S[0-9][0-9]}
+			stop=/etc/rc$runlevel.d/K[0-9][0-9]$suffix
+			previous_start=/etc/rc$previous.d/S[0-9][0-9]$suffix
+			#
+			# If there is a start script in the previous level
+			# and _no_ stop script in this level, we don't
+			# have to re-start the service.
+			#
+			[ -f $previous_start ] && [ ! -f $stop ] && continue
+		fi
+		case "$runlevel" in
+			0|6)
+				startup $i stop
+				;;
+			*)
+				startup $i start
+				;;
+		esac
+	done
+  fi
+# eof /etc/init.d/rc
diff -Naur sysvinit-2.86/debian/sysv-rc/etc/init.d/rcS sysvinit-2.86-robox-linux/debian/sysv-rc/etc/init.d/rcS
--- sysvinit-2.86/debian/sysv-rc/etc/init.d/rcS	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/etc/init.d/rcS	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,72 @@
+#! /bin/sh
+#
+# rcS		Call all S??* scripts in /etc/rcS.d in
+#		numerical/alphabetical order.
+#
+# Version:	@(#)/etc/init.d/rcS  2.76  19-Apr-1999  miquels@cistron.nl
+#
+
+PATH=/sbin:/bin:/usr/sbin:/usr/bin
+runlevel=S
+prevlevel=N
+umask 022
+export PATH runlevel prevlevel
+
+#
+#	See if system needs to be setup. This is ONLY meant to
+#	be used for the initial setup after a fresh installation!
+#
+if [ -x /sbin/unconfigured.sh ]
+then
+  /sbin/unconfigured.sh
+fi
+
+#
+#	Source defaults.
+#
+. /etc/default/rcS
+export VERBOSE
+
+#
+#	Trap CTRL-C &c only in this shell so we can interrupt subprocesses.
+#
+trap ":" INT QUIT TSTP
+
+#
+#	Call all parts in order.
+#
+for i in /etc/rcS.d/S??*
+do
+	# Ignore dangling symlinks for now.
+	[ ! -f "$i" ] && continue
+
+	case "$i" in
+		*.sh)
+			# Source shell script for speed.
+			(
+				trap - INT QUIT TSTP
+				set start
+				. $i
+			)
+			;;
+		*)
+			# No sh extension, so fork subprocess.
+			$i start
+			;;
+	esac
+done
+
+#
+#	For compatibility, run the files in /etc/rc.boot too.
+#
+[ -d /etc/rc.boot ] && run-parts /etc/rc.boot
+
+#
+#	Finish setup if needed. The comment above about
+#	/sbin/unconfigured.sh applies here as well!
+#
+if [ -x /sbin/setup.sh ]
+then
+  /sbin/setup.sh
+fi
+
diff -Naur sysvinit-2.86/debian/sysv-rc/etc/init.d/README sysvinit-2.86-robox-linux/debian/sysv-rc/etc/init.d/README
--- sysvinit-2.86/debian/sysv-rc/etc/init.d/README	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/etc/init.d/README	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,21 @@
+
+	Configuration of Init under Debian GNU/Linux
+
+Most Unix versions have a file here that describes how the scripts
+in this directory work, and how the links in the /etc/rc?.d/ directories
+influence system startup/shutdown.
+
+For Debian, this information is contained in the policy manual, chapter 9.3:
+system run levels.  The home site for the Debian Policy Manual is at
+
+http://www.debian.org/doc/debian-policy/
+
+The Debian Policy Manual is also available in the Debian package
+`debian-policy'.  When this package is installed, the policy manual can be
+found in directory /usr/share/doc/debian-policy. If you have a browser
+installed you can probably read it at
+file://localhost/usr/share/doc/debian-policy/
+
+Make sure you have at least version 3.5.4.0 of the policy manual.
+
+Some more detailed info can also be found in /usr/share/doc/sysvinit.
diff -Naur sysvinit-2.86/debian/sysv-rc/etc/rcS.d/README sysvinit-2.86-robox-linux/debian/sysv-rc/etc/rcS.d/README
--- sysvinit-2.86/debian/sysv-rc/etc/rcS.d/README	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/etc/rcS.d/README	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,15 @@
+
+The scripts in this directory are executed once when booting the system,
+even when booting directly into single user mode. The files are all symbolic
+links, the real files are located in /etc/init.d/ . For a more general
+discussion of this technique, see /etc/init.d/README.
+
+The following sequence points are defined at this time:
+
+* After the S40 scripts have executed, all local file systems are mounted
+  and networking is available. All device drivers have been initialized.
+
+* After the S60 scripts have executed, the system clock has been set, NFS
+  filesystems have been mounted (unless the system depends on the automounter,
+  which is started later) and the filesystems have been cleaned.
+
diff -Naur sysvinit-2.86/debian/sysv-rc/man5/rc.boot.5 sysvinit-2.86-robox-linux/debian/sysv-rc/man5/rc.boot.5
--- sysvinit-2.86/debian/sysv-rc/man5/rc.boot.5	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/man5/rc.boot.5	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,15 @@
+.TH RC.BOOT 5 "December 26, 1997" "" "Debian GNU/Linux Manual"
+.SH NAME
+/etc/rc.boot \- directory for local or per-package boot scripts.
+.SH DESCRIPTION
+The /etc/rc.boot directory is obsolete. It has been superseded by the
+/etc/rcS.d directory. At boot time, first the /etc/rcS.d directory is scanned
+and then, for backwards compatibility, the /etc/rc.boot directory.
+.PP
+The directory \fI/etc/rc.boot\fP is scanned by the program
+\fBrun-parts\fP(8). The scripts found that have valid filenames for
+the \fBrun-parts\fP program will be run in lexical sort order of the
+filenames.
+.SH "SEE ALSO"
+run-parts(8), init(1).
+
diff -Naur sysvinit-2.86/debian/sysv-rc/man8/es/update-rc.d.8 sysvinit-2.86-robox-linux/debian/sysv-rc/man8/es/update-rc.d.8
--- sysvinit-2.86/debian/sysv-rc/man8/es/update-rc.d.8	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/man8/es/update-rc.d.8	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,206 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.\" Authors: Ian Jackson
+.\" (c) 2003 Software in the Public Interest
+
+.\" Traductor: Rubn Porras (nahoo@inicia.es)
+.\" Revisado por : Javier Fernndez-Sanguino Pea (jfs@debian.org)
+.\"		   Esteban Manchado Velzquez (zoso@demiurgo.org)
+.\" Est basada en la pgina de manual original:
+.\" versin 1.2 del CVS de /cvs/debian-doc/manpages/english/sysvinit/update-rc.d.8
+
+.TH UPDATE\-RC.D 8 "23 de Diciembre de 2003" "Proyecto Debian" "sysv-rc"
+.SH NOMBRE
+update\-rc.d \- crea y borra los enlaces a los scripts init de tipo
+System V
+.SH SINOPSIS
+.B update\-rc.d
+.RI [ -n ]
+.RI [ -f ]
+.IB nombre " remove"
+.HP
+.B update-rc.d
+.RI [ -n ]
+.IB nombre " defaults"
+.RI [ NN " | " NN-start " " NN-stop ]
+.HP
+.B update-rc.d
+.RI [ -n ]
+.I nombre
+.BR start | stop
+.IR "NN nivel_de_ejecucin nivel_de_ejecucin " ...
+.B .
+.BR start | stop
+.IR "NN nivel_de_ejecucin nivel_de_ejecucin " ...
+.BR . " ..."
+.SH DESCRIPCIN
+.B update-rc.d
+actualiza automticamente los enlaces a los scripts de init tipo
+System V que se encuentran en
+.BI /etc/rc[nivel_de_ejecucin].d/NNnombre
+y que apuntan a los script
+.BI /etc/init.d/nombre\fR.
+Estos son ejecutados por
+.B init
+cuando se cambia de nivel de ejecucin y se usan generalmente para
+arrancar y parar servicios del sistema (por ejemplo, demonios).
+.I nivel_de_ejecucin
+es uno de los soportados por
+.BR init ", " 0123456789S ,
+y
+.I NN
+es el cdigo de secuencia de dos dgitos usado por
+.B init
+para decidir en que orden se ejecutan los scripts.
+
+Esta pgina del manual documenta slo el modo de uso y comportamiento de
+.BR update-rc.d .
+Para una explicacin ms detallada sobre la administracin de los
+scripts de init estilo System V, por favor, lea
+.BR init (8)
+y las 
+.IR "Manual de normativa de Debian" .
+.SH CREACIN DE ENLACES A LOS SCRIPTS DE INIT
+Cuando se ejecuta con una o varias de las opciones
+.BR defaults ", " start ", o " stop  ,
+.B update-rc.d
+crea los enlaces
+.BI /etc/rc[nivel_de_ejecucin].d/[SK]NNnombre
+apuntando al script
+.BI /etc/init.d/nombre\fR.
+
+Si ya existe algn fichero con el nombre
+.BI /etc/rc[nivel_de_ejecucin].d/[SK]??
+entonces
+.B update-rc.d
+no hace nada. Esto es as para que el administrador del sistema pueda
+reorganizar los enlaces ( teniendo en cuenta que debe de dejar al
+menos un enlace si los quiere eliminar ) sin que se sobreescriba su
+configuracin.
+
+Si se usa la opcin
+.B defaults
+entonces
+.B update-rc.d
+crear enlaces para arrancar los servicios en los niveles de ejecucin
+.B 2345
+y parar los servicios en los niveles de ejecucin
+.BR 016 .
+Por omisin todos los enlaces tendrn el cdigo de secuencia 20, pero
+esto puede cambiarse especificando uno o dos argumentos
+.I NN.
+Un argumento cambia el valor por omisin del cdigo de secuencia tanto
+para los enlaces de arranque como para los de parada, y si se
+proporcionan dos argumentos el primero cambia el cdigo de los enlaces
+de arranque y el segundo el de los enlaces de parada.
+
+En vez de usar
+.B defaults
+, los niveles de ejecucin en los que se arranca o se para un servicio
+pueden ser especificados explcitamente mediante un conjunto de
+argumentos:
+
+Cada uno de estos conjuntos empieza con un argumento
+.BR start " o " stop
+para especificar cundo se van a crear enlaces para arrancar o parar
+el servicio.
+
+Luego les sigue
+.IR NN ,
+el cdigo de secuencia para todos los enlaces del conjunto, y uno o
+ms nmeros de nivel de ejecucin, cada uno como un solo argumento. El
+conjunto se termina con el argumento
+.B '.'
+(un punto).
+
+Cuando se especifican explcitamente los niveles de ejecucin,
+normalmente habr un conjunto
+.B start
+y otro
+.B stop .
+Si son necesarios diferentes cdigos de secuencia para los
+distintos niveles de ejecucin, entonces es necesario especificar
+varios conjuntos
+.B start
+y
+.B stop .
+
+El script
+.BI /etc/init.d/nombre
+debe existir antes de ejecutar
+.B update-rc.d
+para crear los enlaces.
+.SH BORRADO DE LOS SCRIPTS
+Cuando se ejecuta con la opcin
+.I remove
+, update-rc.d borra todos los enlaces dentro del directorio
+.BI /etc/rc[nivel_de_ejecucin].d
+que apunten al script
+.BI /etc/init.d/nombre\fR .
+El script debe haber sido borrado previamente (
+.B update-rc.d
+lo comprueba ).
+Normalmente los scripts post-eliminacin de los paquetes ejecutan
+.B update-rc.d
+cuando detectan que su primer argumento es
+.BR purge 
+, dado que esto indica que el administrador ha pedido explcitamente
+que se borren los scripts de configuracin proporcionados por el paquete.
+
+Cualquier fichero en los directorios
+.BI /etc/rc[nivel_de_ejecucin].d
+que no sea un enlace simblico apuntando a un script en
+.BI /etc/init.d/nombre
+se mantendr intacto.
+.SH OPCIONES
+.TP
+.I -n
+No hacer nada, solamente indicar que hubiera hecho.
+.TP
+.I -f
+Borrar los enlaces incluso si todava existe el script
+.BI /etc/init.d/nombre .
+.SH EJEMPLOS
+Crear los enlaces usando los parmetros por omisin:
+.nf
+.B    update-rc.d foobar defaults
+.fi
+Comando equivalente usando explcitamente un conjunto de argumentos:
+.nf
+.B    update-rc.d foobar start 20 2 3 4 5 . stop 20 0 1 6 .
+.fi
+.SH FALLOS
+
+No existe an una forma para que el administrador pueda especificar al menos
+los niveles de ejecucin que
+.B update-rc.d
+usar por defecto para arrancar y parar los servicios cuando se
+utilice la opcin
+.B defaults
+ni la posibilidad de cambiar otros comportamientos.
+.SH FICHEROS
+.TP
+.B /etc/init.d/
+El directorio que contienen los scripts de arranque y parada.
+.TP
+.B /etc/rc?.d/
+Los directorios que contienen los enlaces usados por
+.BR init
+y administrados por
+.BR update-rc.d .
+.TP
+.B /etc/init.d/skeleton
+Un modelo a usar por los que escriban scripts de
+.B init.d .
+
+.SH VER ADEMS
+.IR "Manual de normativa de Debian"
+, modelo a usar por los que escriban scripts de
+.B init.d .
+
+.BR /etc/init.d/skeleton
+,
+.br
+.BR init (8) .
+
+.SH TRADUCTOR
+Traduccin de Rubn Porras Campo <debian-l10n-spanish@lists.debian.org>
diff -Naur sysvinit-2.86/debian/sysv-rc/man8/fr/update-rc.d.8 sysvinit-2.86-robox-linux/debian/sysv-rc/man8/fr/update-rc.d.8
--- sysvinit-2.86/debian/sysv-rc/man8/fr/update-rc.d.8	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/man8/fr/update-rc.d.8	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,192 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.\" Authors: Ian Jackson
+.\" Traduction de la rvision CVS 1.4
+.TH UPDATE\-RC.D 8 "23 dcembre 2003" "Projet Debian " "Utilitaires de dpkg"
+.SH NOM
+update\-rc.d \- Pour installer ou supprimer les liens vers les scripts d'
+initialisation de type System-V 
+.SH SYNOPSIS
+.B update\-rc.d
+.RI [ -n ]
+.RI [ -f ]
+.IB nom " remove"
+.HP
+.B update-rc.d
+.RI [ -n ]
+.IB nom " defaults"
+.RI [ NN " | " NN-start " " NN-stop ]
+.HP
+.B update-rc.d
+.RI [ -n ]
+.I nom
+.BR start | stop
+.IR "NN runlevel runlevel " ...
+.B .
+.BR start | stop
+.IR "NN runlevel runlevel " ...
+.BR . " ..."
+.SH DESCRIPTION
+.B update-rc.d
+met  jour automatiquement les liens vers les scripts d'initialisation de type
+System-V dont le nom est
+.BI /etc/rc runlevel .d/ NNnom
+vers les scripts
+.BI /etc/init.d/ name \fR.
+Ils sont lancs par
+.B init
+quand on change de niveau de fonctionnement et ils sont gnralement utiliss 
+pour dmarrer ou arrter des services tels que les dmons.
+.I runlevel
+est l'un des niveaux de fonctionnement autoriss par
+.BR init ", " 0123456789S ,
+et
+.I NN
+est le code  deux chiffres utilis par
+.B init
+pour dcider de l'ordre d'excution des scripts.
+
+Cette page de manuel documente seulement le comportement de
+.BR update-rc.d 
+et son utilisation.
+Pour une discussion sur la prparation des scripts pour l'initialisation de type System-V voyez
+.BR init (8)
+et la
+.IR "charte Debian" .
+.SH L'INSTALLATION DES LIENS DES SCRIPTS D'INITIALISATION
+Quand update-rc.d est lanc avec les options
+.BR defaults ", " start ", ou " stop,
+il cre les liens
+.BI /etc/rc runlevel .d/[SK] NNname
+qui pointent vers le script
+.BI /etc/init.d/ name\fR.
+
+Quand des fichiers
+.BI /etc/rc runlevel .d/[SK]?? name
+existent dj, 
+.B update-rc.d
+ne fait rien.  C'est ainsi pour que l'administrateur systme puisse
+rarranger les liens --  condition qu'il en reste au moins un -- sans
+que sa configuration ne soit rcrite.  
+
+Quand l'option
+.B defaults
+est utilise,
+.B update-rc.d
+cre des liens pour dmarrer un service dans les niveaux de fonctionnement
+.B 2345
+et des liens pour arrter un service dans les niveaux 
+.BR 016 .
+Par dfaut, tous les liens ont un code gal  20, mais on peut le changer en
+donnant un ou deux arguments
+.I NN ;
+quand un seul argument est donn, il remplace le code  la fois pour les 
+liens de dmarrage (start) et pour les liens d'arrt (stop) ; quand deux 
+arguments sont donns, le premier remplace le code pour les liens de 
+dmarrage (start) et le second remplace le code pour les liens d'arrt (stop).
+
+Au lieu de
+.B defaults,
+on peut indiquer les niveaux de fonctionnement dans lesquels lancer ou 
+arrter les services en utilisant une suite explicite d'ensembles d'arguments :
+
+Chacun de ces ensembles commence par un argument
+.BR start " ou " stop
+de manire  indiquer s'il faut crer des liens de dmarrage ou d'arrt.
+Ensuite vient le nombre du code
+.IR NN ,
+pour tous les liens de cet ensemble, puis un ou plusieurs nombres indiquant
+le niveau de fonctionnement, un seul argument pour chacun. l'ensemble se
+termine par un argument
+.B .
+(un simple point).
+
+Quand, plutt que
+.BR defaults,
+on utilise une dtermination explicite, il faut habituellement un ensemble de
+dmarrage
+.B start, 
+et un ensemble d'arrt
+.B stop.
+Quand on veut diffrents codes dans les diffrents niveaux de fonctionnement,
+on peut spcifier diffrents ensembles de dmarrage
+.B start
+ou diffrents ensembles d'arrt
+.B stop.
+
+Le script
+.BI /etc/init.d/ name
+doit exister avant de lancer
+.B update-rc.d
+pour crer les liens.
+.SH LA SUPPRESSION DES SCRIPTS
+Quand on appelle update-rc.d avec l'option
+.I remove
+les liens dans les rpertoires
+.BI /etc/rc runlevel .d
+qui pointent vers le script
+.BI /etc/init.d/ name\fR.
+sont supprims.
+Ce script doit dj avoir t supprim --
+.B update-rc.d
+vrifie cela.
+On appelle habituellement
+.B update-rc.d
+dans le script  post-removal  d'un paquet et quand ce script a dtect que
+son premier argument tait 
+.BR purge ; 
+Cela indique que l'utilisateur a demand le suppression de la configuration de
+ce paquet.
+Tout fichier dans les rpertoires
+.BI /etc/rc runlevel .d
+qui n'est pas un lien symbolique vers le script
+.BI /etc/init.d/ name
+est prserv.
+.SH OPTIONS
+.TP
+.I -n
+Ne fait rien, montre seulement ce qui pourrait tre fait.
+.TP
+.I -f
+Force la suppression des liens mme si
+.BI /etc/init.d/ name
+existe encore.
+.SH EXEMPLES
+Insre des liens avec l'option  defaults  :
+.nf
+.B "   update-rc.d foobar defaults"
+.fi
+La mme commande, avec une dtermination explicite utilisant les ensembles 
+d'arguments :
+.nf
+.B "   update-rc.d foobar start 20 2 3 4 5 . stop 20 0 1 6 ."
+.fi
+.SH BOGUES
+
+Il devrait y avoir un moyen pour l'administrateur systme d'indiquer 
+l'option 
+.B defaults
+au moins les niveaux de fonctionnement par dfaut  utiliser pour le 
+dmarrage et l'arrt des services ; l'administrateur systme  devrait sans
+doute aussi pouvoir changer d'autres choses.
+.SH FICHIERS
+.TP
+.B /etc/init.d/
+Le rpertoire qui contient en fait les scripts d'initialisation.
+.TP
+.B /etc/rc?.d/
+Le rpertoire qui contient les liens utiliss par
+.BR init
+et grs par
+.BR update-rc.d.
+.TP
+.B /etc/init.d/skeleton
+Modle pour l'criture des scripts de
+.B init.d.
+.SH VOIR AUSSI
+.IR "la charte Debian" ,
+.br
+.BR /etc/init.d/skeleton ,
+.br
+.BR init (8).
+.SH TRADUCTION
+Philippe Batailler. Dec 2000.
diff -Naur sysvinit-2.86/debian/sysv-rc/man8/invoke-rc.d.8 sysvinit-2.86-robox-linux/debian/sysv-rc/man8/invoke-rc.d.8
--- sysvinit-2.86/debian/sysv-rc/man8/invoke-rc.d.8	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/man8/invoke-rc.d.8	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,225 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.\" Authors: Henrique Holschuh
+.TH INVOKE\-RC.D 8 "1 March 2001" "Debian Project" "Debian/GNU Linux"
+.SH NAME
+invoke\-rc.d \- executes System-V style init script actions
+.SH SYNOPSIS
+.B invoke\-rc.d
+.RI [ --quiet ]
+.RI [ --force ]
+.RI [ --try-anyway ]
+.RI [ --disclose-deny ]
+.RI [ --query ]
+.RI [ --no-fallback ]
+.I name
+.I action
+.RI [ init\ script\ parameters... ]
+.HP
+.B invoke\-rc.d
+.RI [ --help ]
+.HP
+.SH DESCRIPTION
+.B invoke\-rc.d
+is a generic interface to execute System V style init script
+.BI /etc/init.d/ name \fR 
+actions, obeying runlevel constraints as well as any local
+policies set by the system administrator.
+
+All access to the init scripts by Debian packages' maintainer 
+scripts should be done through
+.B invoke\-rc.d\fR.
+
+This manpage documents only the usage and behavior of
+.BR invoke\-rc.d .
+For a discussion of the System V style init script arrangements please
+see
+.BR init (8)
+and the
+.IR "dpkg programmers' manual" .
+More information on invoke-rc.d can be found in the section on
+runlevels and init.d scripts of the
+.IR "debian policy manual" .
+
+.SH INIT SCRIPT ACTIONS
+The standard actions are:
+.IR start ,
+.IR stop ,
+.IR force\-stop ,
+.IR restart ,
+.IR reload ,
+.IR force\-reload ,
+and
+.IR status .
+Other actions are accepted, but they can cause problems to
+.B policy\-rc.d
+(see the
+.B INIT SCRIPT POLICY
+section), so warnings are generated if the policy layer
+is active.
+
+Please note that not all init scripts will implement all
+the actions listed above, and that the policy layer may
+override an action to another action(s), or even deny it.
+
+Any extra init script parameters will be passed to the 
+init script(s) being executed.
+
+If an action must be carried out regardless of any local
+policies, use the
+.IR --force
+switch.
+
+.SH OPTIONS
+.TP
+.I --help
+Display usage help.
+.TP
+.I --quiet
+Quiet mode, no error messages are generated.
+.TP
+.I --force
+Tries to run the init script regardless of policy and
+init script subsystem errors.
+.B Use of this option in Debian maintainer scripts is severely discouraged.
+.TP
+.I --try-anyway
+Tries to run the init script if a non-fatal error is
+detected.
+.TP
+.I --disclose-deny
+Return status code 101 instead of status code 0 if
+the init script action is denied by the policy layer.
+.TP
+.I --query
+Returns one of the status codes 100-106. Does not
+run the init script, and implies
+.IR --disclose-deny
+and 
+.IR --no-fallback .
+.TP
+.I --no-fallback
+Ignores any fallback action requests by the policy
+layer.
+.B Warning:
+this is usually a very bad idea for any actions other
+than
+.RI start .
+.SH STATUS CODES
+Should an init script be executed, 
+.B invoke\-rc.d 
+always returns the status code
+returned by the init script. Init scripts should not return status codes in
+the 100+ range (which is reserved in Debian and by the LSB). The status codes
+returned by invoke\-rc.d proper are:
+.TP
+0
+.IR Success . 
+Either the init script was run and returned exit status 0 (note
+that a fallback action may have been run instead of the one given in the
+command line), or it was not run because of runlevel/local policy constrains
+and
+.B --disclose-deny 
+is not in effect.
+.TP
+1 - 99
+Reserved for init.d script, usually indicates a failure.
+.TP
+100
+.B Init script ID
+.BI ( name )
+.BR unknown .
+This means the init script was not registered successfully through
+.B update\-rc.d
+or that the init script does not exist.
+.TP
+101
+.B Action not allowed\fR.
+The requested action will not be performed because of runlevel or local
+policy constraints.
+.TP
+102
+.B Subsystem error\fR.
+Init script (or policy layer) subsystem malfunction. Also, forced
+init script execution due to 
+.I --try-anyway 
+or 
+.I --force
+failed\fR.
+.TP
+103
+.I Syntax error\fR.
+.TP
+104
+.I Action allowed\fR.
+Init script would be run, but 
+.B --query
+is in effect.
+.TP
+105
+.I Behavior uncertain\fR.
+It cannot be determined if action should be carried out or not, and 
+.B --query
+is in effect.
+.TP
+106
+.I Fallback action requested\fR.
+The policy layer denied the requested action, and
+supplied an allowed fallback action to be used instead.
+
+.SH INIT SCRIPT POLICY
+.B invoke\-rc.d
+introduces the concept of a policy layer which is used to verify if
+an init script should be run or not, or if something else should be
+done instead.  This layer has various uses, the most immediate ones
+being avoiding that package upgrades start daemons out-of-runlevel,
+and that a package starts or stops daemons while inside a chroot 
+jail.
+
+The policy layer has the following abilities: deny or approve the
+execution of an action; request that another action (called a
+.IR fallback )
+is to be taken, instead of the action requested in invoke\-rc.d's 
+command line; or request multiple actions to be tried in order, until
+one of them succeeds (a multiple
+.IR fallback ).
+
+.B invoke\-rc.d
+itself will only pay attention to the current runlevel, and block
+any tries to start an init script in a runlevel it is not configured
+to be started at.  Other policies are implemented with the use of
+the
+.B policy\-rc.d
+helper, and are only available if
+.B /usr/sbin/policy\-rc.d
+is installed in the system.
+
+.SH FILES
+.TP
+.BR /etc/init.d/* 
+System V init scripts.
+.TP
+.BR /usr/sbin/policy\-rc.d
+Init script policy layer helper (not required).
+.TP
+.BR /etc/runlevel.conf
+file-rc runlevel configuration (if the file-rc package is 
+being used).
+.TP
+.BR /etc/rc?.d/*
+System V runlevel configuration (if the file-rc package is
+not being used).
+
+.SH BUGS
+Please report any bugs using the Debian bug tracking system,
+http://bugs.debian.org/, packages sysv\-rc or file\-rc 
+(depending on which version of invoke\-rc.d you are using).
+.SH SEE ALSO
+.IR "dpkg programmers manual" ,
+.br
+.BR /etc/init.d/skeleton ,
+.br
+.BR update\-rc.d (8),
+.br
+.BR init (8),
+.br
+.BR /usr/share/doc/sysv-rc/README.policy-rc.d
diff -Naur sysvinit-2.86/debian/sysv-rc/man8/ja/update-rc.d.8 sysvinit-2.86-robox-linux/debian/sysv-rc/man8/ja/update-rc.d.8
--- sysvinit-2.86/debian/sysv-rc/man8/ja/update-rc.d.8	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/man8/ja/update-rc.d.8	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,193 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.\" Authors: Ian Jackson
+.\" Original manpage cvs revision 1.4
+.TH UPDATE\-RC.D 8 "2 March 1998" "Debian Project" "dpkg utilities"
+.SH 
+update\-rc.d \- System-V  init 
+.SH 
+.B update\-rc.d
+.RI [ -n ]
+.RI [ -f ]
+.IB name " remove"
+.HP
+.B update-rc.d
+.RI [ -n ]
+.RI [ -f ]
+.IB name " defaults"
+.RI [ NN " | " NN-start " " NN-stop ]
+.HP
+.B update-rc.d
+.RI [ -n ]
+.RI [ -f ]
+.I name
+.BR start | stop
+.IR "NN runlevel runlevel " ...
+.B .
+.BR start | stop
+.IR "NN runlevel runlevel " ...
+.BR . " ..."
+.SH 
+.B update-rc.d
+
+
+.BI /etc/init.d/ name \fR
+
+.BI /etc/rc runlevel .d/ NNname
+
+.BI /etc/rc runlevel .d/ NNname 
+ System V  init 
+
+.B init
+
+
+.I runlevel
+
+.BR init 
+
+.BR 0123456789S
+
+.I NN
+ 2 
+.B init
+
+
+
+.BR update-rc.d 
+
+System V  init 
+.BR init (8)
+
+.IR "dpkg programmers' manual" 
+
+.SH INIT 
+.BR defaults ", " start ", " stop
+
+update-rc.d 
+.BI /etc/rc runlevel .d/[SK] NNname
+
+.BI /etc/init.d/ name\fR
+
+
+
+.BI /etc/rc runlevel .d/[SK]?? name
+
+.B update-rc.d
+
+
+
+
+.B defaults
+
+.B update-rc.d
+
+.B 2345
+
+.BR 016
+
+ 20 
+.I NN
+
+
+
+
+
+
+.B defaults
+
+
+
+
+.BR start "  " stop
+
+
+
+.IR NN
+
+
+.B .
+()
+
+.BR defaults
+
+.B start
+
+.B stop
+
+
+
+.B start
+
+.B stop
+
+
+.B update-rc.d
+
+
+.BI /etc/init.d/ name
+
+.SH 
+.I remove
+
+.BI /etc/rc runlevel .d
+
+.BI /etc/init.d/ name\fR
+
+
+.B update-rc.d
+
+.B update-rc.d
+ postrm 
+postrm 1
+.BR purge
+
+
+.BI /etc/rc runlevel .d
+
+.BI /etc/init.d/ name
+
+.SH 
+.TP
+.I -n
+
+.TP
+.I -f
+.BI /etc/init.d/ name
+
+.SH 
+defaults 
+.nf
+.B "   update-rc.d foobar defaults"
+.fi
+
+.nf
+.B "   update-rc.d foobar start 20 2 3 4 5 . stop 20 0 1 6 ."
+.fi
+.SH 
+
+.B defaults
+ start  stop 
+
+.B defaults
+
+.SH 
+.TP
+.B /etc/init.d/
+init 
+.TP
+.B /etc/rc?.d/
+.BR update-rc.d
+
+.BR init
+
+.TP
+.B /etc/init.d/skeleton
+.B init.d
+
+.SH 
+.IR "dpkg programmers manual" ,
+.br
+.BR /etc/init.d/skeleton ,
+.br
+.BR init (8).
+.SH 
+  <nabetani@kern.phys.sci.osaka-u.ac.jp>
diff -Naur sysvinit-2.86/debian/sysv-rc/man8/update-rc.d.8 sysvinit-2.86-robox-linux/debian/sysv-rc/man8/update-rc.d.8
--- sysvinit-2.86/debian/sysv-rc/man8/update-rc.d.8	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/man8/update-rc.d.8	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,182 @@
+.\" Hey, Emacs!  This is an -*- nroff -*- source file.
+.\" Authors: Ian Jackson, Miquel van Smoorenburg
+.TH UPDATE\-RC.D 8 "23 December 2003" "Debian Project" "sysv-rc"
+.SH NAME
+update\-rc.d \- install and remove System-V style init script links
+.SH SYNOPSIS
+.B update\-rc.d
+.RI [ -n ]
+.RI [ -f ]
+.IB name " remove"
+.HP
+.B update-rc.d
+.RI [ -n ]
+.IB name " defaults"
+.RI [ NN " | " NN-start " " NN-stop ]
+.HP
+.B update-rc.d
+.RI [ -n ]
+.I name
+.BR start | stop
+.IR "NN runlevel runlevel " ...
+.B .
+.BR start | stop
+.IR "NN runlevel runlevel " ...
+.BR . " ..."
+.SH DESCRIPTION
+.B update-rc.d
+automatically updates the System V style init script links
+.BI /etc/rc runlevel .d/ NNname
+to scripts
+.BI /etc/init.d/ name \fR.
+These are run by
+.B init
+when changing runlevels and are generally used to start and stop
+system services such as daemons.
+.I runlevel
+is one of the runlevels supported by
+.BR init ", " 0123456789S ,
+and
+.I NN
+is the two-digit sequence code used by
+.B init
+to decide which order to run the scripts in.
+
+This manpage documents only the usage and behaviour of
+.BR update-rc.d .
+For a discussion of the System V style init script arrangements please
+see
+.BR init (8)
+and the
+.IR "Debian Policy Manual" .
+.SH INSTALLING INIT SCRIPT LINKS
+When run with either the
+.BR defaults ", " start ", or " stop
+options, update-rc.d makes links
+.BI /etc/rc runlevel .d/[SK] NNname
+pointing to the script
+.BI /etc/init.d/ name\fR,
+
+If any files
+.BI /etc/rc runlevel .d/[SK]?? name
+already exist then
+.B update-rc.d
+does nothing.  This is so that the system administrator can rearrange
+the links, provided that they leave at least one link remaining,
+without having their configuration overwritten.
+
+If
+.B defaults
+is used then
+.B update-rc.d
+will make links to start the service in runlevels
+.B 2345
+and stop the service in runlevels
+.BR 016 .
+By default all the links will have sequence code 20, but
+this can be overridden by supplying one or two
+.I NN
+arguments; one argument overrides the sequence code for both start and
+stop links whereas of two arguments the first overrides the code for
+start links and the second that for stop links.
+
+Instead of
+.B defaults
+the runlevels in which to start and stop the service may be specified
+explicitly using a series of sets of arguments:
+
+Each of these sets starts with an argument
+.BR start " or " stop
+to specify whether start or stop links are to be created by that set.
+Then follows
+.IR NN ,
+the sequence code number for all the links in the set, and one or more
+runlevel numbers as a single argument each.  The set is terminated by
+an argument
+.B .
+(a single full stop).
+
+When explicit specification, rather than
+.BR defaults ,
+is used there will usually be one
+.B start
+and one
+.B stop
+set.  If different sequence codes are required in different runlevels
+then several 
+.B start
+sets or several
+.B stop
+sets may be specified.
+
+The script
+.BI /etc/init.d/ name
+must exist before
+.B update-rc.d
+is run to create the links.
+.SH REMOVING SCRIPTS
+When invoked with the
+.I remove
+option, update-rc.d removes any links in the
+.BI /etc/rc runlevel .d
+directories to the script
+.BI /etc/init.d/ name\fR.
+The script must have been deleted already -
+.B update-rc.d
+checks for this.
+.B update-rc.d
+is usually called from a package's post-removal script when that
+script detects that its first argument is
+.BR purge ,
+indicating that the user has requested the configuration for the
+package to be removed.
+Any files in the
+.BI /etc/rc runlevel .d
+directories that are not symbolic links to the script
+.BI /etc/init.d/ name
+will be left untouched.
+.SH OPTIONS
+.TP
+.I -n
+Don't do anything, just show what we would do.
+.TP
+.I -f
+Force removal of symlinks even if
+.BI /etc/init.d/ name
+still exists.
+.SH EXAMPLES
+Insert links using the defaults:
+.nf
+.B "   update-rc.d foobar defaults"
+.fi
+Equivalent command using explicit argument sets:
+.nf
+.B "   update-rc.d foobar start 20 2 3 4 5 . stop 20 0 1 6 ."
+.fi
+.SH BUGS
+
+There should be a way for the system administrator to specify at least
+the default start and stop runlevels to be used by
+.B defaults
+and possibly to override other things as well.
+.SH FILES
+.TP
+.B /etc/init.d/
+The directory containing the actual init scripts.
+.TP
+.B /etc/rc?.d/
+The directories containing the links used by
+.BR init
+and managed by
+.BR update-rc.d .
+.TP
+.B /etc/init.d/skeleton
+Model for use by writers of
+.B init.d
+scripts.
+.SH SEE ALSO
+.IR "Debian Policy Manual" ,
+.br
+.BR /etc/init.d/skeleton ,
+.br
+.BR init (8).
diff -Naur sysvinit-2.86/debian/sysv-rc/postinst sysvinit-2.86-robox-linux/debian/sysv-rc/postinst
--- sysvinit-2.86/debian/sysv-rc/postinst	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/postinst	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,20 @@
+#! /bin/sh
+#
+# debian.postinst
+#
+# Version:	debian.postinst  2.85-5  21-Jul-2003  miquels@cistron.nl
+#
+
+
+case "$1" in
+	configure)
+		oldver=$2
+		;;
+	abort-upgrade|abort-remove|abort-deconfigure)
+		exit 0
+		;;
+esac
+umask 022
+
+exit 0
+
diff -Naur sysvinit-2.86/debian/sysv-rc/postrm sysvinit-2.86-robox-linux/debian/sysv-rc/postrm
--- sysvinit-2.86/debian/sysv-rc/postrm	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/postrm	2010-06-14 14:07:20.679397945 +0200
@@ -0,0 +1,21 @@
+#! /bin/sh
+#
+# debian.postrm
+#
+# Version:	debian.postrm  2.85-3  23-Apr-2003  miquels@cistron.nl
+#
+ 
+case "$1" in
+	remove)
+		;;
+	*)
+		exit 0
+		;;
+esac
+umask 022
+
+set -e
+
+ln -sf /usr/share/sysvinit/update-rc.d /usr/sbin/update-rc.d
+ln -sf /usr/share/sysvinit/update-rc.d /usr/sbin/invoke-rc.d
+
diff -Naur sysvinit-2.86/debian/sysv-rc/saveconfig sysvinit-2.86-robox-linux/debian/sysv-rc/saveconfig
--- sysvinit-2.86/debian/sysv-rc/saveconfig	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/saveconfig	2010-06-14 14:07:20.689409133 +0200
@@ -0,0 +1,64 @@
+#! /usr/bin/perl
+#
+# saveconfig	Print out the configuration of the current /etc/rc?.d
+#		symlink setup, in a format compatible to the
+#		"update-rc.d" command line.
+#
+# Author:	Miquel van Smoorenburg <miquels@cistron.nl>
+#
+
+chdir "/etc/init.d";
+
+sub scan {
+	my $dir = shift;
+	local *DD;
+	my $f;
+	opendir DD, $dir;
+	foreach $f (readdir DD) {
+		next if ($f =~ m/^\./);
+		push @{$dir{$dir}}, $f;
+	}
+	closedir DD;
+}
+
+foreach my $d (qw(S 0 1 2 3 4 5 6 7 8 9)) {
+	scan("/etc/rc$d.d");
+}
+scan("/etc/init.d");
+
+foreach my $s (@{$dir{"/etc/init.d"}}) {
+	my %start;
+	my %stop;
+	my $start = 0;
+	my $stop = 0;
+	foreach my $l (qw(S 0 1 2 3 4 5 6)) {
+		#print "L: $l\n";
+		foreach my $f (@{$dir{"/etc/rc$l.d"}}) {
+			#print "F: $f\n";
+			if ($f =~ m#^S(\d+)$s$#) {
+				$start{$1} .= "$l ";
+				$start = 1;
+			}
+			if ($f =~ m#^K(\d+)$s$#) {
+				$stop{$1} .= "$l ";
+				$stop = 1;
+			}
+		}
+	}
+
+	print "$s " if ($start || $stop);
+	if ($start > 0) {
+		print "start ";
+		foreach my $x (sort keys %start) {
+			print "$x ", $start{$x}, ". ";
+		}
+	}
+	if ($stop > 0) {
+		print "stop ";
+		foreach my $x (sort keys %stop) {
+			print "$x ", $stop{$x}, ". ";
+		}
+	}
+	print "\n" if ($start || $stop);
+}
+
diff -Naur sysvinit-2.86/debian/sysv-rc/sbin/invoke-rc.d sysvinit-2.86-robox-linux/debian/sysv-rc/sbin/invoke-rc.d
--- sysvinit-2.86/debian/sysv-rc/sbin/invoke-rc.d	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/sbin/invoke-rc.d	2010-06-14 14:07:20.689409133 +0200
@@ -0,0 +1,449 @@
+#!/bin/sh  
+#
+# invoke-rc.d.sysvinit - Executes initscript actions
+# $Id: invoke-rc.d,v 1.10 2001/02/27 02:33:53 hmh Exp $
+#
+# SysVinit /etc/rc?.d version for Debian's sysvinit package
+#
+# invoke-rc.d.sysvinit - Executes initscript actions
+# Copyright (C) 2000,2001 Henrique de Moraes Holschuh <hmh@debian.org>
+#
+# This program is free software; you can redistribute it and/or modify it
+# under the terms of the GNU General Public License as published by the Free
+# Software Foundation; either version 2 of the License, or (at your option)
+# any later version.
+#
+# This program is distributed in the hope that it will be useful, but
+# WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
+# or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
+# for more details.
+#
+# You should have received a copy of the GNU General Public License along
+# with this program; if not, write to the Free Software Foundation, Inc., 59
+# Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+# Constants
+RUNLEVEL=/sbin/runlevel
+POLICYHELPER=/usr/sbin/policy-rc.d
+INITDPREFIX=/etc/init.d/
+RCDPREFIX=/etc/rc
+
+# Options
+BEQUIET=
+MODE=
+ACTION=
+FALLBACK=
+NOFALLBACK=
+FORCE=
+RETRY=
+RETURNFAILURE=
+RC=
+
+# Shell options
+set +e
+
+dohelp () {
+ # 
+ # outputs help and usage
+ #
+cat <<EOF
+
+invoke-rc.d, Debian/SysVinit (/etc/rc?.d) initscript subsystem.
+Copyright (c) 2000,2001 Henrique de Moraes Holschuh <hmh@debian.org>
+
+Usage:
+  invoke-rc.d [options] <basename> <action> [extra parameters]
+
+  basename - Initscript ID, as per update-rc.d(8)
+  action   - Initscript action. Known actions are:
+                start, [force-]stop, restart,
+                [force-]reload, status
+  WARNING: not all initscripts implement all of the above actions.
+
+  extra parameters are passed as is to the initscript, following 
+  the action (first initscript parameter).
+
+Options:
+  --quiet
+     Quiet mode, no error messages are generated.
+  --force
+     Try to run the initscript regardless of policy and subsystem
+     non-fatal errors.
+  --try-anyway
+     Try to run init script even if a non-fatal error is found.
+  --disclose-deny
+     Return status code 101 instead of status code 0 if
+     initscript action is denied by local policy rules or
+     runlevel constrains.
+  --query
+     Returns one of status codes 100-106, does not run
+     the initscript. Implies --disclose-deny and --no-fallback.
+  --no-fallback
+     Ignores any fallback action requests by the policy layer.
+     Warning: this is usually a very *bad* idea for any actions
+     other than "start".
+  --help
+     Outputs help message to stdout
+
+EOF
+}
+
+printerror () {
+ #
+ # prints an error message
+ #  $* - error message
+ #
+if test x${BEQUIET} = x ; then
+    echo `basename $0`: "$*" >&2
+fi
+}
+
+formataction () {
+ #
+ # formats a list in $* into $printaction
+ # for human-friendly printing to stderr
+ # and sets $naction to action or actions
+ #
+printaction=`echo $* | sed 's/ /, /g'`
+if test $# -eq 1 ; then
+    naction=action
+else
+    naction=actions
+fi
+}
+
+querypolicy () {
+ #
+ # queries policy database
+ # returns: $RC = 104 - ok, run
+ #          $RC = 101 - ok, do not run
+ #        other - exit with status $RC, maybe run if $RETRY
+ #          initial status of $RC is taken into account.
+ #
+
+policyaction="${ACTION}"
+if test x${RC} = "x101" ; then
+    if test "${ACTION}" = "start" || test "${ACTION}" = "restart" ; then
+	policyaction="(${ACTION})"
+    fi
+fi
+
+if test "x${POLICYHELPER}" != x && test -x "${POLICYHELPER}" ; then
+    FALLBACK=`${POLICYHELPER} ${BEQUIET} ${INITSCRIPTID} "${policyaction}" ${RL}`
+    RC=$?
+    formataction ${ACTION}
+    case ${RC} in
+	0)   RC=104
+	     ;;
+	1)   RC=105
+	     ;;
+	101) if test x${FORCE} != x ; then
+		printerror Overriding policy-rc.d denied execution of ${printaction}.
+		RC=104
+	     fi
+	     ;;
+    esac
+    if test x${MODE} != xquery ; then
+      case ${RC} in
+	105) printerror policy-rc.d query returned \"behaviour undefined\",
+	     printerror assuming \"${printaction}\" is allowed.
+	     RC=104
+	     ;;
+	106) formataction ${FALLBACK}
+	     if test x${FORCE} = x ; then
+		 if test x${NOFALLBACK} = x ; then
+		     ACTION="${FALLBACK}"
+		     printerror executing ${naction} \"${printaction}\" instead due to policy-rc.d request.
+		     RC=104
+		 else
+		     printerror ignoring policy-rc.d fallback request: ${printaction}.
+		     RC=101
+		 fi
+	     else
+		 printerror ignoring policy-rc.d fallback request: ${printaction}.
+		 RC=104
+	     fi
+	     ;;
+      esac
+    fi
+    case ${RC} in
+      100|101|102|103|104|105|106) ;;
+      *) printerror WARNING: policy-rc.d returned unexpected error status ${RC}, 102 used instead.
+         RC=102
+	 ;;
+    esac
+else
+    if test x${RC} = x ; then 
+	RC=104
+    fi
+fi
+return
+}
+
+verifyparameter () {
+ #
+ # Verifies if $1 is not null, and $# = 1
+ #
+if test $# -eq 0 ; then
+    printerror syntax error: invalid empty parameter
+    exit 103
+elif test $# -ne 1 ; then
+    printerror syntax error: embedded blanks are not allowed in \"$*\"
+    exit 103
+fi
+return
+}
+
+##
+##  main
+##
+
+## Verifies command line arguments
+
+if test $# -eq 0 ; then
+  printerror syntax error: missing required parameter, --help assumed
+  dohelp
+  exit 103
+fi
+
+state=I
+while test $# -gt 0 && test ${state} != III ; do
+    case "$1" in
+      --help)   dohelp 
+		exit 0
+		;;
+      --quiet)  BEQUIET=--quiet
+		;;
+      --force)  FORCE=yes
+		RETRY=yes
+		;;
+      --try-anyway)
+	        RETRY=yes
+		;;
+      --disclose-deny)
+		RETURNFAILURE=yes
+		;;
+      --query)  MODE=query
+		RETURNFAILURE=yes
+		;;
+      --no-fallback)
+		NOFALLBACK=yes
+		;;
+      --*)	printerror syntax error: unknown option \"$1\"
+		exit 103
+		;;
+	*)      case ${state} in
+		I)  verifyparameter $1
+		    INITSCRIPTID=$1
+		    ;;
+		II) verifyparameter $1
+		    ACTION=$1
+		    ;;
+		esac
+		state=${state}I
+		;;
+    esac
+    shift
+done
+
+if test ${state} != III ; then
+    printerror syntax error: missing required parameter
+    exit 103
+fi
+
+#NOTE: It may not be obvious, but "$@" from this point on must expand
+#to the extra initscript parameters, except inside functions.
+
+## sanity checks and just-in-case warnings.
+case ${ACTION} in
+    start|stop|force-stop|restart|reload|force-reload|status)
+	;;
+    *)
+	if test "x${POLICYHELPER}" != x && test -x "${POLICYHELPER}" ; then
+	    printerror action ${ACTION} is unknown, but proceeding anyway.
+	fi
+	;;
+esac
+
+## Verifies if the given initscript ID is known
+## For sysvinit, this error is critical
+if test ! -f "${INITDPREFIX}${INITSCRIPTID}" ; then
+    printerror unknown initscript, ${INITDPREFIX}${INITSCRIPTID} not found.
+    exit 100
+fi
+
+## Queries sysvinit for the current runlevel
+RL=`${RUNLEVEL} | sed 's/.*\ //'`
+if test ! $? ; then
+    printerror "could not determine current runlevel"
+    if test x${RETRY} = x ; then
+	exit 102
+    fi
+    RL=
+fi
+
+## Handles shutdown sequences VERY safely
+## i.e.: forget about policy, and do all we can to run the script.
+## BTW, why the heck are we being run in a shutdown runlevel?!
+if test x${RL} = x0 || test x${RL} = x6 ; then
+    FORCE=yes
+    RETRY=yes
+    POLICYHELPER=
+    BEQUIET=
+    printerror ----------------------------------------------------
+    printerror WARNING: invoke-rc.d called during shutdown sequence
+    printerror enabling safe mode: initscript policy layer disabled
+    printerror ----------------------------------------------------
+fi
+
+## Verifies the existance of proper S??initscriptID and K??initscriptID 
+## *links* in the proper /etc/rc?.d/ directory
+verifyrclink () {
+  #
+  # verifies if parameters are non-dangling symlinks
+  # all parameters are verified
+  #
+  doexit=
+  while test $# -gt 0 ; do
+    if test ! -L "$1" ; then
+        printerror not a symlink: $1
+        doexit=102
+    fi
+    if test ! -f "$1" ; then
+        printerror dangling symlink: $1
+        doexit=102
+    fi
+    shift
+  done
+  if test x${doexit} != x && test x${RETRY} = x; then
+     exit ${doexit}
+  fi
+  return 0
+}
+
+# we do handle multiple links per runlevel
+# but we don't handle embedded blanks in link names :-(
+if test x${RL} != x ; then
+    SLINK=`ls -d -Q ${RCDPREFIX}${RL}.d/S[0-9][0-9]${INITSCRIPTID} 2>/dev/null | xargs`
+    KLINK=`ls -d -Q ${RCDPREFIX}${RL}.d/K[0-9][0-9]${INITSCRIPTID} 2>/dev/null | xargs`
+    SSLINK=`ls -d -Q ${RCDPREFIX}S.d/S[0-9][0-9]${INITSCRIPTID} 2>/dev/null | xargs`
+
+    verifyrclink ${SLINK} ${KLINK} ${SSLINK}
+fi
+
+testexec () {
+  #
+  # returns true if any of the parameters is
+  # executable (after following links)
+  #
+  while test $# -gt 0 ; do
+    if test -x "$1" ; then
+       return 0
+    fi
+    shift
+  done
+  return 1
+}
+
+RC=
+
+###
+### LOCAL INITSCRIPT POLICY: Enforce need of a start entry
+### in either runlevel S or current runlevel to allow start
+### or restart.
+###
+case ${ACTION} in
+  start|restart)
+    if testexec ${SLINK} ; then
+	RC=104
+    elif testexec ${KLINK} ; then
+	RC=101
+    elif testexec ${SSLINK} ; then
+	RC=104
+    fi
+  ;;
+esac
+
+# test if /etc/init.d/initscript is actually executable
+if testexec "${INITDPREFIX}${INITSCRIPTID}" ; then
+    if test x${RC} = x && test x${MODE} = xquery ; then
+        RC=105
+    fi
+
+    # call policy layer
+    querypolicy
+    case ${RC} in
+        101|104)
+           ;;
+        *) if test x${MODE} != xquery ; then
+	       printerror policy-rc.d returned error status ${RC}
+	       if test x${RETRY} = x ; then
+	           exit ${RC}
+               else
+    	           RC=102
+    	       fi
+           fi
+           ;;
+    esac
+else
+    ###
+    ### LOCAL INITSCRIPT POLICY: non-executable initscript; deny exec.
+    ### (this is common sense, actually :^P )
+    ###
+    RC=101
+fi
+
+## Handles --query
+if test x${MODE} = xquery ; then
+    exit ${RC}
+fi
+
+
+setechoactions () {
+    if test $# -gt 1 ; then
+	echoaction=true
+    else
+	echoaction=
+    fi
+}
+getnextaction () {
+    saction=$1
+    shift
+    ACTION="$@"
+}
+
+## Executes initscript
+## note that $ACTION is a space-separated list of actions
+## to be attempted in order until one suceeds.
+if test x${FORCE} != x || test ${RC} -eq 104 ; then
+    if testexec "${INITDPREFIX}${INITSCRIPTID}" ; then
+	RC=102
+	setechoactions ${ACTION}
+	while test ! -z "${ACTION}" ; do
+	    getnextaction ${ACTION}
+	    if test ! -z ${echoaction} ; then
+		printerror executing initscript action \"${saction}\"...
+	    fi
+
+	    "${INITDPREFIX}${INITSCRIPTID}" "${saction}" "$@" && exit 0
+	    RC=$?
+
+	    if test ! -z "${ACTION}" ; then
+		printerror action \"${saction}\" failed, trying next action...
+	    fi
+	done
+	printerror initscript ${INITSCRIPTID}, action \"${saction}\" failed.
+	exit ${RC}
+    fi
+    exit 102
+fi
+
+## Handles --disclose-deny
+if test ${RC} -eq 101 && test x${RETURNFAILURE} = x ; then
+    RC=0
+else
+    formataction ${ACTION}
+    printerror initscript ${naction} \"${printaction}\" not executed.
+fi
+
+exit ${RC}
diff -Naur sysvinit-2.86/debian/sysv-rc/sbin/update-rc.d sysvinit-2.86-robox-linux/debian/sysv-rc/sbin/update-rc.d
--- sysvinit-2.86/debian/sysv-rc/sbin/update-rc.d	1970-01-01 01:00:00.000000000 +0100
+++ sysvinit-2.86-robox-linux/debian/sysv-rc/sbin/update-rc.d	2010-06-14 14:07:20.689409133 +0200
@@ -0,0 +1,207 @@
+#! /usr/bin/perl
+#
+# update-rc.d	Update the links in /etc/rc[0-9S].d/
+#
+# Version:	@(#)update-rc.d.pl  2.02  05-Mar-1998  miquels@cistron.nl
+#
+
+$initd = "/etc/init.d";
+$etcd  = "/etc/rc";
+$notreally = 0;
+
+# Print usage message and die.
+
+sub usage {
+	print STDERR "update-rc.d: error: @_\n" if ($#_ >= 0);
+	print STDERR <<EOF;
+usage: update-rc.d [-n] [-f] <basename> remove
+       update-rc.d [-n] <basename> defaults [NN | sNN kNN]
+       update-rc.d [-n] <basename> start|stop NN runlvl [runlvl] [...] .
+		-n: not really
+		-f: force
+EOF
+	exit (1);
+}
+
+# Check out options.
+
+while($#ARGV >= 0 && ($_ = $ARGV[0]) =~ /^-/) {
+	shift @ARGV;
+	if (/^-n$/) { $notreally++; next }
+	if (/^-f$/) { $force++; next }
+	if (/^-h|--help$/) { &usage; }
+	&usage("unknown option");
+}
+
+# Action.
+
+&usage() if ($#ARGV < 1);
+$bn = shift @ARGV;
+if ($ARGV[0] ne 'remove') {
+    if (! -f "$initd/$bn") {
+	print STDERR "update-rc.d: $initd/$bn: file does not exist\n";
+	exit (1);
+    }
+} elsif (-f "$initd/$bn") {
+    if (!$force) {
+	printf STDERR "update-rc.d: $initd/$bn exists during rc.d purge (use -f to force)\n";
+	exit (1);
+    } else {
+	printf STDERR "update-rc.d: $initd/$bn exists during rc.d purge (continuing)\n";
+    }
+}
+
+$_ = $ARGV[0];
+if    (/^remove$/)       { &checklinks ("remove"); }
+elsif (/^defaults$/)     { &defaults; &makelinks }
+elsif (/^(start|stop)$/) { &startstop; &makelinks; }
+else                     { &usage; }
+
+exit (0);
+
+# Check if there are links in /etc/rc[0-9S].d/ 
+# Remove if the first argument is "remove" and the links 
+# point to $bn.
+
+sub is_link () {
+    my ($op, $fn, $bn) = @_;
+    if (! -l $fn) {
+	print STDERR "update-rc.d: warning: $fn is not a symbolic link\n";
+	return 0;
+    } else {
+	$linkdst = readlink ($fn);
+	if (! defined $linkdst) {
+	    die ("update-rc.d: error reading symbolic link: $!\n");
+	}
+	if (($linkdst ne "../init.d/$bn") && ($linkdst ne "../init.d/$bn")) {
+	    print STDERR "update-rc.d: warning: $fn is not a link to ../init.d/$bn\n";
+	    return 0;
+	}
+    }
+    return 1;
+}
+
+sub checklinks {
+    my ($i, $found, $fn, $islnk);
+
+    print " Removing any system startup links for $initd/$bn ...\n"
+	if ($_[0] eq 'remove');
+
+    $found = 0;
+
+    foreach $i (0..9, 'S') {
+	unless (chdir ("$etcd$i.d")) {
+	    next if ($i =~ m/^[789S]$/);
+	    die("update-rc.d: chdir $etcd$i.d: $!\n");
+	}
+	opendir(DIR, ".");
+	foreach $_ (readdir(DIR)) {
+	    next unless (/^[SK]\d\d$bn$/);
+	    $fn = "$etcd$i.d/$_";
+	    $found = 1;
+	    $islnk = &is_link ($_[0], $fn, $bn);
+	    next if ($_[0] ne 'remove');
+	    if (! $islnk) {
+		print "   $fn is not a link to ../init.d/$bn; not removing\n"; 
+		next;
+	    }
+	    print "   $etcd$i.d/$_\n";
+	    next if ($notreally);
+	    unlink ("$etcd$i.d/$_") ||
+		die("update-rc.d: unlink: $!\n");
+	}
+	closedir(DIR);
+    }
+    $found;
+}
+
+# Process the arguments after the "defaults" keyword.
+
+sub defaults {
+    my ($start, $stop) = (20, 20);
+
+    &usage ("defaults takes only one or two codenumbers") if ($#ARGV > 2);
+    $start = $stop = $ARGV[1] if ($#ARGV >= 1);
+    $stop  =         $ARGV[2] if ($#ARGV >= 2);
+    &usage ("codenumber must be a number between 0 and 99")
+	if ($start !~ /^\d\d?$/ || $stop  !~ /^\d\d?$/);
+
+    $start = sprintf("%02d", $start);
+    $stop  = sprintf("%02d", $stop);
+
+    $stoplinks[0] = $stoplinks[1] = $stoplinks[6] = "K$stop";
+    $startlinks[2] = $startlinks[3] =
+	$startlinks[4] = $startlinks[5] = "S$start";
+
+    1;
+}
+
+# Process the arguments after the start or stop keyword.
+
+sub startstop {
+
+    my($letter, $NN, $level);
+
+    while ($#ARGV >= 0) {
+	if    ($ARGV[0] eq 'start') { $letter = 'S'; }
+	elsif ($ARGV[0] eq 'stop')  { $letter = 'K' }
+	else {
+	    &usage("expected start|stop");
+	}
+
+	if ($ARGV[1] !~ /^\d\d?$/) {
+	    &usage("expected NN after $ARGV[0]");
+	}
+	$NN = sprintf("%02d", $ARGV[1]);
+
+	shift @ARGV; shift @ARGV;
+	$level = shift @ARGV;
+	do {
+	    if ($level !~ m/^[0-9S]$/) {
+		&usage(
+		       "expected runlevel [0-9S] (did you forget \".\" ?)");
+	    }
+	    if (! -d "$etcd$level.d") {
+		print STDERR
+		    "update-rc.d: $etcd$level.d: no such directory\n";
+		exit(1);
+	    }
+	    $level = 99 if ($level eq 'S');
+	    $startlinks[$level] = "$letter$NN" if ($letter eq 'S');
+	    $stoplinks[$level]  = "$letter$NN" if ($letter eq 'K');
+	} while (($level = shift @ARGV) ne '.');
+	&usage("action with list of runlevels not terminated by \`.'")
+	    if ($level ne '.');
+    }
+    1;
+}
+
+# Create the links.
+
+sub makelinks {
+    my($t, $i);
+    my @links;
+
+    if (&checklinks) {
+	print " System startup links for $initd/$bn already exist.\n";
+	exit (0);
+    }
+    print " Adding system startup for $initd/$bn ...\n";
+
+    # nice unreadable perl mess :)
+
+    for($t = 0; $t < 2; $t++) {
+	@links = $t ? @startlinks : @stoplinks;
+	for($i = 0; $i <= $#links; $i++) {
+	    $lvl = $i;
+	    $lvl = 'S' if ($i == 99);
+	    next if ($links[$i] eq '');
+	    print "   $etcd$lvl.d/$links[$i]$bn -> ../init.d/$bn\n";
+	    next if ($notreally);
+	    symlink("../init.d/$bn", "$etcd$lvl.d/$links[$i]$bn")
+		|| die("update-rc.d: symlink: $!\n");
+	}
+    }
+
+    1;
+}
